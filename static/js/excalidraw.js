(function(){
shadow$provide[436]=function(ka,T,Da,C){var v=T(13);!function(u,t){"object"==typeof C&&"object"==typeof Da?Da.exports=t(T(3),T(12)):"function"==typeof define&&define.amd?define(["react","react-dom"],t):"object"==typeof C?C.Excalidraw=t(T(3),T(12)):u.Excalidraw=t(u.React,u.ReactDOM)}(self,function(u,t){return(()=>{function q(B){if(a[B])return a[B].exports;var n=a[B]={id:B,exports:{}};return w[B](n,n.exports,q),n.exports}var k,l,p,w={5374:B=>{function n(g,z,D,J,O,S,H){try{var G=g[S](H),E=G.value}catch(F){return void D(F)}G.done?
z(E):Promise.resolve(E).then(J,O)}B.exports=function(g){return function(){var z=this,D=arguments;return new Promise(function(J,O){function S(E){n(G,J,O,S,H,"next",E)}function H(E){n(G,J,O,S,H,"throw",E)}var G=g.apply(z,D);S(void 0)})}}},566:B=>{B.exports=function(n,g,z){return g in n?Object.defineProperty(n,g,{value:z,enumerable:!0,configurable:!0,writable:!0}):n[g]=z,n}},6950:B=>{function n(){return B.exports=n=Object.assign||function(g){for(var z=1;z<arguments.length;z++){var D=arguments[z],J;for(J in D)Object.prototype.hasOwnProperty.call(D,
J)&&(g[J]=D[J])}return g},n.apply(this,arguments)}B.exports=n},5474:(B,n,g)=>{var z=g(8387);B.exports=function(D,J){if(null==D)return{};var O,S=z(D,J);if(Object.getOwnPropertySymbols){var H=Object.getOwnPropertySymbols(D);for(O=0;O<H.length;O++){var G=H[O];0<=J.indexOf(G)||Object.prototype.propertyIsEnumerable.call(D,G)&&(S[G]=D[G])}}return S}},8387:B=>{B.exports=function(n,g){if(null==n)return{};var z,D={},J=Object.keys(n);for(z=0;z<J.length;z++){var O=J[z];0<=g.indexOf(O)||(D[O]=n[O])}return D}},
6009:(B,n,g)=>{n=g(487);g=g(8328);"string"==typeof(g=g.__esModule?g.default:g)&&(g=[[B.id,g,""]]);n(g,{insert:"head",singleton:!1});B.exports=g.locals||{}},1395:(B,n,g)=>{n=g(487);g=g(6121);"string"==typeof(g=g.__esModule?g.default:g)&&(g=[[B.id,g,""]]);n(g,{insert:"head",singleton:!1});B.exports=g.locals||{}},3211:(B,n,g)=>{n=g(487);g=g(2510);"string"==typeof(g=g.__esModule?g.default:g)&&(g=[[B.id,g,""]]);n(g,{insert:"head",singleton:!1});B.exports=g.locals||{}},5574:(B,n,g)=>{n=g(487);g=g(7972);
"string"==typeof(g=g.__esModule?g.default:g)&&(g=[[B.id,g,""]]);n(g,{insert:"head",singleton:!1});B.exports=g.locals||{}},4518:(B,n,g)=>{n=g(487);g=g(190);"string"==typeof(g=g.__esModule?g.default:g)&&(g=[[B.id,g,""]]);n(g,{insert:"head",singleton:!1});B.exports=g.locals||{}},3040:(B,n,g)=>{n=g(487);g=g(6718);"string"==typeof(g=g.__esModule?g.default:g)&&(g=[[B.id,g,""]]);n(g,{insert:"head",singleton:!1});B.exports=g.locals||{}},8623:(B,n,g)=>{n=g(487);g=g(3623);"string"==typeof(g=g.__esModule?g.default:
g)&&(g=[[B.id,g,""]]);n(g,{insert:"head",singleton:!1});B.exports=g.locals||{}},4193:(B,n,g)=>{n=g(487);g=g(103);"string"==typeof(g=g.__esModule?g.default:g)&&(g=[[B.id,g,""]]);n(g,{insert:"head",singleton:!1});B.exports=g.locals||{}},341:(B,n,g)=>{n=g(487);g=g(7061);"string"==typeof(g=g.__esModule?g.default:g)&&(g=[[B.id,g,""]]);n(g,{insert:"head",singleton:!1});B.exports=g.locals||{}},9705:(B,n,g)=>{n=g(487);g=g(1498);"string"==typeof(g=g.__esModule?g.default:g)&&(g=[[B.id,g,""]]);n(g,{insert:"head",
singleton:!1});B.exports=g.locals||{}},7143:(B,n,g)=>{n=g(487);g=g(666);"string"==typeof(g=g.__esModule?g.default:g)&&(g=[[B.id,g,""]]);n(g,{insert:"head",singleton:!1});B.exports=g.locals||{}},7428:(B,n,g)=>{n=g(487);g=g(849);"string"==typeof(g=g.__esModule?g.default:g)&&(g=[[B.id,g,""]]);n(g,{insert:"head",singleton:!1});B.exports=g.locals||{}},8465:(B,n,g)=>{n=g(487);g=g(6915);"string"==typeof(g=g.__esModule?g.default:g)&&(g=[[B.id,g,""]]);n(g,{insert:"head",singleton:!1});B.exports=g.locals||
{}},8680:(B,n,g)=>{n=g(487);g=g(7030);"string"==typeof(g=g.__esModule?g.default:g)&&(g=[[B.id,g,""]]);n(g,{insert:"head",singleton:!1});B.exports=g.locals||{}},205:(B,n,g)=>{n=g(487);g=g(3994);"string"==typeof(g=g.__esModule?g.default:g)&&(g=[[B.id,g,""]]);n(g,{insert:"head",singleton:!1});B.exports=g.locals||{}},8416:(B,n,g)=>{n=g(487);g=g(700);"string"==typeof(g=g.__esModule?g.default:g)&&(g=[[B.id,g,""]]);n(g,{insert:"head",singleton:!1});B.exports=g.locals||{}},2816:(B,n,g)=>{n=g(487);g=g(287);
"string"==typeof(g=g.__esModule?g.default:g)&&(g=[[B.id,g,""]]);n(g,{insert:"head",singleton:!1});B.exports=g.locals||{}},1575:(B,n,g)=>{n=g(487);g=g(5657);"string"==typeof(g=g.__esModule?g.default:g)&&(g=[[B.id,g,""]]);n(g,{insert:"head",singleton:!1});B.exports=g.locals||{}},7287:(B,n,g)=>{n=g(487);g=g(7392);"string"==typeof(g=g.__esModule?g.default:g)&&(g=[[B.id,g,""]]);n(g,{insert:"head",singleton:!1});B.exports=g.locals||{}},8518:(B,n,g)=>{n=g(487);g=g(6065);"string"==typeof(g=g.__esModule?g.default:
g)&&(g=[[B.id,g,""]]);n(g,{insert:"head",singleton:!1});B.exports=g.locals||{}},5849:(B,n,g)=>{n=g(487);g=g(83);"string"==typeof(g=g.__esModule?g.default:g)&&(g=[[B.id,g,""]]);n(g,{insert:"head",singleton:!1});B.exports=g.locals||{}},9478:(B,n,g)=>{n=g(487);g=g(1554);"string"==typeof(g=g.__esModule?g.default:g)&&(g=[[B.id,g,""]]);n(g,{insert:"head",singleton:!1});B.exports=g.locals||{}},2680:(B,n,g)=>{n=g(487);g=g(1970);"string"==typeof(g=g.__esModule?g.default:g)&&(g=[[B.id,g,""]]);n(g,{insert:"head",
singleton:!1});B.exports=g.locals||{}},3142:(B,n,g)=>{n=g(487);g=g(961);"string"==typeof(g=g.__esModule?g.default:g)&&(g=[[B.id,g,""]]);n(g,{insert:"head",singleton:!1});B.exports=g.locals||{}},8234:(B,n,g)=>{n=g(487);g=g(4878);"string"==typeof(g=g.__esModule?g.default:g)&&(g=[[B.id,g,""]]);n(g,{insert:"head",singleton:!1});B.exports=g.locals||{}},4651:(B,n,g)=>{n=g(487);g=g(1988);"string"==typeof(g=g.__esModule?g.default:g)&&(g=[[B.id,g,""]]);n(g,{insert:"head",singleton:!1});B.exports=g.locals||
{}},2189:(B,n,g)=>{n=g(487);g=g(3245);"string"==typeof(g=g.__esModule?g.default:g)&&(g=[[B.id,g,""]]);n(g,{insert:"head",singleton:!1});B.exports=g.locals||{}},487:(B,n,g)=>{function z(ma){for(var ja=-1,oa=0;oa<F.length;oa++)if(F[oa].identifier===ma){ja=oa;break}return ja}function D(ma,ja){for(var oa={},na=[],ra=0;ra<ma.length;ra++){var K=ma[ra],Q=ja.base?K[0]+ja.base:K[0],ha=oa[Q]||0,da="".concat(Q," ").concat(ha);oa[Q]=ha+1;Q=z(da);K={css:K[1],media:K[2],sourceMap:K[3]};-1!==Q?(F[Q].references++,
F[Q].updater(K)):F.push({identifier:da,updater:H(K,ja),references:1});na.push(da)}return na}function J(ma){var ja=document.createElement("style"),oa=ma.attributes||{};if(void 0===oa.nonce){var na=g.nc;na&&(oa.nonce=na)}if(Object.keys(oa).forEach(function(ra){ja.setAttribute(ra,oa[ra])}),"function"==typeof ma.insert)ma.insert(ja);else{ma=E(ma.insert||"head");if(!ma)throw Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");ma.appendChild(ja)}return ja}
function O(ma,ja,oa,na){oa=oa?"":na.media?"@media ".concat(na.media," {").concat(na.css,"}"):na.css;ma.styleSheet?ma.styleSheet.cssText=la(ja,oa):(oa=document.createTextNode(oa),na=ma.childNodes,na[ja]&&ma.removeChild(na[ja]),na.length?ma.insertBefore(oa,na[ja]):ma.appendChild(oa))}function S(ma,ja,oa){ja=oa.css;var na=oa.media;oa=oa.sourceMap;if(na?ma.setAttribute("media",na):ma.removeAttribute("media"),oa&&"undefined"!=typeof btoa&&(ja+="\n/*# sourceMappingURL\x3ddata:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(oa)))),
" */")),ma.styleSheet)ma.styleSheet.cssText=ja;else{for(;ma.firstChild;)ma.removeChild(ma.firstChild);ma.appendChild(document.createTextNode(ja))}}function H(ma,ja){if(ja.singleton){var oa=ta++;var na=X||(X=J(ja));var ra=O.bind(null,na,oa,!1);var K=O.bind(null,na,oa,!0)}else na=J(ja),ra=S.bind(null,na,ja),K=function(){if(null===na.parentNode)var Q=!1;else na.parentNode.removeChild(na),Q=void 0;!Q};return ra(ma),function(Q){Q?(Q.css!==ma.css||Q.media!==ma.media||Q.sourceMap!==ma.sourceMap)&&ra(ma=
Q):K()}}var G,E=function(){var ma={};return function(ja){if(void 0===ma[ja]){var oa=document.querySelector(ja);if(window.HTMLIFrameElement&&oa instanceof window.HTMLIFrameElement)try{oa=oa.contentDocument.head}catch(na){oa=null}ma[ja]=oa}return ma[ja]}}(),F=[],ia,la=(ia=[],function(ma,ja){return ia[ma]=ja,ia.filter(Boolean).join("\n")}),X=null,ta=0;B.exports=function(ma,ja){(ja=ja||{}).singleton||"boolean"==typeof ja.singleton||(ja.singleton=(void 0===G&&(G=!(!(window&&document&&document.all)||window.atob)),
G));var oa=D(ma=ma||[],ja);return function(na){if(na=na||[],"[object Array]"===Object.prototype.toString.call(na)){for(var ra=0;ra<oa.length;ra++){var K=z(oa[ra]);F[K].references--}na=D(na,ja);for(ra=0;ra<oa.length;ra++)K=z(oa[ra]),0===F[K].references&&(F[K].updater(),F.splice(K,1));oa=na}}}},2829:B=>{B.exports=JSON.parse('{"labels":{"paste":"Paste","pasteCharts":"Paste charts","selectAll":"Select all","multiSelect":"Add element to selection","moveCanvas":"Move canvas","cut":"Cut","copy":"Copy","copyAsPng":"Copy to clipboard as PNG","copyAsSvg":"Copy to clipboard as SVG","bringForward":"Bring forward","sendToBack":"Send to back","bringToFront":"Bring to front","sendBackward":"Send backward","delete":"Delete","copyStyles":"Copy styles","pasteStyles":"Paste styles","stroke":"Stroke","background":"Background","fill":"Fill","strokeWidth":"Stroke width","strokeStyle":"Stroke style","strokeStyle_solid":"Solid","strokeStyle_dashed":"Dashed","strokeStyle_dotted":"Dotted","sloppiness":"Sloppiness","opacity":"Opacity","textAlign":"Text align","edges":"Edges","sharp":"Sharp","round":"Round","arrowheads":"Arrowheads","arrowhead_none":"None","arrowhead_arrow":"Arrow","arrowhead_bar":"Bar","arrowhead_dot":"Dot","fontSize":"Font size","fontFamily":"Font family","onlySelected":"Only selected","withBackground":"With background","exportEmbedScene":"Embed scene into exported file","exportEmbedScene_details":"Scene data will be saved into the exported PNG/SVG file so that the scene can be restored from it.\\nWill increase exported file size.","addWatermark":"Add \\"Made with Excalidraw\\"","handDrawn":"Hand-drawn","normal":"Normal","code":"Code","small":"Small","medium":"Medium","large":"Large","veryLarge":"Very large","solid":"Solid","hachure":"Hachure","crossHatch":"Cross-hatch","thin":"Thin","bold":"Bold","left":"Left","center":"Center","right":"Right","extraBold":"Extra bold","architect":"Architect","artist":"Artist","cartoonist":"Cartoonist","fileTitle":"File title","colorPicker":"Color picker","canvasBackground":"Canvas background","drawingCanvas":"Drawing canvas","layers":"Layers","actions":"Actions","language":"Language","liveCollaboration":"Live collaboration","duplicateSelection":"Duplicate","untitled":"Untitled","name":"Name","yourName":"Your name","madeWithExcalidraw":"Made with Excalidraw","group":"Group selection","ungroup":"Ungroup selection","collaborators":"Collaborators","showGrid":"Show grid","addToLibrary":"Add to library","removeFromLibrary":"Remove from library","libraryLoadingMessage":"Loading library…","libraries":"Browse libraries","loadingScene":"Loading scene…","align":"Align","alignTop":"Align top","alignBottom":"Align bottom","alignLeft":"Align left","alignRight":"Align right","centerVertically":"Center vertically","centerHorizontally":"Center horizontally","distributeHorizontally":"Distribute horizontally","distributeVertically":"Distribute vertically","viewMode":"View mode","toggleExportColorScheme":"Toggle export color scheme","share":"Share"},"buttons":{"clearReset":"Reset the canvas","export":"Export","exportToPng":"Export to PNG","exportToSvg":"Export to SVG","copyToClipboard":"Copy to clipboard","copyPngToClipboard":"Copy PNG to clipboard","scale":"Scale","save":"Save","saveAs":"Save as","load":"Load","getShareableLink":"Get shareable link","close":"Close","selectLanguage":"Select language","scrollBackToContent":"Scroll back to content","zoomIn":"Zoom in","zoomOut":"Zoom out","resetZoom":"Reset zoom","menu":"Menu","done":"Done","edit":"Edit","undo":"Undo","redo":"Redo","resetLibrary":"Reset library","createNewRoom":"Create new room","fullScreen":"Full screen","darkMode":"Dark mode","lightMode":"Light mode","zenMode":"Zen mode","exitZenMode":"Exit zen mode"},"alerts":{"clearReset":"This will clear the whole canvas. Are you sure?","couldNotCreateShareableLink":"Couldn\'t create shareable link.","couldNotCreateShareableLinkTooBig":"Couldn\'t create shareable link: the scene is too big","couldNotLoadInvalidFile":"Couldn\'t load invalid file","importBackendFailed":"Importing from backend failed.","cannotExportEmptyCanvas":"Cannot export empty canvas.","couldNotCopyToClipboard":"Couldn\'t copy to clipboard. Try using Chrome browser.","decryptFailed":"Couldn\'t decrypt data.","uploadedSecurly":"The upload has been secured with end-to-end encryption, which means that Excalidraw server and third parties can\'t read the content.","loadSceneOverridePrompt":"Loading external drawing will replace your existing content. Do you wish to continue?","collabStopOverridePrompt":"Stopping the session will overwrite your previous, locally stored drawing. Are you sure?\\n\\n(If you want to keep your local drawing, simply close the browser tab instead.)","errorLoadingLibrary":"There was an error loading the third party library.","confirmAddLibrary":"This will add {{numShapes}} shape(s) to your library. Are you sure?","imageDoesNotContainScene":"Importing images isn\'t supported at the moment.\\n\\nDid you want to import a scene? This image does not seem to contain any scene data. Have you enabled this during export?","cannotRestoreFromImage":"Scene couldn\'t be restored from this image file","invalidSceneUrl":"Couldn\'t import scene from the supplied URL. It\'s either malformed, or doesn\'t contain valid Excalidraw JSON data.","resetLibrary":"This will clear your library. Are you sure?"},"toolBar":{"selection":"Selection","draw":"Free draw","rectangle":"Rectangle","diamond":"Diamond","ellipse":"Ellipse","arrow":"Arrow","line":"Line","text":"Text","library":"Library","lock":"Keep selected tool active after drawing"},"headings":{"canvasActions":"Canvas actions","selectedShapeActions":"Selected shape actions","shapes":"Shapes"},"hints":{"linearElement":"Click to start multiple points, drag for single line","freeDraw":"Click and drag, release when you\'re finished","text":"Tip: you can also add text by double-clicking anywhere with the selection tool","linearElementMulti":"Click on last point or press Escape or Enter to finish","lockAngle":"You can constrain angle by holding SHIFT","resize":"You can constrain proportions by holding SHIFT while resizing,\\nhold ALT to resize from the center","rotate":"You can constrain angles by holding SHIFT while rotating","lineEditor_info":"Double-click or press Enter to edit points","lineEditor_pointSelected":"Press Delete to remove point, CtrlOrCmd+D to duplicate, or drag to move","lineEditor_nothingSelected":"Select a point to move or remove, or hold Alt and click to add new points"},"canvasError":{"cannotShowPreview":"Cannot show preview","canvasTooBig":"The canvas may be too big.","canvasTooBigTip":"Tip: try moving the farthest elements a bit closer together."},"errorSplash":{"headingMain_pre":"Encountered an error. Try ","headingMain_button":"reloading the page.","clearCanvasMessage":"If reloading doesn\'t work, try ","clearCanvasMessage_button":"clearing the canvas.","clearCanvasCaveat":" This will result in loss of work ","trackedToSentry_pre":"The error with identifier ","trackedToSentry_post":" was tracked on our system.","openIssueMessage_pre":"We were very cautious not to include your scene information on the error. If your scene is not private, please consider following up on our ","openIssueMessage_button":"bug tracker.","openIssueMessage_post":" Please include information below by copying and pasting into the GitHub issue.","sceneContent":"Scene content:"},"roomDialog":{"desc_intro":"You can invite people to your current scene to collaborate with you.","desc_privacy":"Don\'t worry, the session uses end-to-end encryption, so whatever you draw will stay private. Not even our server will be able to see what you come up with.","button_startSession":"Start session","button_stopSession":"Stop session","desc_inProgressIntro":"Live-collaboration session is now in progress.","desc_shareLink":"Share this link with anyone you want to collaborate with:","desc_exitSession":"Stopping the session will disconnect you from the room, but you\'ll be able to continue working with the scene, locally. Note that this won\'t affect other people, and they\'ll still be able to collaborate on their version.","shareTitle":"Join a live collaboration session on Excalidraw"},"errorDialog":{"title":"Error"},"helpDialog":{"blog":"Read our blog","click":"click","curvedArrow":"Curved arrow","curvedLine":"Curved line","documentation":"Documentation","drag":"drag","editor":"Editor","github":"Found an issue? Submit","howto":"Follow our guides","or":"or","preventBinding":"Prevent arrow binding","shapes":"Shapes","shortcuts":"Keyboard shortcuts","textFinish":"Finish editing (text)","textNewLine":"Add new line (text)","title":"Help","view":"View","zoomToFit":"Zoom to fit all elements","zoomToSelection":"Zoom to selection"},"encrypted":{"tooltip":"Your drawings are end-to-end encrypted so Excalidraw\'s servers will never see them."},"stats":{"angle":"Angle","element":"Element","elements":"Elements","height":"Height","scene":"Scene","selected":"Selected","storage":"Storage","title":"Stats for nerds","total":"Total","version":"Version","versionCopy":"Click to copy","versionNotAvailable":"Version not available","width":"Width"},"toast":{"copyStyles":"Copied styles.","copyToClipboard":"Copied to clipboard.","copyToClipboardAsPng":"Copied {{exportSelection}} to clipboard as PNG\\n({{exportColorScheme}})","fileSaved":"File saved.","fileSavedToFilename":"Saved to {filename}","canvas":"canvas","selection":"selection"}}')},
2051:B=>{B.exports=JSON.parse('{"ar-SA":84,"bg-BG":95,"ca-ES":95,"de-DE":100,"el-GR":99,"en":100,"es-ES":100,"fa-IR":91,"fi-FI":100,"fr-FR":100,"he-IL":92,"hi-IN":93,"hu-HU":83,"id-ID":99,"it-IT":100,"ja-JP":97,"kab-KAB":98,"ko-KR":95,"my-MM":78,"nb-NO":100,"nl-NL":99,"nn-NO":86,"oc-FR":100,"pa-IN":96,"pl-PL":97,"pt-BR":100,"pt-PT":98,"ro-RO":100,"ru-RU":100,"sk-SK":99,"sv-SE":100,"tr-TR":83,"uk-UA":96,"zh-CN":98,"zh-TW":100}')},788:(B,n,g)=>{function z(J){if(!g.o(D,J))return Promise.resolve().then(()=>
{var H=Error("Cannot find module '"+J+"'");throw H.code="MODULE_NOT_FOUND",H;});var O=D[J],S=O[0];return Promise.all(O.slice(1).map(g.e)).then(()=>g.t(S,3))}var D={"./ar-SA.json":[7294,558],"./bg-BG.json":[3860,384],"./ca-ES.json":[750,351],"./de-DE.json":[7439,43],"./el-GR.json":[9422,526],"./en.json":[2829],"./es-ES.json":[2863,317],"./fa-IR.json":[3853,710],"./fi-FI.json":[5472,472],"./fr-FR.json":[3280,364],"./he-IL.json":[3970,262],"./hi-IN.json":[5599,933],"./hu-HU.json":[1516,661],"./id-ID.json":[7992,
491],"./it-IT.json":[5963,465],"./ja-JP.json":[1323,137],"./kab-KAB.json":[9230,164],"./ko-KR.json":[7552,60],"./my-MM.json":[1778,242],"./nb-NO.json":[8751,246],"./nl-NL.json":[4675,196],"./nn-NO.json":[7558,920],"./oc-FR.json":[9945,565],"./pa-IN.json":[863,280],"./percentages.json":[2051],"./pl-PL.json":[122,852],"./pt-BR.json":[7443,381],"./pt-PT.json":[2560,149],"./ro-RO.json":[5654,752],"./ru-RU.json":[5609,869],"./sk-SK.json":[8684,401],"./sv-SE.json":[1570,698],"./tr-TR.json":[8146,213],"./uk-UA.json":[9746,
583],"./zh-CN.json":[9044,304],"./zh-TW.json":[2939,62]};z.keys=()=>Object.keys(D);z.id=788;B.exports=z},7154:B=>{function n(){return B.exports=n=Object.assign||function(g){for(var z=1;z<arguments.length;z++){var D=arguments[z],J;for(J in D)Object.prototype.hasOwnProperty.call(D,J)&&(g[J]=D[J])}return g},n.apply(this,arguments)}B.exports=n},6479:(B,n,g)=>{var z=g(7316);B.exports=function(D,J){if(null==D)return{};var O,S=z(D,J);if(Object.getOwnPropertySymbols){var H=Object.getOwnPropertySymbols(D);
for(O=0;O<H.length;O++){var G=H[O];0<=J.indexOf(G)||Object.prototype.propertyIsEnumerable.call(D,G)&&(S[G]=D[G])}}return S}},7316:B=>{B.exports=function(n,g){if(null==n)return{};var z,D={},J=Object.keys(n);for(z=0;z<J.length;z++){var O=J[z];0<=g.indexOf(O)||(D[O]=n[O])}return D}},8328:(B,n,g)=>{g.r(n);g.d(n,{default:()=>J});n=g(3645);var z=g.n(n);n=g(1667);n=g.n(n);var D=g(7464);g=g(9638);z=z()(function(O){return O[1]});D=n()(D.Z);g=n()(g.Z);z.push([B.id,'@font-face{font-family:"Virgil";src:url('+
D+');font-display:swap}@font-face{font-family:"Cascadia";src:url('+g+");font-display:swap}",""]);const J=z},6121:(B,n,g)=>{g.r(n);g.d(n,{default:()=>z});n=g(3645);g=g.n(n)()(function(D){return D[1]});g.push([B.id,":export{isMobileQuery:(max-width: 600px), (max-height: 500px) and (max-width: 1000px);appearanceFilter:invert(93%) hue-rotate(180deg)}.excalidraw .Avatar{width:2.5rem;height:2.5rem;border-radius:1.25rem;display:flex;justify-content:center;align-items:center;color:#fff;cursor:pointer;font-size:.8rem;font-weight:500}",
""]);const z=g},2510:(B,n,g)=>{g.r(n);g.d(n,{default:()=>z});n=g(3645);g=g.n(n)()(function(D){return D[1]});g.push([B.id,":export{isMobileQuery:(max-width: 600px), (max-height: 500px) and (max-width: 1000px);appearanceFilter:invert(93%) hue-rotate(180deg)}.excalidraw .CollabButton.is-collaborating{background-color:var(--button-special-active-bg-color)}.excalidraw .CollabButton.is-collaborating .ToolIcon__icon svg,.excalidraw .CollabButton.is-collaborating .ToolIcon__label{color:var(--icon-green-fill-color)}.excalidraw .CollabButton-collaborators{min-width:1em;position:absolute;bottom:-5px;padding:3px;border-radius:50%;background-color:#40c057;color:#fff;font-size:.7em;font-family:var(--ui-font)}:root[dir\x3dltr] .excalidraw .CollabButton-collaborators{right:-5px}:root[dir\x3drtl] .excalidraw .CollabButton-collaborators{left:-5px}",
""]);const z=g},7972:(B,n,g)=>{g.r(n);g.d(n,{default:()=>z});n=g(3645);g=g.n(n)()(function(D){return D[1]});g.push([B.id,':export{isMobileQuery:(max-width: 600px), (max-height: 500px) and (max-width: 1000px);appearanceFilter:invert(93%) hue-rotate(180deg)}.excalidraw .color-picker{background:var(--popup-bg-color);border:0 solid rgba(255,255,255,.25);box-shadow:rgba(0,0,0,.25) 0 1px 4px;border-radius:4px;position:absolute}:root[dir\x3dltr] .excalidraw .color-picker{left:-5.5px}:root[dir\x3drtl] .excalidraw .color-picker{right:-5.5px}.excalidraw .color-picker-control-container{display:grid;grid-template-columns:auto 1fr;align-items:center}.excalidraw .color-picker-triangle{width:0;height:0;border-style:solid;border-width:0 9px 10px;border-color:transparent transparent var(--popup-bg-color);position:absolute;top:-10px}:root[dir\x3dltr] .excalidraw .color-picker-triangle{left:12px}:root[dir\x3drtl] .excalidraw .color-picker-triangle{right:12px}.excalidraw .color-picker-triangle-shadow{border-color:transparent transparent rgba(0,0,0,.1);top:-11px}.excalidraw .color-picker-content{padding:.5rem;display:grid;grid-template-columns:repeat(5, auto);grid-gap:.5rem;border-radius:4px}.excalidraw .color-picker-content:focus{outline:none;box-shadow:0 0 0 2px var(--focus-highlight-color)}.excalidraw .color-picker-content .color-input-container{grid-column:1/span 5}.excalidraw .color-picker-swatch{position:relative;height:1.875rem;width:1.875rem;cursor:pointer;border-radius:4px;margin:0;box-sizing:border-box;border:1px solid #ddd;background-color:currentColor !important;filter:var(--appearance-filter)}.excalidraw .color-picker-swatch:focus{box-shadow:0 0 4px 1px currentColor;border-color:var(--select-highlight-color)}.excalidraw .color-picker-transparent{border-radius:4px;box-shadow:rgba(0,0,0,.1) 0 0 0 1px inset;position:absolute;top:0;right:0;bottom:0;left:0}.excalidraw .color-picker-transparent,.excalidraw .color-picker-label-swatch{background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAMUlEQVQ4T2NkYGAQYcAP3uCTZhw1gGGYhAGBZIA/nYDCgBDAm9BGDWAAJyRCgLaBCAAgXwixzAS0pgAAAABJRU5ErkJggg\x3d\x3d") left center}.excalidraw .color-picker-hash{background:var(--input-border-color);height:1.875rem;width:1.875rem;color:var(--input-label-color);display:flex;align-items:center;justify-content:center;position:relative}:root[dir\x3dltr] .excalidraw .color-picker-hash{border-radius:4px 0 0 4px}:root[dir\x3drtl] .excalidraw .color-picker-hash{border-radius:0 4px 4px 0}.excalidraw .color-input-container:focus-within .color-picker-hash{box-shadow:0 0 0 2px var(--focus-highlight-color)}.excalidraw .color-input-container:focus-within .color-picker-hash::before,.excalidraw .color-input-container:focus-within .color-picker-hash::after{content:"";width:1px;height:100%;position:absolute;top:0}.excalidraw .color-input-container:focus-within .color-picker-hash::before{background:var(--input-border-color)}:root[dir\x3dltr] .excalidraw .color-input-container:focus-within .color-picker-hash::before{right:-1px}:root[dir\x3drtl] .excalidraw .color-input-container:focus-within .color-picker-hash::before{left:-1px}.excalidraw .color-input-container:focus-within .color-picker-hash::after{background:var(--input-bg-color)}:root[dir\x3dltr] .excalidraw .color-input-container:focus-within .color-picker-hash::after{right:-2px}:root[dir\x3drtl] .excalidraw .color-input-container:focus-within .color-picker-hash::after{left:-2px}.excalidraw .color-input-container{display:flex}.excalidraw .color-picker-input{width:12ch;margin:0;font-size:1rem;background-color:var(--input-bg-color);color:var(--text-primary-color);border:0;outline:none;height:1.75em;box-shadow:var(--input-border-color) 0 0 0 1px inset;float:left;padding:1px;padding-inline-start:.5em;appearance:none}:root[dir\x3dltr] .excalidraw .color-picker-input{border-radius:0 4px 4px 0}:root[dir\x3drtl] .excalidraw .color-picker-input{border-radius:4px 0 0 4px}.excalidraw .color-picker-label-swatch{height:1.875rem;width:1.875rem;margin-inline-end:.25rem;border:1px solid #dee2e6;position:relative;overflow:hidden;background-color:transparent !important;filter:var(--appearance-filter)}.excalidraw .color-picker-label-swatch:after{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background:var(--swatch-color)}.excalidraw .color-picker-keybinding{position:absolute;bottom:2px;font-size:.7em}:root[dir\x3dltr] .excalidraw .color-picker-keybinding{right:2px}:root[dir\x3drtl] .excalidraw .color-picker-keybinding{left:2px}@media(max-width: 600px),(max-height: 500px)and (max-width: 1000px){.excalidraw .color-picker-keybinding{display:none}}.excalidraw .color-picker-type-canvasBackground .color-picker-keybinding{color:#aaa}.excalidraw .color-picker-type-elementBackground .color-picker-keybinding{color:#fff}.excalidraw .color-picker-swatch[aria-label\x3dtransparent] .color-picker-keybinding{color:#aaa}.excalidraw .color-picker-type-elementStroke .color-picker-keybinding{color:#d4d4d4}.excalidraw.Appearance_dark .color-picker-type-elementBackground .color-picker-keybinding{color:#000}.excalidraw.Appearance_dark .color-picker-swatch[aria-label\x3dtransparent] .color-picker-keybinding{color:#000}',
""]);const z=g},190:(B,n,g)=>{g.r(n);g.d(n,{default:()=>z});n=g(3645);g=g.n(n)()(function(D){return D[1]});g.push([B.id,':export{isMobileQuery:(max-width: 600px), (max-height: 500px) and (max-width: 1000px);appearanceFilter:invert(93%) hue-rotate(180deg)}.excalidraw .context-menu{position:relative;border-radius:4px;box-shadow:0 3px 10px rgba(0,0,0,.2);padding:0;list-style:none;user-select:none;margin:-0.25rem 0 0 .125rem;padding:.5rem 0;background-color:var(--popup-secondary-bg-color);border:1px solid var(--button-gray-3);cursor:default}.excalidraw .context-menu button{color:var(--popup-text-color)}.excalidraw .context-menu-option{position:relative;width:100%;min-width:9.5rem;margin:0;padding:.25rem 1rem .25rem 1.25rem;text-align:start;border-radius:0;background-color:transparent;border:none;white-space:nowrap;display:grid;grid-template-columns:1fr .2fr;align-items:center}.excalidraw .context-menu-option.checkmark::before{position:absolute;left:6px;margin-bottom:1px;content:"✓"}.excalidraw .context-menu-option.dangerous .context-menu-option__label{color:#f03e3e}.excalidraw .context-menu-option .context-menu-option__label{justify-self:start;margin-inline-end:20px}.excalidraw .context-menu-option .context-menu-option__shortcut{justify-self:end;opacity:.6;font-family:inherit;font-size:.7rem}.excalidraw .context-menu-option:hover{color:var(--popup-bg-color);background-color:var(--select-highlight-color)}.excalidraw .context-menu-option:hover.dangerous{background-color:#fa5252}.excalidraw .context-menu-option:hover.dangerous .context-menu-option__label{color:var(--popup-bg-color)}.excalidraw .context-menu-option:focus{z-index:1}@media(max-width: 600px),(max-height: 500px)and (max-width: 1000px){.excalidraw .context-menu-option{display:block}.excalidraw .context-menu-option .context-menu-option__label{margin-inline-end:0}.excalidraw .context-menu-option .context-menu-option__shortcut{display:none}}.excalidraw .context-menu-option-separator{border:none;border-top:1px solid #adb5bd}',
""]);const z=g},6718:(B,n,g)=>{g.r(n);g.d(n,{default:()=>z});n=g(3645);g=g.n(n)()(function(D){return D[1]});g.push([B.id,":export{isMobileQuery:(max-width: 600px), (max-height: 500px) and (max-width: 1000px);appearanceFilter:invert(93%) hue-rotate(180deg)}.excalidraw .Dialog{user-select:text;cursor:auto}.excalidraw .Dialog__title{display:grid;align-items:center;margin-top:0;grid-template-columns:1fr calc(var(--space-factor) * 7);grid-gap:var(--metric);padding:calc(var(--space-factor) * 2);text-align:center;font-variant:small-caps;font-size:1.2em}.excalidraw .Dialog__titleContent{flex:1}.excalidraw .Dialog .Modal__close{color:var(--icon-fill-color);margin:0}.excalidraw .Dialog__content{padding:0 16px 16px}@media(max-width: 600px),(max-height: 500px)and (max-width: 1000px){.excalidraw .Dialog{--metric: calc(var(--space-factor) * 4);--inset-left: max(var(--metric), var(--sal));--inset-right: max(var(--metric), var(--sar))}.excalidraw .Dialog__title{grid-template-columns:calc(var(--space-factor) * 7) 1fr calc( var(--space-factor) * 7 );position:sticky;top:0;padding:calc(var(--space-factor) * 2);background:var(--island-bg-color);font-size:1.25em;box-sizing:border-box;border-bottom:1px solid var(--button-gray-2);z-index:1}.excalidraw .Dialog__titleContent{text-align:center}.excalidraw .Dialog .Island{width:100vw;height:100%;box-sizing:border-box;overflow-y:auto;padding-left:max(calc(var(--padding) * var(--space-factor)), var(--sal));padding-right:max(calc(var(--padding) * var(--space-factor)), var(--sar));padding-bottom:max(calc(var(--padding) * var(--space-factor)), var(--sab))}.excalidraw .Dialog .Modal__close{order:-1}}",
""]);const z=g},3623:(B,n,g)=>{g.r(n);g.d(n,{default:()=>z});n=g(3645);g=g.n(n)()(function(D){return D[1]});g.push([B.id,':export{isMobileQuery:(max-width: 600px), (max-height: 500px) and (max-width: 1000px);appearanceFilter:invert(93%) hue-rotate(180deg)}.excalidraw .ExportDialog__preview{--preview-padding: calc(var(--space-factor) * 4);background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAMUlEQVQ4T2NkYGAQYcAP3uCTZhw1gGGYhAGBZIA/nYDCgBDAm9BGDWAAJyRCgLaBCAAgXwixzAS0pgAAAABJRU5ErkJggg\x3d\x3d") left center;text-align:center;padding:var(--preview-padding);margin-bottom:calc(var(--space-factor) * 3)}.excalidraw .ExportDialog__preview canvas{max-width:calc(100% - var(--preview-padding) * 2);max-height:25rem}.excalidraw.Appearance_dark .ExportDialog__preview canvas{filter:none}.excalidraw .ExportDialog__actions{width:100%;display:flex;grid-gap:calc(var(--space-factor) * 2);align-items:top;justify-content:space-between}.excalidraw .ExportDialog__name{grid-column:project-name;margin:auto}.excalidraw .ExportDialog__name .TextInput{height:calc(1rem - 3px)}@media(max-width: 600px),(max-height: 500px)and (max-width: 1000px){.excalidraw .ExportDialog{display:flex;flex-direction:column}.excalidraw .ExportDialog__actions{flex-direction:column;align-items:center}.excalidraw .ExportDialog__actions\x3e*{margin-bottom:calc(var(--space-factor) * 3)}.excalidraw .ExportDialog__preview canvas{max-height:30vh}.excalidraw .ExportDialog__dialog,.excalidraw .ExportDialog__dialog .Island{height:100%;box-sizing:border-box}.excalidraw .ExportDialog__dialog .Island{overflow-y:auto}}',
""]);const z=g},103:(B,n,g)=>{g.r(n);g.d(n,{default:()=>z});n=g(3645);g=g.n(n)()(function(D){return D[1]});g.push([B.id,".excalidraw .FixedSideContainer{--margin: 0.25rem;position:absolute;pointer-events:none}.excalidraw .FixedSideContainer\x3e*{pointer-events:all}.excalidraw .FixedSideContainer_side_top{left:var(--margin);top:var(--margin);right:var(--margin);z-index:2}.excalidraw .FixedSideContainer_side_top.zen-mode{right:42px}",""]);const z=g},7061:(B,n,g)=>{g.r(n);g.d(n,{default:()=>z});n=g(3645);
g=g.n(n)()(function(D){return D[1]});g.push([B.id,":export{isMobileQuery:(max-width: 600px), (max-height: 500px) and (max-width: 1000px);appearanceFilter:invert(93%) hue-rotate(180deg)}.excalidraw .HelpDialog h3{border-bottom:1px solid var(--button-gray-2);padding-bottom:4px}.excalidraw .HelpDialog--island{border:1px solid var(--button-gray-2);margin-bottom:16px}.excalidraw .HelpDialog--island-title{margin:0;padding:4px;background-color:var(--button-gray-1);text-align:center}.excalidraw .HelpDialog--shortcut{border-top:1px solid var(--button-gray-2)}.excalidraw .HelpDialog--key{word-break:keep-all;border:1px solid var(--button-gray-2);padding:2px 8px;margin:auto 4px;background-color:var(--button-gray-1);border-radius:2px;font-size:.8em;min-height:26px;box-sizing:border-box;display:flex;align-items:center;font-family:inherit}.excalidraw .HelpDialog--header{display:flex;flex-direction:row;justify-content:space-evenly;margin-bottom:32px;padding-bottom:16px}.excalidraw .HelpDialog--btn{border:1px solid var(--link-color);padding:8px 32px;border-radius:4px}.excalidraw .HelpDialog--btn:hover{text-decoration:none}",
""]);const z=g},1498:(B,n,g)=>{g.r(n);g.d(n,{default:()=>z});n=g(3645);g=g.n(n)()(function(D){return D[1]});g.push([B.id,":export{isMobileQuery:(max-width: 600px), (max-height: 500px) and (max-width: 1000px);appearanceFilter:invert(93%) hue-rotate(180deg)}.excalidraw .HintViewer{pointer-events:none;box-sizing:border-box;position:absolute;display:flex;justify-content:center;left:0;top:100%;max-width:100%;width:100%;margin-top:6px;text-align:center;color:#868e96;font-size:.8rem}@media(max-width: 600px),(max-height: 500px)and (max-width: 1000px){.excalidraw .HintViewer{position:static;padding-right:2em}}.excalidraw .HintViewer\x3espan{padding:.2rem .4rem;background-color:var(--overlay-bg-color);border-radius:4px}",
""]);const z=g},666:(B,n,g)=>{g.r(n);g.d(n,{default:()=>z});n=g(3645);g=g.n(n)()(function(D){return D[1]});g.push([B.id,':export{isMobileQuery:(max-width: 600px), (max-height: 500px) and (max-width: 1000px);appearanceFilter:invert(93%) hue-rotate(180deg)}.excalidraw .picker-container{display:inline-block;box-sizing:border-box;margin-right:.25rem}.excalidraw .picker{background:var(--popup-bg-color);border:0 solid rgba(255,255,255,.25);box-shadow:rgba(0,0,0,.25) 0 1px 4px;border-radius:4px;position:absolute}.excalidraw .picker-container button,.excalidraw .picker button{position:relative;display:flex;align-items:center;justify-content:center}.excalidraw .picker-container button:focus,.excalidraw .picker button:focus{outline:transparent;background-color:var(--button-gray-2)}.excalidraw .picker-container button:focus svg,.excalidraw .picker button:focus svg{opacity:1}.excalidraw .picker-container button:hover,.excalidraw .picker button:hover{background-color:var(--button-gray-2)}.excalidraw .picker-container button:active,.excalidraw .picker button:active{background-color:var(--button-gray-3)}.excalidraw .picker-container button:disabled,.excalidraw .picker button:disabled{cursor:not-allowed}.excalidraw .picker-container button svg,.excalidraw .picker button svg{margin:0;width:36px;height:18px;opacity:.6;pointer-events:none}.excalidraw .picker button{padding:.25rem .28rem .35rem .25rem}.excalidraw .picker-triangle{width:0;height:0;position:relative;top:-10px;z-index:10}:root[dir\x3dltr] .excalidraw .picker-triangle{left:12px}:root[dir\x3drtl] .excalidraw .picker-triangle{right:12px}.excalidraw .picker-triangle:before{content:"";position:absolute;border-style:solid;border-width:0 9px 10px;border-color:transparent transparent rgba(0,0,0,.1);top:-1px}.excalidraw .picker-triangle:after{content:"";position:absolute;border-style:solid;border-width:0 9px 10px;border-color:transparent transparent var(--popup-bg-color)}.excalidraw .picker-content{padding:.5rem;display:grid;grid-auto-flow:column;grid-gap:.5rem;border-radius:4px}:root[dir\x3drtl] .excalidraw .picker-content{padding:.4rem}.excalidraw .picker-keybinding{position:absolute;bottom:2px;font-size:.7em;color:var(--keybinding-color)}:root[dir\x3dltr] .excalidraw .picker-keybinding{right:2px}:root[dir\x3drtl] .excalidraw .picker-keybinding{left:2px}@media(max-width: 600px),(max-height: 500px)and (max-width: 1000px){.excalidraw .picker-keybinding{display:none}}.excalidraw .picker-type-canvasBackground .picker-keybinding{color:#aaa}.excalidraw .picker-type-elementBackground .picker-keybinding{color:#fff}.excalidraw .picker-swatch[aria-label\x3dtransparent] .picker-keybinding{color:#aaa}.excalidraw .picker-type-elementStroke .picker-keybinding{color:#d4d4d4}.excalidraw.Appearance_dark .picker-type-elementBackground .picker-keybinding{color:#000}.excalidraw.Appearance_dark .picker-swatch[aria-label\x3dtransparent] .picker-keybinding{color:#000}',
""]);const z=g},849:(B,n,g)=>{g.r(n);g.d(n,{default:()=>z});n=g(3645);g=g.n(n)()(function(D){return D[1]});g.push([B.id,".excalidraw .Island{--padding: 0;background-color:var(--island-bg-color);backdrop-filter:saturate(100%) blur(10px);box-shadow:var(--shadow-island);border-radius:4px;padding:calc(var(--padding) * var(--space-factor));position:relative;transition:box-shadow .5s ease-in-out}.excalidraw .Island.zen-mode{box-shadow:none}",""]);const z=g},6915:(B,n,g)=>{g.r(n);g.d(n,{default:()=>z});
n=g(3645);g=g.n(n)()(function(D){return D[1]});g.push([B.id,".excalidraw .layer-ui__library{margin:auto;display:flex;align-items:center;justify-content:center}.excalidraw .layer-ui__library .layer-ui__library-header{display:flex;align-items:center;width:100%;margin:2px 0}.excalidraw .layer-ui__library .layer-ui__library-header button{margin:0 2px}.excalidraw .layer-ui__library .layer-ui__library-header a{margin-inline-start:auto;padding-inline-end:18px;white-space:nowrap}.excalidraw .layer-ui__library-message{padding:10px 20px;max-width:200px}.excalidraw .layer-ui__library-items{max-height:50vh;overflow:auto}.excalidraw .layer-ui__wrapper{z-index:var(--zIndex-layerUI)}.excalidraw .layer-ui__wrapper .encrypted-icon{position:relative;margin-inline-start:15px;display:flex;justify-content:center;align-items:center;border-radius:var(--space-factor);color:#2b8a3e}.excalidraw .layer-ui__wrapper .encrypted-icon svg{width:1.2rem;height:1.2rem}.excalidraw .layer-ui__wrapper__github-corner{top:0;position:absolute;width:40px}:root[dir\x3dltr] .excalidraw .layer-ui__wrapper__github-corner{right:0}:root[dir\x3drtl] .excalidraw .layer-ui__wrapper__github-corner{left:0}.excalidraw .layer-ui__wrapper__footer{position:absolute;z-index:100;bottom:0;width:190px}:root[dir\x3dltr] .excalidraw .layer-ui__wrapper__footer{right:0}:root[dir\x3drtl] .excalidraw .layer-ui__wrapper__footer{left:0}.excalidraw .layer-ui__wrapper .zen-mode-transition{transition:transform .5s ease-in-out}:root[dir\x3dltr] .excalidraw .layer-ui__wrapper .zen-mode-transition.transition-left{transform:translate(-999px, 0)}:root[dir\x3dltr] .excalidraw .layer-ui__wrapper .zen-mode-transition.transition-right{transform:translate(999px, 0)}:root[dir\x3drtl] .excalidraw .layer-ui__wrapper .zen-mode-transition.transition-left{transform:translate(999px, 0)}:root[dir\x3drtl] .excalidraw .layer-ui__wrapper .zen-mode-transition.transition-right{transform:translate(-999px, 0)}:root[dir\x3dltr] .excalidraw .layer-ui__wrapper .zen-mode-transition.App-menu_bottom--transition-left{transform:translate(-92px, 0)}:root[dir\x3drtl] .excalidraw .layer-ui__wrapper .zen-mode-transition.App-menu_bottom--transition-left{transform:translate(92px, 0)}.excalidraw .layer-ui__wrapper .disable-zen-mode{height:30px;position:absolute;bottom:10px;font-size:10px;padding:10px;font-weight:500;opacity:0;visibility:hidden;transition:visibility 0s linear 0s,opacity .5s}[dir\x3dltr] .excalidraw .layer-ui__wrapper .disable-zen-mode{right:15px}[dir\x3drtl] .excalidraw .layer-ui__wrapper .disable-zen-mode{left:15px}.excalidraw .layer-ui__wrapper .disable-zen-mode--visible{opacity:1;visibility:visible;transition:visibility 0s linear 300ms,opacity .5s;transition-delay:.8s}",
""]);const z=g},7030:(B,n,g)=>{g.r(n);g.d(n,{default:()=>z});n=g(3645);g=g.n(n)()(function(D){return D[1]});g.push([B.id,".excalidraw .library-unit{align-items:center;border:1px solid var(--button-gray-2);display:flex;justify-content:center;position:relative;width:63px;height:63px}.excalidraw .library-unit__dragger{display:flex;height:100%;width:100%}.excalidraw .library-unit__dragger\x3esvg{filter:var(--appearance-filter);flex-grow:1;max-height:100%;max-width:100%}.excalidraw .library-unit__removeFromLibrary,.excalidraw .library-unit__removeFromLibrary:hover,.excalidraw .library-unit__removeFromLibrary:active{align-items:center;background:none;border:none;color:var(--icon-fill-color);display:flex;justify-content:center;margin:0;padding:0;position:absolute;right:5px;top:5px}.excalidraw .library-unit__removeFromLibrary\x3esvg{height:16px;width:16px}.excalidraw .library-unit__pulse{transform:scale(1);animation:library-unit__pulse-animation 1s ease-in infinite}.excalidraw .library-unit__adder{position:absolute;left:50%;top:50%;width:20px;height:20px;margin-left:-10px;margin-top:-10px;pointer-events:none}.excalidraw .library-unit__active{cursor:pointer}@keyframes library-unit__pulse-animation{0%{transform:scale(0.95)}50%{transform:scale(1)}100%{transform:scale(0.95)}}",
""]);const z=g},3994:(B,n,g)=>{g.r(n);g.d(n,{default:()=>z});n=g(3645);g=g.n(n)()(function(D){return D[1]});g.push([B.id,":export{isMobileQuery:(max-width: 600px), (max-height: 500px) and (max-width: 1000px);appearanceFilter:invert(93%) hue-rotate(180deg)}.excalidraw.excalidraw-modal-container{position:absolute;z-index:10}.excalidraw .Modal{position:absolute;top:0;left:0;right:0;bottom:0;display:flex;align-items:center;justify-content:center;overflow:auto;padding:calc(var(--space-factor) * 10)}.excalidraw .Modal__background{position:absolute;top:0;left:0;right:0;bottom:0;z-index:1;background-color:rgba(0,0,0,.3);backdrop-filter:blur(2px)}.excalidraw .Modal__content{position:relative;z-index:2;width:100%;max-width:var(--max-width);max-height:100%;opacity:0;transform:translateY(10px);animation:Modal__content_fade-in .1s ease-out .05s forwards;position:relative;overflow-y:auto;background:var(--island-bg-color);backdrop-filter:none;border:1px solid var(--dialog-border-color);box-shadow:0 2px 10px rgba(0,0,0,.25);border-radius:6px}@media(max-width: 600px),(max-height: 500px)and (max-width: 1000px){.excalidraw .Modal__content{max-width:100%;border:0;border-radius:0}}@keyframes Modal__content_fade-in{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.excalidraw .Modal__close{width:calc(var(--space-factor) * 7);height:calc(var(--space-factor) * 7);display:flex;align-items:center;justify-content:center}.excalidraw .Modal__close svg{height:calc(var(--space-factor) * 5)}@media(max-width: 600px),(max-height: 500px)and (max-width: 1000px){.excalidraw .Modal{padding:0}.excalidraw .Modal__content{position:absolute;top:0;left:0;right:0;bottom:0}}",
""]);const z=g},700:(B,n,g)=>{g.r(n);g.d(n,{default:()=>z});n=g(3645);g=g.n(n)()(function(D){return D[1]});g.push([B.id,":export{isMobileQuery:(max-width: 600px), (max-height: 500px) and (max-width: 1000px);appearanceFilter:invert(93%) hue-rotate(180deg)}@media(max-width: 600px),(max-height: 500px)and (max-width: 1000px){.excalidraw .PasteChartDialog .Island{display:flex;flex-direction:column}}.excalidraw .PasteChartDialog .container{display:flex;align-items:center;justify-content:space-around;flex-wrap:wrap}@media(max-width: 600px),(max-height: 500px)and (max-width: 1000px){.excalidraw .PasteChartDialog .container{flex-direction:column;justify-content:center}}.excalidraw .PasteChartDialog .ChartPreview{margin:8px;text-align:center;width:192px;height:128px;border-radius:2px;padding:1px;border:1px solid #ced4da;display:flex;align-items:center;justify-content:center;background:transparent}.excalidraw .PasteChartDialog .ChartPreview div{display:inline-block}.excalidraw .PasteChartDialog .ChartPreview svg{max-height:120px;max-width:186px}.excalidraw .PasteChartDialog .ChartPreview:hover{padding:0;border:2px solid #339af0}",
""]);const z=g},287:(B,n,g)=>{g.r(n);g.d(n,{default:()=>z});n=g(3645);g=g.n(n)()(function(D){return D[1]});g.push([B.id,".excalidraw .popover{position:fixed;z-index:10}",""]);const z=g},5657:(B,n,g)=>{g.r(n);g.d(n,{default:()=>z});n=g(3645);g=g.n(n)()(function(D){return D[1]});g.push([B.id,".excalidraw .Stack{--gap: 0;display:grid;gap:calc(var(--space-factor) * var(--gap))}.excalidraw .Stack_vertical{grid-template-columns:auto;grid-auto-flow:row;grid-auto-rows:min-content}.excalidraw .Stack_horizontal{grid-template-rows:auto;grid-auto-flow:column;grid-auto-columns:min-content}",
""]);const z=g},7392:(B,n,g)=>{g.r(n);g.d(n,{default:()=>z});n=g(3645);g=g.n(n)()(function(D){return D[1]});g.push([B.id,":export{isMobileQuery:(max-width: 600px), (max-height: 500px) and (max-width: 1000px);appearanceFilter:invert(93%) hue-rotate(180deg)}.excalidraw .Stats{position:absolute;top:64px;right:12px;font-size:12px;z-index:999}.excalidraw .Stats h3{margin:0 24px 8px 0;white-space:nowrap}.excalidraw .Stats .close{float:right;height:16px;width:16px;cursor:pointer}.excalidraw .Stats .close svg{width:100%;height:100%}.excalidraw .Stats table{width:100%}.excalidraw .Stats table th{border-bottom:1px solid var(--input-border-color);padding:4px}.excalidraw .Stats table tr td:nth-child(2){min-width:24px;text-align:right}:root[dir\x3drtl] .excalidraw .Stats{left:12px;right:initial}:root[dir\x3drtl] .excalidraw .Stats h3{margin:0 0 8px 24px}:root[dir\x3drtl] .excalidraw .Stats .close{float:left}",
""]);const z=g},6065:(B,n,g)=>{g.r(n);g.d(n,{default:()=>z});n=g(3645);g=g.n(n)()(function(D){return D[1]});g.push([B.id,":export{isMobileQuery:(max-width: 600px), (max-height: 500px) and (max-width: 1000px);appearanceFilter:invert(93%) hue-rotate(180deg)}.excalidraw .TextInput{color:var(--text-primary-color);display:inline-block;border:1.5px solid var(--button-gray-1);line-height:1;padding:.75rem;white-space:nowrap;border-radius:var(--space-factor);background-color:var(--input-bg-color)}.excalidraw .TextInput:not(:focus):hover{background-color:var(--input-hover-bg-color)}.excalidraw .TextInput:focus{outline:none;box-shadow:0 0 0 2px var(--focus-highlight-color)}",
""]);const z=g},83:(B,n,g)=>{g.r(n);g.d(n,{default:()=>z});n=g(3645);g=g.n(n)()(function(D){return D[1]});g.push([B.id,":export{isMobileQuery:(max-width: 600px), (max-height: 500px) and (max-width: 1000px);appearanceFilter:invert(93%) hue-rotate(180deg)}.excalidraw .Toast{animation:fade-in .5s;background-color:var(--button-gray-1);border-radius:4px;bottom:10px;box-sizing:border-box;cursor:default;left:50%;margin-left:-150px;padding:4px 0;position:absolute;text-align:center;width:300px;z-index:999999}.excalidraw .Toast__message{color:var(--popup-text-color);white-space:pre-wrap}@keyframes fade-in{from{opacity:0}to{opacity:1}}",
""]);const z=g},1554:(B,n,g)=>{g.r(n);g.d(n,{default:()=>z});n=g(3645);g=g.n(n)()(function(D){return D[1]});g.push([B.id,":export{isMobileQuery:(max-width: 600px), (max-height: 500px) and (max-width: 1000px);appearanceFilter:invert(93%) hue-rotate(180deg)}.excalidraw .ToolIcon{display:inline-flex;align-items:center;position:relative;font-family:Cascadia;cursor:pointer;background-color:var(--button-gray-1);-webkit-tap-highlight-color:transparent;border-radius:var(--space-factor)}.excalidraw .ToolIcon__icon{width:2.5rem;height:2.5rem;color:var(--icon-fill-color);display:flex;justify-content:center;align-items:center;border-radius:var(--space-factor)}.excalidraw .ToolIcon__icon svg{position:relative;height:1em;fill:var(--icon-fill-color);color:var(--icon-fill-color)}.excalidraw .ToolIcon__icon+.ToolIcon__label{margin-inline-start:0}.excalidraw .ToolIcon__label{color:var(--icon-fill-color);font-family:var(--ui-font);margin:0 .8em;text-overflow:ellipsis}.excalidraw .ToolIcon_size_s .ToolIcon__icon{width:1.4rem;height:1.4rem;font-size:.8em}.excalidraw .excalidraw .ToolIcon_type_button,.excalidraw .Modal .ToolIcon_type_button,.excalidraw .ToolIcon_type_button{padding:0;border:none;margin:0;font-size:inherit}.excalidraw .excalidraw .ToolIcon_type_button:hover,.excalidraw .Modal .ToolIcon_type_button:hover,.excalidraw .ToolIcon_type_button:hover{background-color:var(--button-gray-1)}.excalidraw .excalidraw .ToolIcon_type_button:active,.excalidraw .Modal .ToolIcon_type_button:active,.excalidraw .ToolIcon_type_button:active{background-color:var(--button-gray-2)}.excalidraw .excalidraw .ToolIcon_type_button:focus,.excalidraw .Modal .ToolIcon_type_button:focus,.excalidraw .ToolIcon_type_button:focus{box-shadow:0 0 0 2px var(--focus-highlight-color)}.excalidraw .excalidraw .ToolIcon_type_button.ToolIcon--selected,.excalidraw .Modal .ToolIcon_type_button.ToolIcon--selected,.excalidraw .ToolIcon_type_button.ToolIcon--selected{background-color:var(--button-gray-2)}.excalidraw .excalidraw .ToolIcon_type_button.ToolIcon--selected:active,.excalidraw .Modal .ToolIcon_type_button.ToolIcon--selected:active,.excalidraw .ToolIcon_type_button.ToolIcon--selected:active{background-color:var(--button-gray-3)}.excalidraw .excalidraw .ToolIcon_type_button--show,.excalidraw .Modal .ToolIcon_type_button--show,.excalidraw .ToolIcon_type_button--show{visibility:visible}.excalidraw .excalidraw .ToolIcon_type_button--hide,.excalidraw .Modal .ToolIcon_type_button--hide,.excalidraw .ToolIcon_type_button--hide{visibility:hidden}.excalidraw .ToolIcon_type_radio,.excalidraw .ToolIcon_type_checkbox{position:absolute;opacity:0;pointer-events:none}.excalidraw .ToolIcon_type_radio:not(.ToolIcon_toggle_opaque):checked+.ToolIcon__icon,.excalidraw .ToolIcon_type_checkbox:not(.ToolIcon_toggle_opaque):checked+.ToolIcon__icon{background-color:var(--button-gray-2)}.excalidraw .ToolIcon_type_radio:focus+.ToolIcon__icon,.excalidraw .ToolIcon_type_checkbox:focus+.ToolIcon__icon{box-shadow:0 0 0 2px var(--focus-highlight-color)}.excalidraw .ToolIcon_type_radio:active+.ToolIcon__icon,.excalidraw .ToolIcon_type_checkbox:active+.ToolIcon__icon{background-color:var(--button-gray-3)}.excalidraw .ToolIcon_type_floating{background-color:transparent}.excalidraw .ToolIcon_type_floating:hover{background-color:transparent}.excalidraw .ToolIcon_type_floating:active{background-color:transparent}.excalidraw .ToolIcon_type_floating:focus{box-shadow:none}.excalidraw .ToolIcon_type_floating .ToolIcon__icon{width:2rem;height:2em}.excalidraw .ToolIcon.ToolIcon__lock.ToolIcon_type_floating{margin-left:.1rem}.excalidraw .ToolIcon__keybinding{position:absolute;bottom:2px;right:3px;font-size:.5em;color:var(--keybinding-color);font-family:var(--ui-font);user-select:none}@media(max-width: 425px){.excalidraw .Shape .ToolIcon__icon{width:2rem;height:2rem}.excalidraw .Shape .ToolIcon__icon svg{height:.8em}}@media(max-width: 760px){.excalidraw .ToolIcon.ToolIcon__lock{display:inline-block;position:absolute;top:60px;right:-8px;margin-left:0;border-radius:20px 0 0 20px;z-index:1;background-color:var(--button-gray-1)}.excalidraw .ToolIcon.ToolIcon__lock:hover{background-color:var(--button-gray-1)}.excalidraw .ToolIcon.ToolIcon__lock:active{background-color:var(--button-gray-2)}.excalidraw .ToolIcon.ToolIcon__lock .ToolIcon__icon{border-radius:inherit}.excalidraw .ToolIcon.ToolIcon__lock svg{position:static}}.excalidraw .TooltipIcon{width:.9em;height:.9em;margin-left:5px;margin-top:1px}@media(max-width: 600px),(max-height: 500px)and (max-width: 1000px){.excalidraw .TooltipIcon{display:none}}:root[dir\x3dltr] .excalidraw .unlocked-icon{left:2px}:root[dir\x3drtl] .excalidraw .unlocked-icon{right:2px}",
""]);const z=g},1970:(B,n,g)=>{g.r(n);g.d(n,{default:()=>z});n=g(3645);g=g.n(n)()(function(D){return D[1]});g.push([B.id,':export{isMobileQuery:(max-width: 600px), (max-height: 500px) and (max-width: 1000px);appearanceFilter:invert(93%) hue-rotate(180deg)}.excalidraw .Tooltip{position:relative}.excalidraw .Tooltip__label{--arrow-size: 4px;visibility:hidden;background:#000;color:#fff;text-align:center;border-radius:6px;padding:8px;position:absolute;z-index:10;font-size:13px;line-height:1.5;font-weight:500;left:calc(50% + var(--arrow-size) / 2 - 1px);transform:translateX(-50%);word-wrap:break-word}.excalidraw .Tooltip__label::after{content:"";border:var(--arrow-size) solid transparent;position:absolute;left:calc(50% - var(--arrow-size))}.excalidraw .Tooltip__label--above{bottom:calc(100% + var(--arrow-size) + 3px)}.excalidraw .Tooltip__label--above::after{border-top-color:#000;top:100%}.excalidraw .Tooltip__label--below{top:calc(100% + var(--arrow-size) + 3px)}.excalidraw .Tooltip__label--below::after{border-bottom-color:#000;bottom:100%}.excalidraw .Tooltip:hover .Tooltip__label{visibility:visible}.excalidraw .Tooltip__label:hover{visibility:visible}',
""]);const z=g},961:(B,n,g)=>{g.r(n);g.d(n,{default:()=>z});n=g(3645);g=g.n(n)()(function(D){return D[1]});g.push([B.id,".excalidraw .UserList{pointer-events:none;padding:var(--space-factor) 40px var(--space-factor) var(--space-factor);display:flex;flex-wrap:wrap;justify-content:flex-end}.excalidraw .UserList\x3e*{pointer-events:all;margin:0 0 var(--space-factor) var(--space-factor)}.excalidraw .UserList_mobile{padding:0;justify-content:normal}.excalidraw .UserList_mobile\x3e*{margin:0 var(--space-factor) var(--space-factor) 0}",
""]);const z=g},4878:(B,n,g)=>{g.r(n);g.d(n,{default:()=>z});n=g(3645);g=g.n(n)()(function(D){return D[1]});g.push([B.id,".visually-hidden{position:absolute !important;height:1px;width:1px;overflow:hidden;clip:rect(1px, 1px, 1px, 1px);white-space:nowrap}.LoadingMessage{position:absolute;top:0;right:0;bottom:0;left:0;z-index:999;display:flex;align-items:center;justify-content:center;pointer-events:none}.LoadingMessage span{background-color:var(--button-gray-1);border-radius:5px;padding:.8em 1.2em;color:var(--popup-text-color);font-size:1.3em}",
""]);const z=g},1988:(B,n,g)=>{g.r(n);g.d(n,{default:()=>z});n=g(3645);g=g.n(n)()(function(D){return D[1]});g.push([B.id,':export{isMobileQuery:(max-width: 600px), (max-height: 500px) and (max-width: 1000px);appearanceFilter:invert(93%) hue-rotate(180deg)}:export{isMobileQuery:(max-width: 600px), (max-height: 500px) and (max-width: 1000px);appearanceFilter:invert(93%) hue-rotate(180deg)}.excalidraw{--appearance-filter: none;--button-destructive-bg-color: #ffe3e3;--button-destructive-color: #c92a2a;--button-gray-1: #e9ecef;--button-gray-2: #ced4da;--button-gray-3: #adb5bd;--button-special-active-bg-color: #ebfbee;--dialog-border-color: #868e96;--dropdown-icon: url(\'data:image/svg+xml,\x3csvg xmlns\x3d"http://www.w3.org/2000/svg" width\x3d"292.4" height\x3d"292.4" viewBox\x3d"0 0 292 292"\x3e\x3cpath d\x3d"M287 197L159 69c-4-3-8-5-13-5s-9 2-13 5L5 197c-3 4-5 8-5 13s2 9 5 13c4 4 8 5 13 5h256c5 0 9-1 13-5s5-8 5-13-1-9-5-13z"/\x3e\x3c/svg\x3e\');--focus-highlight-color: #a5d8ff;--icon-fill-color: #000000;--icon-green-fill-color: #2b8a3e;--input-bg-color: #ffffff;--input-border-color: #dee2e6;--input-hover-bg-color: #f1f3f5;--input-label-color: #495057;--island-bg-color: rgba(255, 255, 255, 0.9);--keybinding-color: #adb5bd;--link-color: #1c7ed6;--overlay-bg-color: rgba(255, 255, 255, 0.88);--popup-bg-color: #ffffff;--popup-secondary-bg-color: #f1f3f5;--popup-text-color: #000000;--popup-text-inverted-color: #ffffff;--sab: env(safe-area-inset-bottom);--sal: env(safe-area-inset-left);--sar: env(safe-area-inset-right);--sat: env(safe-area-inset-top);--select-highlight-color: #339af0;--shadow-island: 0 1px 5px rgba(0, 0, 0, 0.15);--space-factor: 0.25rem;--text-primary-color: #343a40}.excalidraw.Appearance_dark{background:#000}.excalidraw.Appearance_dark.Appearance_dark-background-none{background:none}.excalidraw.Appearance_dark{--appearance-filter: invert(93%) hue-rotate(180deg);--button-destructive-bg-color: #5a0000;--button-destructive-color: #ffa8a8;--button-gray-1: #363636;--button-gray-2: #272727;--button-gray-3: #222;--button-special-active-bg-color: #204624;--dialog-border-color: #212529;--dropdown-icon: url(\'data:image/svg+xml,\x3csvg xmlns\x3d"http://www.w3.org/2000/svg" width\x3d"292.4" height\x3d"292.4" viewBox\x3d"0 0 292 292"\x3e\x3cpath fill\x3d"%23ced4da" d\x3d"M287 197L159 69c-4-3-8-5-13-5s-9 2-13 5L5 197c-3 4-5 8-5 13s2 9 5 13c4 4 8 5 13 5h256c5 0 9-1 13-5s5-8 5-13-1-9-5-13z"/\x3e\x3c/svg\x3e\');--focus-highlight-color: #228be6;--icon-fill-color: #ced4da;--icon-green-fill-color: #69db7c;--input-bg-color: #121212;--input-border-color: #2e2e2e;--input-hover-bg-color: #181818;--input-label-color: #e9ecef;--island-bg-color: #1e1e1e;--keybinding-color: #868e96;--overlay-bg-color: rgba(52, 58, 64, 0.12);--popup-bg-color: #2c2c2c;--popup-secondary-bg-color: #222;--popup-text-color: #ced4da;--popup-text-inverted-color: #2c2c2c;--select-highlight-color: #4dabf7;--shadow-island: 0 1px 5px rgba(0, 0, 0, 0.3);--text-primary-color: #ced4da}:root{--zIndex-canvas: 1;--zIndex-wysiwyg: 2;--zIndex-layerUI: 3}.excalidraw{position:relative;overflow:hidden;color:var(--text-primary-color);display:flex;top:0;bottom:0;left:0;right:0}.excalidraw a{font-weight:500;text-decoration:none;color:var(--link-color)}.excalidraw a:hover{text-decoration:underline}.excalidraw canvas{touch-action:none;user-select:none;image-rendering:pixelated;image-rendering:-moz-crisp-edges;z-index:var(--zIndex-canvas)}.excalidraw.Appearance_dark canvas{filter:var(--appearance-filter)}.excalidraw .FixedSideContainer{padding-top:var(--sat, 0);padding-right:var(--sar, 0);padding-bottom:var(--sab, 0);padding-left:var(--sal, 0)}.excalidraw .panelRow{display:flex;justify-content:space-between}.excalidraw .panelColumn{display:flex;flex-direction:column}.excalidraw .panelColumn h3,.excalidraw .panelColumn legend,.excalidraw .panelColumn .control-label{margin-top:.333rem;margin-bottom:.333rem;font-size:.75rem;color:var(--text-primary-color);font-weight:bold;display:block}.excalidraw .panelColumn .control-label input{display:block;width:100%}.excalidraw .panelColumn h3:first-child,.excalidraw .panelColumn legend:first-child,.excalidraw .panelColumn .control-label:first-child{margin-top:0}.excalidraw .panelColumn legend{padding:0}.excalidraw .panelColumn .iconSelectList{flex-wrap:wrap;position:relative}.excalidraw .panelColumn .buttonList{flex-wrap:wrap}.excalidraw .panelColumn .buttonList label{margin-right:.25rem;font-size:.75rem;display:inline-block}.excalidraw .panelColumn .buttonList input[type\x3dradio],.excalidraw .panelColumn .buttonList input[type\x3dbutton]{opacity:0;position:absolute;pointer-events:none}.excalidraw .panelColumn .buttonList .iconRow{margin-top:8px}.excalidraw .panelColumn .buttonList .ToolIcon{margin:0;margin-inline-end:8px}.excalidraw .panelColumn .buttonList .ToolIcon:focus{outline:transparent;box-shadow:0 0 0 2px var(--focus-highlight-color)}.excalidraw .panelColumn .buttonList .ToolIcon:hover{background-color:var(--button-gray-2)}.excalidraw .panelColumn .buttonList .ToolIcon:active{background-color:var(--button-gray-3)}.excalidraw .panelColumn .buttonList .ToolIcon:disabled{cursor:not-allowed}.excalidraw .panelColumn .buttonList .ToolIcon__icon{width:28px;height:28px}.excalidraw .panelColumn fieldset{margin:0;margin-top:.333rem;padding:0;border:none}.excalidraw .divider{width:1px;background-color:#e9ecef;margin:1px}.excalidraw .buttonList label:focus-within,.excalidraw input:focus{outline:transparent;box-shadow:0 0 0 2px var(--focus-highlight-color)}.excalidraw button,.excalidraw .buttonList label{user-select:none;background-color:var(--button-gray-1);border:0;border-radius:4px;margin:.125rem 0;padding:.25rem;white-space:nowrap;cursor:pointer}.excalidraw button:focus,.excalidraw .buttonList label:focus{outline:transparent;box-shadow:0 0 0 2px var(--focus-highlight-color)}.excalidraw button:hover,.excalidraw .buttonList label:hover{background-color:var(--button-gray-2)}.excalidraw button:active,.excalidraw .buttonList label:active{background-color:var(--button-gray-3)}.excalidraw button:disabled,.excalidraw .buttonList label:disabled{cursor:not-allowed}.excalidraw .active,.excalidraw .buttonList label.active{background-color:var(--button-gray-2)}.excalidraw .active:hover,.excalidraw .buttonList label.active:hover{background-color:var(--button-gray-2)}.excalidraw .active:active,.excalidraw .buttonList label.active:active{background-color:var(--button-gray-3)}.excalidraw .buttonList.buttonListIcon label{display:inline-flex;justify-content:center;align-items:center}.excalidraw .buttonList.buttonListIcon label svg{width:36px;height:18px;opacity:.6}.excalidraw .buttonList.buttonListIcon label.active svg{opacity:1}.excalidraw .App-top-bar{z-index:var(--zIndex-layerUI);display:flex;flex-direction:column;align-items:center}.excalidraw .App-bottom-bar{position:absolute;top:0;bottom:0;left:0;right:0;--bar-padding: calc(4 * var(--space-factor));padding-top:max(var(--bar-padding), var(--sat,0));padding-right:var(--sar, 0);padding-bottom:var(--sab, 0);padding-left:var(--sal, 0);z-index:4;display:flex;align-items:flex-end;pointer-events:none}.excalidraw .App-bottom-bar\x3e.Island{width:100%;max-width:100%;min-width:100%;box-sizing:border-box;max-height:100%;display:flex;flex-direction:column;pointer-events:initial}.excalidraw .App-bottom-bar\x3e.Island .panelColumn{padding:8px 8px 0 8px}.excalidraw .App-toolbar{width:100%;box-sizing:border-box}.excalidraw .App-toolbar-content{display:flex;align-items:center;justify-content:space-between;padding:8px}.excalidraw .App-mobile-menu{width:100%;overflow-x:visible;overflow-y:auto;box-sizing:border-box;margin-bottom:var(--bar-padding)}.excalidraw .App-menu{display:grid;color:var(--icon-fill-color)}.excalidraw .App-menu_top{grid-template-columns:1fr auto 1fr;grid-gap:4px;align-items:flex-start;cursor:default;pointer-events:none !important}.excalidraw .layer-ui__wrapper:not(.disable-pointerEvents) .App-menu_top\x3e*{pointer-events:all}.excalidraw .App-menu_top\x3e*:first-child{justify-self:flex-start}.excalidraw .App-menu_top\x3e*:last-child{justify-self:flex-end}.excalidraw .App-menu_bottom{position:absolute;bottom:0;grid-template-columns:1fr auto 1fr;grid-gap:4px;align-items:flex-start;cursor:default;pointer-events:none !important;z-index:100}:root[dir\x3dltr] .excalidraw .App-menu_bottom{left:.25rem}:root[dir\x3drtl] .excalidraw .App-menu_bottom{right:.25rem}.excalidraw .App-menu_bottom--transition-left section{width:185px}.excalidraw .App-menu_bottom section{display:flex}.excalidraw .layer-ui__wrapper:not(.disable-pointerEvents) .App-menu_bottom\x3e*{pointer-events:all}.excalidraw .App-menu_bottom\x3e*:first-child{justify-self:flex-start}.excalidraw .App-menu_bottom\x3e*:last-child{justify-self:flex-end}.excalidraw .App-menu_left{grid-template-rows:1fr auto 1fr;height:100%}.excalidraw .App-menu_right{grid-template-rows:1fr;height:100%}.excalidraw .App-menu__left{overflow-y:auto}.excalidraw .dropdown-select{height:1.5rem;padding:0;padding-inline-start:.5rem;padding-inline-end:1.5rem;color:var(--icon-fill-color);background-color:var(--button-gray-1);border-radius:var(--space-factor);border:1px solid var(--button-gray-2);font-size:.8rem;outline:none;appearance:none;background-image:var(--dropdown-icon);background-repeat:no-repeat;background-position:right .7rem top 50%,0 0;background-size:.65em auto,100%}:root[dir\x3drtl] .excalidraw .dropdown-select{background-position:left .7rem top 50%,0 0}.excalidraw .dropdown-select:focus{box-shadow:0 0 0 2px var(--focus-highlight-color)}.excalidraw .dropdown-select:hover{background-color:var(--button-gray-2)}.excalidraw .dropdown-select:active{background-color:var(--button-gray-2)}.excalidraw .dropdown-select.dropdown-select--floating{position:absolute;margin:.5em}.excalidraw .dropdown-select__language.dropdown-select--floating{position:absolute;bottom:10px}:root[dir\x3dltr] .excalidraw .dropdown-select__language.dropdown-select--floating{right:44px}:root[dir\x3drtl] .excalidraw .dropdown-select__language.dropdown-select--floating{left:44px}.excalidraw .zIndexButton{margin:0;margin-inline-end:8px;padding:5px;display:inline-flex;align-items:center;justify-content:center}.excalidraw .zIndexButton svg{width:18px;height:18px}.excalidraw .scroll-back-to-content{color:var(--popup-text-color);position:absolute;left:50%;bottom:30px;transform:translateX(-50%);padding:10px 20px}.excalidraw .help-icon{position:absolute;cursor:pointer;fill:#868e96;bottom:14px;width:1.5rem}:root[dir\x3dltr] .excalidraw .help-icon{right:14px}:root[dir\x3drtl] .excalidraw .help-icon{left:14px}@media(max-width: 600px),(max-height: 500px)and (max-width: 1000px){.excalidraw aside{display:none}.excalidraw .scroll-back-to-content{bottom:calc(80px + var(--sab, 0));z-index:-1}}:root[dir\x3drtl] .excalidraw .rtl-mirror{transform:scaleX(-1)}.excalidraw .github-corner{position:absolute;top:0;z-index:2}:root[dir\x3dltr] .excalidraw .github-corner{right:0}:root[dir\x3drtl] .excalidraw .github-corner{left:0}.excalidraw .zen-mode-visibility{visibility:visible;opacity:1;height:auto;width:auto;transition:opacity .5s}.excalidraw .zen-mode-visibility.zen-mode-visibility--hidden{visibility:hidden;opacity:0;height:0;width:0;transition:opacity .5s}.excalidraw .disable-pointerEvents{pointer-events:none !important}.excalidraw.excalidraw--view-mode .App-menu{display:flex;justify-content:space-between}@media print{.excalidraw .App-bottom-bar,.excalidraw .FixedSideContainer,.excalidraw .layer-ui__wrapper{display:none}}.ErrorSplash.excalidraw{min-height:100vh;padding:20px 0;overflow:auto;display:flex;align-items:center;justify-content:center;user-select:text}.ErrorSplash.excalidraw .ErrorSplash-messageContainer{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px;background-color:#ffe3e3;border:3px solid #c92a2a}.ErrorSplash.excalidraw .ErrorSplash-paragraph{margin:15px 0;max-width:600px}.ErrorSplash.excalidraw .ErrorSplash-paragraph.align-center{text-align:center}.ErrorSplash.excalidraw .bigger,.ErrorSplash.excalidraw .bigger button{font-size:1.1em}.ErrorSplash.excalidraw .smaller,.ErrorSplash.excalidraw .smaller button{font-size:.9em}.ErrorSplash.excalidraw .ErrorSplash-details{display:flex;flex-direction:column;align-items:flex-start}.ErrorSplash.excalidraw .ErrorSplash-details textarea{width:100%;margin:10px 0;font-family:"Cascadia";font-size:.8em}',
""]);const z=g},3245:(B,n,g)=>{g.r(n);g.d(n,{default:()=>z});n=g(3645);g=g.n(n)()(function(D){return D[1]});g.push([B.id,"",""]);g.locals={isMobileQuery:"(max-width: 600px), (max-height: 500px) and (max-width: 1000px)",appearanceFilter:"invert(93%) hue-rotate(180deg)"};const z=g},3645:B=>{B.exports=function(n){var g=[];return g.toString=function(){return this.map(function(z){var D=n(z);return z[2]?"@media ".concat(z[2]," {").concat(D,"}"):D}).join("")},g.i=function(z,D,J){"string"==typeof z&&(z=[[null,
z,""]]);var O={};if(J)for(var S=0;S<this.length;S++){var H=this[S][0];null!=H&&(O[H]=!0)}for(S=0;S<z.length;S++)H=[].concat(z[S]),J&&O[H[0]]||(D&&(H[2]?H[2]="".concat(D," and ").concat(H[2]):H[2]=D),g.push(H))},g}},1667:B=>{B.exports=function(n,g){return g||(g={}),"string"!=typeof(n=n&&n.__esModule?n.default:n)?n:(/^['"].*['"]$/.test(n)&&(n=n.slice(1,-1)),g.hash&&(n+=g.hash),/["'() \t\n]/.test(n)||g.needQuotes?'"'.concat(n.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):n)}},9638:(B,n,g)=>{g.d(n,{Z:()=>
z});const z=g.p+"excalidraw-assets/Cascadia.woff2"},7464:(B,n,g)=>{g.d(n,{Z:()=>z});const z=g.p+"excalidraw-assets/Virgil.woff2"},8288:(B,n,g)=>{g.d(n,{iC:()=>D,f:()=>J,qx:()=>O,Iw:()=>S,$e:()=>H,wZ:()=>G,ay:()=>E,oc:()=>F,Oh:()=>ia,Ks:()=>z,Vi:()=>la,$C:()=>X,ut:()=>ta,_D:()=>ma,n5:()=>ja,rk:()=>oa,Hg:()=>na,hs:()=>ra,eQ:()=>K,k:()=>Q,LO:()=>ha,I:()=>da,Gj:()=>pa,nM:()=>ba,Lg:()=>ea,HM:()=>Ba,V4:()=>Ua,EH:()=>cb,Gi:()=>hb});var z;B=g(2189);g=g.n(B);var D="Excalidraw",J=10,O=8,S=5,H=1,G=30,E=Math.PI/
12,F={TEXT:"text",CROSSHAIR:"crosshair",GRABBING:"grabbing",POINTER:"pointer",MOVE:"move",AUTO:""},ia={MAIN:0,WHEEL:1,SECONDARY:2,TOUCH:-1};!function(Ya){Ya.COPY="copy";Ya.PASTE="paste";Ya.CUT="cut";Ya.KEYDOWN="keydown";Ya.KEYUP="keyup";Ya.MOUSE_MOVE="mousemove";Ya.RESIZE="resize";Ya.UNLOAD="unload";Ya.BLUR="blur";Ya.DRAG_OVER="dragover";Ya.DROP="drop";Ya.GESTURE_END="gestureend";Ya.BEFORE_UNLOAD="beforeunload";Ya.GESTURE_START="gesturestart";Ya.GESTURE_CHANGE="gesturechange";Ya.POINTER_MOVE="pointermove";
Ya.POINTER_UP="pointerup";Ya.STATE_CHANGE="statechange";Ya.WHEEL="wheel";Ya.TOUCH_START="touchstart";Ya.TOUCH_END="touchend";Ya.HASHCHANGE="hashchange";Ya.VISIBILITY_CHANGE="visibilitychange";Ya.SCROLL="scroll"}(z||(z={}));var la={TEST:"test",DEVELOPMENT:"development"},X={SHAPE_ACTIONS_MENU:"App-menu__left"},ta={1:"Virgil",2:"Helvetica",3:"Cascadia"},ma="Segoe UI Emoji",ja=20,oa=1,na="left",ra="top",K="{version}",Q=20,ha={excalidraw:"application/vnd.excalidraw+json",excalidrawlib:"application/vnd.excalidrawlib+json"},
da={LOCAL_STORAGE_LIBRARY:"excalidraw-library"},pa=300,ba=500,ea=5E3,Ba=100,Ua=.1,cb={VIEW:"viewMode",ZEN:"zenMode",GRID:"gridMode"},hb=g().appearanceFilter},3956:(B,n,g)=>{function z(d,h){return Math.pow(d[0]-h[0],2)+Math.pow(d[1]-h[1],2)}function D(d,h,m){return[d[0]+(h[0]-d[0])*m,d[1]+(h[1]-d[1])*m]}function J(d,h,m,A){A=A||[];{var P=d[h+0],W=d[h+1];var va=d[h+2];const Ga=d[h+3];var qa=3*W[0]-2*P[0]-Ga[0];qa*=qa;W=3*W[1]-2*P[1]-Ga[1];W*=W;let gb=3*va[0]-2*Ga[0]-P[0];gb*=gb;P=3*va[1]-2*Ga[1]-P[1];
va=(P*=P,qa<gb&&(qa=gb),W<P&&(W=P),qa+W)}va<m?(m=d[h+0],A.length?1<(Aa=A[A.length-1],La=m,Math.sqrt(z(Aa,La)))&&A.push(m):A.push(m),A.push(d[h+3])):(Aa=d[h+0],qa=d[h+1],La=d[h+2],d=d[h+3],h=D(Aa,qa,.5),W=D(qa,La,.5),La=D(La,d,.5),qa=D(h,W,.5),W=D(W,La,.5),P=D(qa,W,.5),J([Aa,h,qa,P],0,m,A),J([P,W,La,d],0,m,A));var Aa,La;return A}function O(d,h){return S(d,0,d.length,h)}function S(d,h,m,A,P){P=P||[];const W=d[h],va=d[m-1];let qa=0,Aa=1;for(let kb=h+1;kb<m-1;++kb){var La=d[kb];var Ga=W,gb=va,ib=z(Ga,
gb);0===ib?La=z(La,Ga):(ib=((La[0]-Ga[0])*(gb[0]-Ga[0])+(La[1]-Ga[1])*(gb[1]-Ga[1]))/ib,La=(ib=Math.max(0,Math.min(1,ib)),z(La,D(Ga,gb,ib))));La>qa&&(qa=La,Aa=kb)}return Math.sqrt(qa)>A?(S(d,h,Aa+1,A,P),S(d,Aa,m,A,P)):(P.length||P.push(W),P.push(va)),P}function H(d,h=.15,m){const A=[],P=(d.length-1)/3;for(let W=0;W<P;W++)J(d,3*W,h,A);return m&&0<m?S(A,0,A.length,m):A}function G(d,h,m){if(d&&d.length){const [A,P]=h;h=Math.PI/180*m;const W=Math.cos(h),va=Math.sin(h);d.forEach(qa=>{const [Aa,La]=qa;
qa[0]=(Aa-A)*W-(La-P)*va+A;qa[1]=(Aa-A)*va+(La-P)*W+P})}}function E(d){const h=d[0];d=d[1];return Math.sqrt(Math.pow(h[0]-d[0],2)+Math.pow(h[1]-d[1],2))}function F(d,h,m,A){const P=h[1]-d[1];h=d[0]-h[0];d=P*d[0]+h*d[1];const W=A[1]-m[1];A=m[0]-A[0];m=W*m[0]+A*m[1];const va=P*A-W*h;return va?[(A*d-h*m)/va,(P*m-W*d)/va]:null}function ia(d,h,m){const A=d.length;if(3>A)return!1;const P=[Number.MAX_SAFE_INTEGER,m];h=[h,m];m=0;for(let W=0;W<A;W++){const va=d[W],qa=d[(W+1)%A];if(ta(va,qa,h,P)){if(0===X(va,
h,qa))return la(va,h,qa);m++}}return 1==m%2}function la(d,h,m){return h[0]<=Math.max(d[0],m[0])&&h[0]>=Math.min(d[0],m[0])&&h[1]<=Math.max(d[1],m[1])&&h[1]>=Math.min(d[1],m[1])}function X(d,h,m){d=(h[1]-d[1])*(m[0]-h[0])-(h[0]-d[0])*(m[1]-h[1]);return 0===d?0:0<d?1:2}function ta(d,h,m,A){const P=X(d,h,m),W=X(d,h,A),va=X(m,A,d),qa=X(m,A,h);return P!==W&&va!==qa||!(0!==P||!la(d,m,h))||!(0!==W||!la(d,A,h))||!(0!==va||!la(m,d,A))||!(0!==qa||!la(m,h,A))}function ma(d,h){const m=[0,0],A=Math.round(h.hachureAngle+
90);A&&G(d,m,A);h=function(P,W){var va=[...P];va[0].join(",")!==va[va.length-1].join(",")&&va.push([va[0][0],va[0][1]]);P=[];if(va&&2<va.length){let Aa=W.hachureGap;0>Aa&&(Aa=4*W.strokeWidth);Aa=Math.max(Aa,.1);W=[];for(var qa=0;qa<va.length-1;qa++){const gb=va[qa],ib=va[qa+1];if(gb[1]!==ib[1]){const kb=Math.min(gb[1],ib[1]);W.push({ymin:kb,ymax:Math.max(gb[1],ib[1]),x:kb===gb[1]?gb[0]:ib[0],islope:(ib[0]-gb[0])/(ib[1]-gb[1])})}}if(W.sort((gb,ib)=>gb.ymin<ib.ymin?-1:gb.ymin>ib.ymin?1:gb.x<ib.x?-1:
gb.x>ib.x?1:gb.ymax===ib.ymax?0:(gb.ymax-ib.ymax)/Math.abs(gb.ymax-ib.ymax)),!W.length)return P;let La=[],Ga=W[0].ymin;for(;La.length||W.length;){if(W.length){va=-1;for(qa=0;qa<W.length&&!(W[qa].ymin>Ga);qa++)va=qa;W.splice(0,va+1).forEach(gb=>{La.push({s:Ga,edge:gb})})}if(La=La.filter(gb=>!(gb.edge.ymax<=Ga)),La.sort((gb,ib)=>gb.edge.x===ib.edge.x?0:(gb.edge.x-ib.edge.x)/Math.abs(gb.edge.x-ib.edge.x)),1<La.length)for(va=0;va<La.length;va+=2){qa=va+1;if(qa>=La.length)break;P.push([[Math.round(La[va].edge.x),
Ga],[Math.round(La[qa].edge.x),Ga]])}Ga+=Aa;La.forEach(gb=>{gb.edge.x+=Aa*gb.edge.islope})}}return P}(d,h);return A&&(G(d,m,-A),function(P,W,va){const qa=[];P.forEach(Aa=>qa.push(...Aa));G(qa,W,va)}(h,m,-A)),h}function ja(d){const h=[];a:{var m=d;for(var A=[];""!==m;){if(!m.match(/^([ \t\r\n,]+)/))if(m.match(/^([aAcChHlLmMqQsStTvVzZ])/))A[A.length]={type:0,text:RegExp.$1};else{if(!m.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/)){m=[];break a}A[A.length]={type:1,text:`${parseFloat(RegExp.$1)}`}}m=
m.substr(RegExp.$1.length)}m=(A[A.length]={type:2,text:""},A)}A="BOD";let P=0;for(var W=m[P];2!==W.type;){let va=0;const qa=[];if("BOD"===A){if("M"!==W.text&&"m"!==W.text)return ja("M0,0"+d);P++;va=Ph[W.text];A=W.text}else 1===W.type?va=Ph[A]:(P++,va=Ph[W.text],A=W.text);if(!(P+va<m.length))throw Error("Path data ended short");for(W=P;W<P+va;W++){const Aa=m[W];if(1!==Aa.type)throw Error("Param not a number: "+A+","+Aa.text);qa[qa.length]=+Aa.text}if("number"!=typeof Ph[A])throw Error("Bad segment: "+
A);h.push({key:A,data:qa});P+=va;W=m[P];"M"===A&&(A="L");"m"===A&&(A="l")}return h}function oa(d){let h=0,m=0,A=0,P=0;const W=[];for(const {key:va,data:qa}of d)switch(va){case "M":W.push({key:"M",data:[...qa]});[h,m]=qa;[A,P]=qa;break;case "m":h+=qa[0];m+=qa[1];W.push({key:"M",data:[h,m]});A=h;P=m;break;case "L":W.push({key:"L",data:[...qa]});[h,m]=qa;break;case "l":h+=qa[0];m+=qa[1];W.push({key:"L",data:[h,m]});break;case "C":W.push({key:"C",data:[...qa]});h=qa[4];m=qa[5];break;case "c":d=qa.map((Aa,
La)=>La%2?Aa+m:Aa+h);W.push({key:"C",data:d});h=d[4];m=d[5];break;case "Q":W.push({key:"Q",data:[...qa]});h=qa[2];m=qa[3];break;case "q":d=qa.map((Aa,La)=>La%2?Aa+m:Aa+h);W.push({key:"Q",data:d});h=d[2];m=d[3];break;case "A":W.push({key:"A",data:[...qa]});h=qa[5];m=qa[6];break;case "a":h+=qa[5];m+=qa[6];W.push({key:"A",data:[qa[0],qa[1],qa[2],qa[3],qa[4],h,m]});break;case "H":W.push({key:"H",data:[...qa]});h=qa[0];break;case "h":h+=qa[0];W.push({key:"H",data:[h]});break;case "V":W.push({key:"V",data:[...qa]});
m=qa[0];break;case "v":m+=qa[0];W.push({key:"V",data:[m]});break;case "S":W.push({key:"S",data:[...qa]});h=qa[2];m=qa[3];break;case "s":d=qa.map((Aa,La)=>La%2?Aa+m:Aa+h);W.push({key:"S",data:d});h=d[2];m=d[3];break;case "T":W.push({key:"T",data:[...qa]});h=qa[0];m=qa[1];break;case "t":h+=qa[0];m+=qa[1];W.push({key:"T",data:[h,m]});break;case "Z":case "z":W.push({key:"Z",data:[]}),h=A,m=P}return W}function na(d){const h=[];var m="";let A=0,P=0,W=0,va=0,qa=0,Aa=0;for(const {key:Ga,data:gb}of d){switch(Ga){case "M":h.push({key:"M",
data:[...gb]});[A,P]=gb;[W,va]=gb;break;case "C":h.push({key:"C",data:[...gb]});A=gb[4];P=gb[5];qa=gb[2];Aa=gb[3];break;case "L":h.push({key:"L",data:[...gb]});[A,P]=gb;break;case "H":A=gb[0];h.push({key:"L",data:[A,P]});break;case "V":P=gb[0];h.push({key:"L",data:[A,P]});break;case "S":var La=d=0;"C"===m||"S"===m?(d=A+(A-qa),La=P+(P-Aa)):(d=A,La=P);h.push({key:"C",data:[d,La,...gb]});qa=gb[0];Aa=gb[1];A=gb[2];P=gb[3];break;case "T":{const [ib,kb]=gb;La=d=0;"Q"===m||"T"===m?(d=A+(A-qa),La=P+(P-Aa)):
(d=A,La=P);h.push({key:"C",data:[A+2*(d-A)/3,P+2*(La-P)/3,ib+2*(d-ib)/3,kb+2*(La-kb)/3,ib,kb]});qa=d;Aa=La;A=ib;P=kb;break}case "Q":{const [ib,kb,Kb,Ib]=gb;h.push({key:"C",data:[A+2*(ib-A)/3,P+2*(kb-P)/3,Kb+2*(ib-Kb)/3,Ib+2*(kb-Ib)/3,Kb,Ib]});qa=ib;Aa=kb;A=Kb;P=Ib;break}case "A":{m=Math.abs(gb[0]);d=Math.abs(gb[1]);La=gb[2];const ib=gb[3],kb=gb[4],Kb=gb[5],Ib=gb[6];if(0===m||0===d)h.push({key:"C",data:[A,P,Kb,Ib,Kb,Ib]}),A=Kb,P=Ib;else if(A!==Kb||P!==Ib)K(A,P,Kb,Ib,m,d,La,ib,kb).forEach(function(mc){h.push({key:"C",
data:mc})}),A=Kb,P=Ib;break}case "Z":h.push({key:"Z",data:[]}),A=W,P=va}m=Ga}return h}function ra(d,h,m){return[d*Math.cos(m)-h*Math.sin(m),d*Math.sin(m)+h*Math.cos(m)]}function K(d,h,m,A,P,W,va,qa,Aa,La){const Ga=(gb=va,Math.PI*gb/180);var gb;gb=[];if(La)[qa,ib,kb,Kb]=La;else{[d,h]=ra(d,h,-Ga);[m,A]=ra(m,A,-Ga);var ib=(d-m)/2;var kb=(h-A)/2;var Kb=ib*ib/(P*P)+kb*kb/(W*W);1<Kb&&(Kb=Math.sqrt(Kb),P*=Kb,W*=Kb);Kb=P*P;var Ib=W*W;qa=(qa===Aa?-1:1)*Math.sqrt(Math.abs((Kb*Ib-Kb*kb*kb-Ib*ib*ib)/(Kb*kb*kb+
Ib*ib*ib)));kb=qa*P*kb/W+(d+m)/2;Kb=qa*-W*ib/P+(h+A)/2;qa=Math.asin(parseFloat(((h-Kb)/W).toFixed(9)));ib=Math.asin(parseFloat(((A-Kb)/W).toFixed(9)));d<kb&&(qa=Math.PI-qa);m<kb&&(ib=Math.PI-ib);0>qa&&(qa=2*Math.PI+qa);0>ib&&(ib=2*Math.PI+ib);Aa&&qa>ib&&(qa-=2*Math.PI);!Aa&&ib>qa&&(ib-=2*Math.PI)}if(Math.abs(ib-qa)>120*Math.PI/180){gb=ib;Ib=m;const mc=A;ib=Aa&&ib>qa?qa+120*Math.PI/180:qa+120*Math.PI/180*-1;gb=K(m=kb+P*Math.cos(ib),A=Kb+W*Math.sin(ib),Ib,mc,P,W,va,0,Aa,[ib,gb,kb,Kb])}va=Math.tan((ib-
qa)/4);P=4/3*P*va;va*=4/3*W;W=[d,h];d=[d+P*Math.sin(qa),h-va*Math.cos(qa)];h=[m+P*Math.sin(ib),A-va*Math.cos(ib)];m=[m,A];if(d[0]=2*W[0]-d[0],d[1]=2*W[1]-d[1],La)return[d,h,m].concat(gb);gb=[d,h,m].concat(gb);La=[];for(m=0;m<gb.length;m+=3)A=ra(gb[m][0],gb[m][1],Ga),d=ra(gb[m+1][0],gb[m+1][1],Ga),h=ra(gb[m+2][0],gb[m+2][1],Ga),La.push([A[0],A[1],d[0],d[1],h[0],h[1]]);return La}function Q(d,h,m){const A=(d||[]).length;if(2<A){const P=[];for(let W=0;W<A-1;W++)P.push(...Ya(d[W][0],d[W][1],d[W+1][0],
d[W+1][1],m));return h&&P.push(...Ya(d[A-1][0],d[A-1][1],d[0][0],d[0][1],m)),{type:"path",ops:P}}return 2===A?{type:"path",ops:Ya(d[0][0],d[0][1],d[1][0],d[1][1],m)}:{type:"path",ops:[]}}function ha(d,h){let m=Ub(d,1+.2*h.roughness,h);if(!h.disableMultiStroke){var A=1.5*(1+.22*h.roughness);{const P=Object.assign({},h);P.randomizer=void 0;h.seed&&(P.seed=h.seed+1);h=P}d=Ub(d,A,h);m=m.concat(d)}return{type:"path",ops:m}}function da(d,h,m){const A=2*Math.PI/Math.max(m.curveStepCount,m.curveStepCount/
Math.sqrt(200)*Math.sqrt(2*Math.PI*Math.sqrt((Math.pow(d/2,2)+Math.pow(h/2,2))/2)));d=Math.abs(d/2);h=Math.abs(h/2);const P=1-m.curveFitting;return d+=hb(d*P,m),h+=hb(h*P,m),{increment:A,rx:d,ry:h}}function pa(d,h,m,A){const [P,W]=tc(A.increment,d,h,A.rx,A.ry,1,A.increment*cb(.1,cb(.4,1,m),m),m);let va=Wb(P,null,m);m.disableMultiStroke||([d]=tc(A.increment,d,h,A.rx,A.ry,1.5,0,m),m=Wb(d,null,m),va=va.concat(m));return{estimatedPoints:W,opset:{type:"path",ops:va}}}function ba(d,h,m,A,P,W,va,qa,Aa){m=
Math.abs(m/2);A=Math.abs(A/2);m+=hb(.01*m,Aa);for(A+=hb(.01*A,Aa);0>P;)P+=2*Math.PI,W+=2*Math.PI;W-P>2*Math.PI&&(P=0,W=2*Math.PI);var La=Math.min(2*Math.PI/Aa.curveStepCount/2,(W-P)/2);const Ga=Kc(La,d,h,m,A,P,W,1,Aa);Aa.disableMultiStroke||(La=Kc(La,d,h,m,A,P,W,1.5,Aa),Ga.push(...La));return va&&(qa?Ga.push(...Ya(d,h,d+m*Math.cos(P),h+A*Math.sin(P),Aa),...Ya(d,h,d+m*Math.cos(W),h+A*Math.sin(W),Aa)):Ga.push({op:"lineTo",data:[d,h]},{op:"lineTo",data:[d+m*Math.cos(P),h+A*Math.sin(P)]})),{type:"path",
ops:Ga}}function ea(d,h){const m=[];if(d.length){const A=h.maxRandomnessOffset||0,P=d.length;if(2<P){m.push({op:"move",data:[d[0][0]+hb(A,h),d[0][1]+hb(A,h)]});for(let W=1;W<P;W++)m.push({op:"lineTo",data:[d[W][0]+hb(A,h),d[W][1]+hb(A,h)]})}}return{type:"fillPath",ops:m}}function Ba(d,h){{var m=we;let A=h.fillStyle||"hachure";if(!bf[A])switch(A){case "zigzag":bf[A]||(bf[A]=new wf(m));break;case "cross-hatch":bf[A]||(bf[A]=new Jd(m));break;case "dots":bf[A]||(bf[A]=new Hg(m));break;case "dashed":bf[A]||
(bf[A]=new wd(m));break;case "zigzag-line":bf[A]||(bf[A]=new Ni(m));break;default:A="hachure",bf[A]||(bf[A]=new tg(m))}m=bf[A]}return m.fillPolygon(d,h)}function Ua(d){return d.randomizer||(d.randomizer=new fl(d.seed||0)),d.randomizer.next()}function cb(d,h,m,A=1){return m.roughness*A*(Ua(m)*(h-d)+d)}function hb(d,h,m=1){return cb(-d,d,h,m)}function Ya(d,h,m,A,P,W=!1){const va=W?P.disableMultiStrokeFill:P.disableMultiStroke;W=Qb(d,h,m,A,P,!0,!1);if(va)return W;d=Qb(d,h,m,A,P,!0,!0);return W.concat(d)}
function Qb(d,h,m,A,P,W,va){var qa=Math.pow(d-m,2)+Math.pow(h-A,2),Aa=Math.sqrt(qa);let La;La=200>Aa?1:500<Aa?.4:-.0016668*Aa+1.233334;let Ga=P.maxRandomnessOffset||0;Ga*Ga*100>qa&&(Ga=Aa/10);qa=Ga/2;Aa=.2+.2*Ua(P);let gb=P.bowing*P.maxRandomnessOffset*(A-h)/200,ib=P.bowing*P.maxRandomnessOffset*(d-m)/200;gb=hb(gb,P,La);ib=hb(ib,P,La);const kb=[];return W&&(va?kb.push({op:"move",data:[d+hb(qa,P,La),h+hb(qa,P,La)]}):kb.push({op:"move",data:[d+hb(Ga,P,La),h+hb(Ga,P,La)]})),va?kb.push({op:"bcurveTo",
data:[gb+d+(m-d)*Aa+hb(qa,P,La),ib+h+(A-h)*Aa+hb(qa,P,La),gb+d+2*(m-d)*Aa+hb(qa,P,La),ib+h+2*(A-h)*Aa+hb(qa,P,La),m+hb(qa,P,La),A+hb(qa,P,La)]}):kb.push({op:"bcurveTo",data:[gb+d+(m-d)*Aa+hb(Ga,P,La),ib+h+(A-h)*Aa+hb(Ga,P,La),gb+d+2*(m-d)*Aa+hb(Ga,P,La),ib+h+2*(A-h)*Aa+hb(Ga,P,La),m+hb(Ga,P,La),A+hb(Ga,P,La)]}),kb}function Ub(d,h,m){const A=[];A.push([d[0][0]+hb(h,m),d[0][1]+hb(h,m)]);A.push([d[0][0]+hb(h,m),d[0][1]+hb(h,m)]);for(let P=1;P<d.length;P++)A.push([d[P][0]+hb(h,m),d[P][1]+hb(h,m)]),P===
d.length-1&&A.push([d[P][0]+hb(h,m),d[P][1]+hb(h,m)]);return Wb(A,null,m)}function Wb(d,h,m){const A=d.length,P=[];if(3<A){const W=[],va=1-m.curveTightness;P.push({op:"move",data:[d[1][0],d[1][1]]});for(let qa=1;qa+2<A;qa++){const Aa=d[qa];W[0]=[Aa[0],Aa[1]];W[1]=[Aa[0]+(va*d[qa+1][0]-va*d[qa-1][0])/6,Aa[1]+(va*d[qa+1][1]-va*d[qa-1][1])/6];W[2]=[d[qa+1][0]+(va*d[qa][0]-va*d[qa+2][0])/6,d[qa+1][1]+(va*d[qa][1]-va*d[qa+2][1])/6];W[3]=[d[qa+1][0],d[qa+1][1]];P.push({op:"bcurveTo",data:[W[1][0],W[1][1],
W[2][0],W[2][1],W[3][0],W[3][1]]})}h&&2===h.length&&(d=m.maxRandomnessOffset,P.push({op:"lineTo",data:[h[0]+hb(d,m),h[1]+hb(d,m)]}))}else 3===A?(P.push({op:"move",data:[d[1][0],d[1][1]]}),P.push({op:"bcurveTo",data:[d[1][0],d[1][1],d[2][0],d[2][1],d[2][0],d[2][1]]})):2===A&&P.push(...Ya(d[0][0],d[0][1],d[1][0],d[1][1],m));return P}function tc(d,h,m,A,P,W,va,qa){const Aa=[],La=[],Ga=hb(.5,qa)-Math.PI/2;La.push([hb(W,qa)+h+.9*A*Math.cos(Ga-d),hb(W,qa)+m+.9*P*Math.sin(Ga-d)]);for(let gb=Ga;gb<2*Math.PI+
Ga-.01;gb+=d){const ib=[hb(W,qa)+h+A*Math.cos(gb),hb(W,qa)+m+P*Math.sin(gb)];Aa.push(ib);La.push(ib)}return La.push([hb(W,qa)+h+A*Math.cos(Ga+2*Math.PI+.5*va),hb(W,qa)+m+P*Math.sin(Ga+2*Math.PI+.5*va)]),La.push([hb(W,qa)+h+.98*A*Math.cos(Ga+va),hb(W,qa)+m+.98*P*Math.sin(Ga+va)]),La.push([hb(W,qa)+h+.9*A*Math.cos(Ga+.5*va),hb(W,qa)+m+.9*P*Math.sin(Ga+.5*va)]),[La,Aa]}function Kc(d,h,m,A,P,W,va,qa,Aa){var La=W+hb(.1,Aa);W=[];for(W.push([hb(qa,Aa)+h+.9*A*Math.cos(La-d),hb(qa,Aa)+m+.9*P*Math.sin(La-d)]);La<=
va;La+=d)W.push([hb(qa,Aa)+h+A*Math.cos(La),hb(qa,Aa)+m+P*Math.sin(La)]);return W.push([h+A*Math.cos(va),m+P*Math.sin(va)]),W.push([h+A*Math.cos(va),m+P*Math.sin(va)]),Wb(W,null,Aa)}function ac(d,h,m,A,P,W,va,qa){const Aa=[],La=[qa.maxRandomnessOffset||1,(qa.maxRandomnessOffset||1)+.3];let Ga;const gb=qa.disableMultiStroke?1:2;for(let ib=0;ib<gb;ib++)0===ib?Aa.push({op:"move",data:[va[0],va[1]]}):Aa.push({op:"move",data:[va[0]+hb(La[0],qa),va[1]+hb(La[0],qa)]}),Ga=[P+hb(La[ib],qa),W+hb(La[ib],qa)],
Aa.push({op:"bcurveTo",data:[d+hb(La[ib],qa),h+hb(La[ib],qa),m+hb(La[ib],qa),A+hb(La[ib],qa),Ga[0],Ga[1]]});return Aa}function uc(d){var h,m,A="";if("string"==typeof d||"number"==typeof d)A+=d;else if("object"==typeof d)if(Array.isArray(d))for(h=0;h<d.length;h++)d[h]&&(m=uc(d[h]))&&(A&&(A+=" "),A+=m);else for(h in d)d[h]&&(A&&(A+=" "),A+=h);return A}function zc(){for(var d,h,m=0,A="";m<arguments.length;)(d=arguments[m++])&&(h=uc(d))&&(A&&(A+=" "),A+=h);return A}function ld(d,h){var m=Object.keys(d);
if(Object.getOwnPropertySymbols){var A=Object.getOwnPropertySymbols(d);h&&(A=A.filter(function(P){return Object.getOwnPropertyDescriptor(d,P).enumerable}));m.push.apply(m,A)}return m}function Eb(d){for(var h=1;h<arguments.length;h++){var m=null!=arguments[h]?arguments[h]:{};h%2?ld(Object(m),!0).forEach(function(A){Be()(d,A,m[A])}):Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(m)):ld(Object(m)).forEach(function(A){Object.defineProperty(d,A,Object.getOwnPropertyDescriptor(m,
A))})}return d}function fc(d,h){var m=Object.keys(d);if(Object.getOwnPropertySymbols){var A=Object.getOwnPropertySymbols(d);h&&(A=A.filter(function(P){return Object.getOwnPropertyDescriptor(d,P).enumerable}));m.push.apply(m,A)}return m}function fb(d){for(var h=1;h<arguments.length;h++){var m=null!=arguments[h]?arguments[h]:{};h%2?fc(Object(m),!0).forEach(function(A){Be()(d,A,m[A])}):Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(m)):fc(Object(m)).forEach(function(A){Object.defineProperty(d,
A,Object.getOwnPropertyDescriptor(m,A))})}return d}function Ha(d,h){var m=Object.keys(d);if(Object.getOwnPropertySymbols){var A=Object.getOwnPropertySymbols(d);h&&(A=A.filter(function(P){return Object.getOwnPropertyDescriptor(d,P).enumerable}));m.push.apply(m,A)}return m}function Ka(d){for(var h=1;h<arguments.length;h++){var m=null!=arguments[h]?arguments[h]:{};h%2?Ha(Object(m),!0).forEach(function(A){Be()(d,A,m[A])}):Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(m)):
Ha(Object(m)).forEach(function(A){Object.defineProperty(d,A,Object.getOwnPropertyDescriptor(m,A))})}return d}function Ja(d,h){var m=Object.keys(d);if(Object.getOwnPropertySymbols){var A=Object.getOwnPropertySymbols(d);h&&(A=A.filter(function(P){return Object.getOwnPropertyDescriptor(d,P).enumerable}));m.push.apply(m,A)}return m}function Ca(d){for(var h=1;h<arguments.length;h++){var m=null!=arguments[h]?arguments[h]:{};h%2?Ja(Object(m),!0).forEach(function(A){Be()(d,A,m[A])}):Object.getOwnPropertyDescriptors?
Object.defineProperties(d,Object.getOwnPropertyDescriptors(m)):Ja(Object(m)).forEach(function(A){Object.defineProperty(d,A,Object.getOwnPropertyDescriptor(m,A))})}return d}function Ra(d,h){var m=Object.keys(d);if(Object.getOwnPropertySymbols){var A=Object.getOwnPropertySymbols(d);h&&(A=A.filter(function(P){return Object.getOwnPropertyDescriptor(d,P).enumerable}));m.push.apply(m,A)}return m}function ab(d){for(var h=1;h<arguments.length;h++){var m=null!=arguments[h]?arguments[h]:{};h%2?Ra(Object(m),
!0).forEach(function(A){Be()(d,A,m[A])}):Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(m)):Ra(Object(m)).forEach(function(A){Object.defineProperty(d,A,Object.getOwnPropertyDescriptor(m,A))})}return d}function Fb(d,h){var m=Object.keys(d);if(Object.getOwnPropertySymbols){var A=Object.getOwnPropertySymbols(d);h&&(A=A.filter(function(P){return Object.getOwnPropertyDescriptor(d,P).enumerable}));m.push.apply(m,A)}return m}function Hb(d,h){var m=Object.keys(d);
if(Object.getOwnPropertySymbols){var A=Object.getOwnPropertySymbols(d);h&&(A=A.filter(function(P){return Object.getOwnPropertyDescriptor(d,P).enumerable}));m.push.apply(m,A)}return m}function Xb(d){for(var h=1;h<arguments.length;h++){var m=null!=arguments[h]?arguments[h]:{};h%2?Hb(Object(m),!0).forEach(function(A){Be()(d,A,m[A])}):Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(m)):Hb(Object(m)).forEach(function(A){Object.defineProperty(d,A,Object.getOwnPropertyDescriptor(m,
A))})}return d}function rc(d,h){var m=Object.keys(d);if(Object.getOwnPropertySymbols){var A=Object.getOwnPropertySymbols(d);h&&(A=A.filter(function(P){return Object.getOwnPropertyDescriptor(d,P).enumerable}));m.push.apply(m,A)}return m}function Bc(d){for(var h=1;h<arguments.length;h++){var m=null!=arguments[h]?arguments[h]:{};h%2?rc(Object(m),!0).forEach(function(A){Be()(d,A,m[A])}):Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(m)):rc(Object(m)).forEach(function(A){Object.defineProperty(d,
A,Object.getOwnPropertyDescriptor(m,A))})}return d}function sc(d,h){var m=Object.keys(d);if(Object.getOwnPropertySymbols){var A=Object.getOwnPropertySymbols(d);h&&(A=A.filter(function(P){return Object.getOwnPropertyDescriptor(d,P).enumerable}));m.push.apply(m,A)}return m}function Wc(d){for(var h=1;h<arguments.length;h++){var m=null!=arguments[h]?arguments[h]:{};h%2?sc(Object(m),!0).forEach(function(A){Be()(d,A,m[A])}):Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(m)):
sc(Object(m)).forEach(function(A){Object.defineProperty(d,A,Object.getOwnPropertyDescriptor(m,A))})}return d}function Nd(d,h){var m=Object.keys(d);if(Object.getOwnPropertySymbols){var A=Object.getOwnPropertySymbols(d);h&&(A=A.filter(function(P){return Object.getOwnPropertyDescriptor(d,P).enumerable}));m.push.apply(m,A)}return m}function $c(d){for(var h=1;h<arguments.length;h++){var m=null!=arguments[h]?arguments[h]:{};h%2?Nd(Object(m),!0).forEach(function(A){Be()(d,A,m[A])}):Object.getOwnPropertyDescriptors?
Object.defineProperties(d,Object.getOwnPropertyDescriptors(m)):Nd(Object(m)).forEach(function(A){Object.defineProperty(d,A,Object.getOwnPropertyDescriptor(m,A))})}return d}function ae(d,h){var m=Object.keys(d);if(Object.getOwnPropertySymbols){var A=Object.getOwnPropertySymbols(d);h&&(A=A.filter(function(P){return Object.getOwnPropertyDescriptor(d,P).enumerable}));m.push.apply(m,A)}return m}function ze(d){for(var h=1;h<arguments.length;h++){var m=null!=arguments[h]?arguments[h]:{};h%2?ae(Object(m),
!0).forEach(function(A){Be()(d,A,m[A])}):Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(m)):ae(Object(m)).forEach(function(A){Object.defineProperty(d,A,Object.getOwnPropertyDescriptor(m,A))})}return d}function gd(d){var h=d.options,m=d.value,A=d.label,P=d.onChange,W=d.onClose,va=R().useRef(),qa=R().useRef(),Aa=R().useRef(null);R().useEffect(function(){qa.current?qa.current.focus():Aa.current&&Aa.current.focus()},[]);return R().createElement("div",{className:"picker",
role:"dialog","aria-modal":"true","aria-label":A,onKeyDown:function(La){var Ga=h.find(function(Kb){return Kb.keyBinding===La.key.toLowerCase()});if(La.metaKey||La.altKey||La.ctrlKey||!Ga)if("Tab"===La.key)setTimeout(function(){qa.current!==document.activeElement&&W()},0);else if(Mj(La.key)){Ga=ef.rtl;if(-1!==(kb=Array.prototype.indexOf.call(Aa.current.children,document.activeElement))){var gb=h.length,ib=kb;switch(La.key){case Ga?"ArrowLeft":"ArrowRight":case "ArrowDown":ib=(kb+1)%gb;break;case Ga?
"ArrowRight":"ArrowLeft":case "ArrowUp":ib=(gb+kb-1)%gb}Aa.current.children[ib].focus()}La.preventDefault()}else"Escape"!==La.key&&"Enter"!==La.key||(La.preventDefault(),W());else{var kb=h.indexOf(Ga);Aa.current.children[kb].focus();La.preventDefault()}La.nativeEvent.stopImmediatePropagation()}},R().createElement("div",{className:"picker-content",ref:Aa},h.map(function(La,Ga){return R().createElement("button",{className:"picker-option",onClick:function(gb){gb.currentTarget.focus();P(La.value)},title:"".concat(La.text,
" — ").concat(La.keyBinding.toUpperCase()),"aria-label":La.text||"none","aria-keyshortcuts":La.keyBinding,key:La.text,ref:function(gb){gb&&0===Ga&&(va.current=gb);gb&&La.value===m&&(qa.current=gb)},onFocus:function(){P(La.value)}},La.icon,R().createElement("span",{className:"picker-keybinding"},La.keyBinding))})))}function dd(d){var h,m=d.value,A=d.label,P=d.options,W=d.onChange;d=d.group;d=void 0===d?"":d;var va=R().useState(!1),qa=va[0],Aa=va[1],La=R().useRef(null);va=ef.rtl;return R().createElement("label",
{className:"picker-container"},R().createElement("button",{name:d,className:qa?"active":"","aria-label":A,onClick:function(){return Aa(!qa)},ref:La},null===(h=P.find(function(Ga){return Ga.value===m}))||void 0===h?void 0:h.icon),R().createElement(R().Suspense,{fallback:""},qa?R().createElement(R().Fragment,null,R().createElement(db,xd()({onCloseRequest:function(Ga){return Ga.target!==La.current&&Aa(!1)}},va?{right:5.5}:{left:-5.5}),R().createElement(gd,{options:P,value:m,label:A,onChange:W,onClose:function(){var Ga;
Aa(!1);null===(Ga=La.current)||void 0===Ga||Ga.focus()}})),R().createElement("div",{className:"picker-triangle"})):null))}function Me(d,h){var m=Object.keys(d);if(Object.getOwnPropertySymbols){var A=Object.getOwnPropertySymbols(d);h&&(A=A.filter(function(P){return Object.getOwnPropertyDescriptor(d,P).enumerable}));m.push.apply(m,A)}return m}function je(d){for(var h=1;h<arguments.length;h++){var m=null!=arguments[h]?arguments[h]:{};h%2?Me(Object(m),!0).forEach(function(A){Be()(d,A,m[A])}):Object.getOwnPropertyDescriptors?
Object.defineProperties(d,Object.getOwnPropertyDescriptors(m)):Me(Object(m)).forEach(function(A){Object.defineProperty(d,A,Object.getOwnPropertyDescriptor(m,A))})}return d}function Ae(){return(0,Z.useContext)(Zf)}function of(d,h){var m=Object.keys(d);if(Object.getOwnPropertySymbols){var A=Object.getOwnPropertySymbols(d);h&&(A=A.filter(function(P){return Object.getOwnPropertyDescriptor(d,P).enumerable}));m.push.apply(m,A)}return m}function Ne(d){for(var h=1;h<arguments.length;h++){var m=null!=arguments[h]?
arguments[h]:{};h%2?of(Object(m),!0).forEach(function(A){Be()(d,A,m[A])}):Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(m)):of(Object(m)).forEach(function(A){Object.defineProperty(d,A,Object.getOwnPropertyDescriptor(m,A))})}return d}function Ve(d,h){var m=Object.keys(d);if(Object.getOwnPropertySymbols){var A=Object.getOwnPropertySymbols(d);h&&(A=A.filter(function(P){return Object.getOwnPropertyDescriptor(d,P).enumerable}));m.push.apply(m,A)}return m}function Bg(d){for(var h=
1;h<arguments.length;h++){var m=null!=arguments[h]?arguments[h]:{};h%2?Ve(Object(m),!0).forEach(function(A){Be()(d,A,m[A])}):Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(m)):Ve(Object(m)).forEach(function(A){Object.defineProperty(d,A,Object.getOwnPropertyDescriptor(m,A))})}return d}async function Gg(...d){return(await nm).default(...d)}async function mh(...d){return(await hf).default(...d)}function ce(d,h){var m=Object.keys(d);if(Object.getOwnPropertySymbols){var A=
Object.getOwnPropertySymbols(d);h&&(A=A.filter(function(P){return Object.getOwnPropertyDescriptor(d,P).enumerable}));m.push.apply(m,A)}return m}function df(d){for(var h=1;h<arguments.length;h++){var m=null!=arguments[h]?arguments[h]:{};h%2?ce(Object(m),!0).forEach(function(A){Be()(d,A,m[A])}):Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(m)):ce(Object(m)).forEach(function(A){Object.defineProperty(d,A,Object.getOwnPropertyDescriptor(m,A))})}return d}function Ze(d,
h){var m=Object.keys(d);if(Object.getOwnPropertySymbols){var A=Object.getOwnPropertySymbols(d);h&&(A=A.filter(function(P){return Object.getOwnPropertyDescriptor(d,P).enumerable}));m.push.apply(m,A)}return m}function He(d){for(var h=1;h<arguments.length;h++){var m=null!=arguments[h]?arguments[h]:{};h%2?Ze(Object(m),!0).forEach(function(A){Be()(d,A,m[A])}):Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(m)):Ze(Object(m)).forEach(function(A){Object.defineProperty(d,
A,Object.getOwnPropertyDescriptor(m,A))})}return d}function nb(d,h){var m=Object.keys(d);if(Object.getOwnPropertySymbols){var A=Object.getOwnPropertySymbols(d);h&&(A=A.filter(function(P){return Object.getOwnPropertyDescriptor(d,P).enumerable}));m.push.apply(m,A)}return m}function sb(d){for(var h=1;h<arguments.length;h++){var m=null!=arguments[h]?arguments[h]:{};h%2?nb(Object(m),!0).forEach(function(A){Be()(d,A,m[A])}):Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(m)):
nb(Object(m)).forEach(function(A){Object.defineProperty(d,A,Object.getOwnPropertyDescriptor(m,A))})}return d}function jb(d,h){var m=Object.keys(d);if(Object.getOwnPropertySymbols){var A=Object.getOwnPropertySymbols(d);h&&(A=A.filter(function(P){return Object.getOwnPropertyDescriptor(d,P).enumerable}));m.push.apply(m,A)}return m}function Ta(d){for(var h=1;h<arguments.length;h++){var m=null!=arguments[h]?arguments[h]:{};h%2?jb(Object(m),!0).forEach(function(A){Be()(d,A,m[A])}):Object.getOwnPropertyDescriptors?
Object.defineProperties(d,Object.getOwnPropertyDescriptors(m)):jb(Object(m)).forEach(function(A){Object.defineProperty(d,A,Object.getOwnPropertyDescriptor(m,A))})}return d}function bb(d,h){var m=Object.keys(d);if(Object.getOwnPropertySymbols){var A=Object.getOwnPropertySymbols(d);h&&(A=A.filter(function(P){return Object.getOwnPropertyDescriptor(d,P).enumerable}));m.push.apply(m,A)}return m}function ob(d){for(var h=1;h<arguments.length;h++){var m=null!=arguments[h]?arguments[h]:{};h%2?bb(Object(m),
!0).forEach(function(A){Be()(d,A,m[A])}):Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(m)):bb(Object(m)).forEach(function(A){Object.defineProperty(d,A,Object.getOwnPropertyDescriptor(m,A))})}return d}function Cb(d,h){var m=Object.keys(d);if(Object.getOwnPropertySymbols){var A=Object.getOwnPropertySymbols(d);h&&(A=A.filter(function(P){return Object.getOwnPropertyDescriptor(d,P).enumerable}));m.push.apply(m,A)}return m}function Zb(d){for(var h=1;h<arguments.length;h++){var m=
null!=arguments[h]?arguments[h]:{};h%2?Cb(Object(m),!0).forEach(function(A){Be()(d,A,m[A])}):Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(m)):Cb(Object(m)).forEach(function(A){Object.defineProperty(d,A,Object.getOwnPropertyDescriptor(m,A))})}return d}function ic(d,h){var m=Object.keys(d);if(Object.getOwnPropertySymbols){var A=Object.getOwnPropertySymbols(d);h&&(A=A.filter(function(P){return Object.getOwnPropertyDescriptor(d,P).enumerable}));m.push.apply(m,
A)}return m}function nc(d){for(var h=1;h<arguments.length;h++){var m=null!=arguments[h]?arguments[h]:{};h%2?ic(Object(m),!0).forEach(function(A){Be()(d,A,m[A])}):Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(m)):ic(Object(m)).forEach(function(A){Object.defineProperty(d,A,Object.getOwnPropertyDescriptor(m,A))})}return d}function cd(d,h){var m=Object.keys(d);if(Object.getOwnPropertySymbols){var A=Object.getOwnPropertySymbols(d);h&&(A=A.filter(function(P){return Object.getOwnPropertyDescriptor(d,
P).enumerable}));m.push.apply(m,A)}return m}function Mc(d){for(var h=1;h<arguments.length;h++){var m=null!=arguments[h]?arguments[h]:{};h%2?cd(Object(m),!0).forEach(function(A){Be()(d,A,m[A])}):Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(m)):cd(Object(m)).forEach(function(A){Object.defineProperty(d,A,Object.getOwnPropertyDescriptor(m,A))})}return d}function jc(d,h){var m=Object.keys(d);if(Object.getOwnPropertySymbols){var A=Object.getOwnPropertySymbols(d);
h&&(A=A.filter(function(P){return Object.getOwnPropertyDescriptor(d,P).enumerable}));m.push.apply(m,A)}return m}function Mb(d){for(var h=1;h<arguments.length;h++){var m=null!=arguments[h]?arguments[h]:{};h%2?jc(Object(m),!0).forEach(function(A){Be()(d,A,m[A])}):Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(m)):jc(Object(m)).forEach(function(A){Object.defineProperty(d,A,Object.getOwnPropertyDescriptor(m,A))})}return d}function Gd(d,h){var m=Object.keys(d);
if(Object.getOwnPropertySymbols){var A=Object.getOwnPropertySymbols(d);h&&(A=A.filter(function(P){return Object.getOwnPropertyDescriptor(d,P).enumerable}));m.push.apply(m,A)}return m}function Dd(d){for(var h=1;h<arguments.length;h++){var m=null!=arguments[h]?arguments[h]:{};h%2?Gd(Object(m),!0).forEach(function(A){Be()(d,A,m[A])}):Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(m)):Gd(Object(m)).forEach(function(A){Object.defineProperty(d,A,Object.getOwnPropertyDescriptor(m,
A))})}return d}function oe(d,h){var m=Object.keys(d);if(Object.getOwnPropertySymbols){var A=Object.getOwnPropertySymbols(d);h&&(A=A.filter(function(P){return Object.getOwnPropertyDescriptor(d,P).enumerable}));m.push.apply(m,A)}return m}function Vc(d){for(var h=1;h<arguments.length;h++){var m=null!=arguments[h]?arguments[h]:{};h%2?oe(Object(m),!0).forEach(function(A){Be()(d,A,m[A])}):Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(m)):oe(Object(m)).forEach(function(A){Object.defineProperty(d,
A,Object.getOwnPropertyDescriptor(m,A))})}return d}function Md(d,h){var m=Object.keys(d);if(Object.getOwnPropertySymbols){var A=Object.getOwnPropertySymbols(d);h&&(A=A.filter(function(P){return Object.getOwnPropertyDescriptor(d,P).enumerable}));m.push.apply(m,A)}return m}function rb(d){for(var h=1;h<arguments.length;h++){var m=null!=arguments[h]?arguments[h]:{};h%2?Md(Object(m),!0).forEach(function(A){Be()(d,A,m[A])}):Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(m)):
Md(Object(m)).forEach(function(A){Object.defineProperty(d,A,Object.getOwnPropertyDescriptor(m,A))})}return d}function Za(d,h){var m=Object.keys(d);if(Object.getOwnPropertySymbols){var A=Object.getOwnPropertySymbols(d);h&&(A=A.filter(function(P){return Object.getOwnPropertyDescriptor(d,P).enumerable}));m.push.apply(m,A)}return m}function Sb(d){for(var h=1;h<arguments.length;h++){var m=null!=arguments[h]?arguments[h]:{};h%2?Za(Object(m),!0).forEach(function(A){Be()(d,A,m[A])}):Object.getOwnPropertyDescriptors?
Object.defineProperties(d,Object.getOwnPropertyDescriptors(m)):Za(Object(m)).forEach(function(A){Object.defineProperty(d,A,Object.getOwnPropertyDescriptor(m,A))})}return d}function Dc(d,h){var m=Object.keys(d);if(Object.getOwnPropertySymbols){var A=Object.getOwnPropertySymbols(d);h&&(A=A.filter(function(P){return Object.getOwnPropertyDescriptor(d,P).enumerable}));m.push.apply(m,A)}return m}function id(d){for(var h=1;h<arguments.length;h++){var m=null!=arguments[h]?arguments[h]:{};h%2?Dc(Object(m),
!0).forEach(function(A){Be()(d,A,m[A])}):Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(m)):Dc(Object(m)).forEach(function(A){Object.defineProperty(d,A,Object.getOwnPropertyDescriptor(m,A))})}return d}function pd(d,h){var m=Object.keys(d);if(Object.getOwnPropertySymbols){var A=Object.getOwnPropertySymbols(d);h&&(A=A.filter(function(P){return Object.getOwnPropertyDescriptor(d,P).enumerable}));m.push.apply(m,A)}return m}function be(d){for(var h=1;h<arguments.length;h++){var m=
null!=arguments[h]?arguments[h]:{};h%2?pd(Object(m),!0).forEach(function(A){Be()(d,A,m[A])}):Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(m)):pd(Object(m)).forEach(function(A){Object.defineProperty(d,A,Object.getOwnPropertyDescriptor(m,A))})}return d}function oc(d,h){var m=Object.keys(d);if(Object.getOwnPropertySymbols){var A=Object.getOwnPropertySymbols(d);h&&(A=A.filter(function(P){return Object.getOwnPropertyDescriptor(d,P).enumerable}));m.push.apply(m,
A)}return m}function Jc(d){for(var h=1;h<arguments.length;h++){var m=null!=arguments[h]?arguments[h]:{};h%2?oc(Object(m),!0).forEach(function(A){Be()(d,A,m[A])}):Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(m)):oc(Object(m)).forEach(function(A){Object.defineProperty(d,A,Object.getOwnPropertyDescriptor(m,A))})}return d}function Pb(d,h){var m=Object.keys(d);if(Object.getOwnPropertySymbols){var A=Object.getOwnPropertySymbols(d);h&&(A=A.filter(function(P){return Object.getOwnPropertyDescriptor(d,
P).enumerable}));m.push.apply(m,A)}return m}function lb(d){for(var h=1;h<arguments.length;h++){var m=null!=arguments[h]?arguments[h]:{};h%2?Pb(Object(m),!0).forEach(function(A){Be()(d,A,m[A])}):Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(m)):Pb(Object(m)).forEach(function(A){Object.defineProperty(d,A,Object.getOwnPropertyDescriptor(m,A))})}return d}function ge(d,h){var m=Object.keys(d);if(Object.getOwnPropertySymbols){var A=Object.getOwnPropertySymbols(d);
h&&(A=A.filter(function(P){return Object.getOwnPropertyDescriptor(d,P).enumerable}));m.push.apply(m,A)}return m}function Oe(d,h){var m=Object.keys(d);if(Object.getOwnPropertySymbols){var A=Object.getOwnPropertySymbols(d);h&&(A=A.filter(function(P){return Object.getOwnPropertyDescriptor(d,P).enumerable}));m.push.apply(m,A)}return m}function Bd(d,h){var m=Object.keys(d);if(Object.getOwnPropertySymbols){var A=Object.getOwnPropertySymbols(d);h&&(A=A.filter(function(P){return Object.getOwnPropertyDescriptor(d,
P).enumerable}));m.push.apply(m,A)}return m}function cc(d){for(var h=1;h<arguments.length;h++){var m=null!=arguments[h]?arguments[h]:{};h%2?Bd(Object(m),!0).forEach(function(A){Be()(d,A,m[A])}):Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(m)):Bd(Object(m)).forEach(function(A){Object.defineProperty(d,A,Object.getOwnPropertyDescriptor(m,A))})}return d}function Ma(d,h){var m=Object.keys(d);if(Object.getOwnPropertySymbols){var A=Object.getOwnPropertySymbols(d);
h&&(A=A.filter(function(P){return Object.getOwnPropertyDescriptor(d,P).enumerable}));m.push.apply(m,A)}return m}function Sa(d){for(var h=1;h<arguments.length;h++){var m=null!=arguments[h]?arguments[h]:{};h%2?Ma(Object(m),!0).forEach(function(A){Be()(d,A,m[A])}):Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(m)):Ma(Object(m)).forEach(function(A){Object.defineProperty(d,A,Object.getOwnPropertyDescriptor(m,A))})}return d}g.r(n);g.d(n,{default:()=>Ot,defaultLang:()=>
Id,getElementMap:()=>Wj,getSceneVersion:()=>il,getSyncableElements:()=>pi,languages:()=>Uc,restore:()=>xn,restoreAppState:()=>an,restoreElements:()=>Gk});var Pa=g(7154),xa=g.n(Pa),sa=g(6479),N=g.n(sa),Z=g(4698),R=g.n(Z),Na=g(8288);const eb=JSON.parse('{"u2":"@excalidraw/excalidraw","i8":"0.4.3"}');"production"!==Na.Vi.TEST&&(g.p=window.EXCALIDRAW_ASSET_PATH||"https://unpkg.com/".concat(eb.u2,"@").concat(eb.i8,"/dist/"));var yb=g(5374),tb=g.n(yb),pc=g(2829),nd=g(2051),rd=function(d,h){function m(Aa){return function(La){return function(Ga){if(A)throw new TypeError("Generator is already executing.");
for(;qa;)try{if(A=1,P&&(W=2&Ga[0]?P.return:Ga[0]?P.throw||((W=P.return)&&W.call(P),0):P.next)&&!(W=W.call(P,Ga[1])).done)return W;switch(P=0,W&&(Ga=[2&Ga[0],W.value]),Ga[0]){case 0:case 1:W=Ga;break;case 4:return qa.label++,{value:Ga[1],done:!1};case 5:qa.label++;P=Ga[1];Ga=[0];continue;case 7:Ga=qa.ops.pop();qa.trys.pop();continue;default:if(!(W=qa.trys,(W=0<W.length&&W[W.length-1])||6!==Ga[0]&&2!==Ga[0])){qa=0;continue}if(3===Ga[0]&&(!W||Ga[1]>W[0]&&Ga[1]<W[3]))qa.label=Ga[1];else if(6===Ga[0]&&
qa.label<W[1])qa.label=W[1],W=Ga;else if(W&&qa.label<W[2])qa.label=W[2],qa.ops.push(Ga);else{W[2]&&qa.ops.pop();qa.trys.pop();continue}}Ga=h.call(d,qa)}catch(gb){Ga=[6,gb],P=0}finally{A=W=0}if(5&Ga[0])throw Ga[1];return{value:Ga[0]?Ga[1]:void 0,done:!0}}([Aa,La])}}var A,P,W,va,qa={label:0,sent:function(){if(1&W[0])throw W[1];return W[1]},trys:[],ops:[]};return va={next:m(0),throw:m(1),return:m(2)},"function"==typeof Symbol&&(va[Symbol.iterator]=function(){return this}),va},Id={code:"en",label:"English"},
Uc=[{code:"ar-SA",label:"العربية",rtl:!0},{code:"bg-BG",label:"Български"},{code:"ca-ES",label:"Català"},{code:"de-DE",label:"Deutsch"},{code:"el-GR",label:"Ελληνικά"},{code:"es-ES",label:"Español"},{code:"fa-IR",label:"فارسی",rtl:!0},{code:"fi-FI",label:"Suomi"},{code:"fr-FR",label:"Français"},{code:"he-IL",label:"עברית",rtl:!0},{code:"hi-IN",label:"हिन्दी"},{code:"hu-HU",label:"Magyar"},{code:"id-ID",label:"Bahasa Indonesia"},{code:"it-IT",label:"Italiano"},{code:"ja-JP",label:"日本語"},{code:"kab-KAB",
label:"Taqbaylit"},{code:"ko-KR",label:"한국어"},{code:"my-MM",label:"Burmese"},{code:"nb-NO",label:"Norsk bokmål"},{code:"nl-NL",label:"Nederlands"},{code:"nn-NO",label:"Norsk nynorsk"},{code:"oc-FR",label:"Occitan"},{code:"pa-IN",label:"ਪੰਜਾਬੀ"},{code:"pl-PL",label:"Polski"},{code:"pt-BR",label:"Português Brasileiro"},{code:"pt-PT",label:"Português"},{code:"ro-RO",label:"Română"},{code:"ru-RU",label:"Русский"},{code:"sk-SK",label:"Slovenčina"},{code:"sv-SE",label:"Svenska"},{code:"tr-TR",label:"Türkçe"},
{code:"uk-UA",label:"Українська"},{code:"zh-CN",label:"简体中文"},{code:"zh-TW",label:"繁體中文"}].concat([Id]).sort(function(d,h){return d.label>h.label?1:-1}).filter(function(d){return 85<=nd[d.code]});"production"===Na.Vi.DEVELOPMENT&&Uc.unshift({code:"__test__",label:"test language"},{code:"".concat("__test__",".rtl"),label:"‪test language (rtl)‬",rtl:!0});var td,ef=Id,jg={},Pe=function(){var d=tb()(function(h){return rd(this,function(m){switch(m.label){case 0:return ef=h,document.documentElement.dir=
ef.rtl?"rtl":"ltr",document.documentElement.lang=ef.code,h.code.startsWith("__test__")?(jg={},[3,3]):[3,1];case 1:return[4,g(788)("./".concat(ef.code,".json"))];case 2:jg=m.sent(),m.label=3;case 3:return[2]}})});return function(h){return d.apply(this,arguments)}}(),Od=function(d,h){for(var m=0;m<h.length;++m){var A=h[m];if(void 0===d[A])return;d=d[A]}if("string"==typeof d)return d},Jb=function(d,h){if(ef.code.startsWith("__test__"))return d=h?"".concat(d,"(").concat(JSON.stringify(h).slice(1,-1),
")"):d,"‪[[".concat(d,"]]‬");var m=d.split(".");m=Od(jg,m)||Od(pc,m);if(void 0===m)throw Error("Can't find translation for ".concat(d));if(h)for(var A in h)m=m.replace("{{".concat(A,"}}"),h[A]);return m},Vf=function(){return R().createElement("div",{className:"LoadingMessage"},R().createElement("span",null,Jb("labels.loadingScene")))},uh=(td=function(d,h){return(td=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,A){m.__proto__=A}||function(m,A){for(var P in A)Object.prototype.hasOwnProperty.call(A,
P)&&(m[P]=A[P])})(d,h)},function(d,h){function m(){this.constructor=d}if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");td(d,h);d.prototype=null===h?Object.create(h):(m.prototype=h.prototype,new m)}),me=function(d,h){function m(Aa){return function(La){return function(Ga){if(A)throw new TypeError("Generator is already executing.");for(;qa;)try{if(A=1,P&&(W=2&Ga[0]?P.return:Ga[0]?P.throw||((W=P.return)&&W.call(P),0):P.next)&&!(W=
W.call(P,Ga[1])).done)return W;switch(P=0,W&&(Ga=[2&Ga[0],W.value]),Ga[0]){case 0:case 1:W=Ga;break;case 4:return qa.label++,{value:Ga[1],done:!1};case 5:qa.label++;P=Ga[1];Ga=[0];continue;case 7:Ga=qa.ops.pop();qa.trys.pop();continue;default:if(!(W=qa.trys,(W=0<W.length&&W[W.length-1])||6!==Ga[0]&&2!==Ga[0])){qa=0;continue}if(3===Ga[0]&&(!W||Ga[1]>W[0]&&Ga[1]<W[3]))qa.label=Ga[1];else if(6===Ga[0]&&qa.label<W[1])qa.label=W[1],W=Ga;else if(W&&qa.label<W[2])qa.label=W[2],qa.ops.push(Ga);else{W[2]&&
qa.ops.pop();qa.trys.pop();continue}}Ga=h.call(d,qa)}catch(gb){Ga=[6,gb],P=0}finally{A=W=0}if(5&Ga[0])throw Ga[1];return{value:Ga[0]?Ga[1]:void 0,done:!0}}([Aa,La])}}var A,P,W,va,qa={label:0,sent:function(){if(1&W[0])throw W[1];return W[1]},trys:[],ops:[]};return va={next:m(0),throw:m(1),return:m(2)},"function"==typeof Symbol&&(va[Symbol.iterator]=function(){return this}),va},vh=function(d){function h(){for(var m=[],A=0;A<arguments.length;A++)m[A]=arguments[A];var P;A=this;return P=A=d.apply(this,
m)||this,A.state={isLoading:!0},P}return uh(h,d),h.prototype.componentDidMount=function(){var m=this;return tb()(function(){var A;return me(this,function(P){switch(P.label){case 0:return A=Uc.find(function(W){return W.code===m.props.langCode})||Id,[4,Pe(A)];case 1:return P.sent(),m.setState({isLoading:!1}),[2]}})})()},h.prototype.render=function(){return this.state.isLoading?R().createElement(Vf,null):this.props.children},h}(R().Component),Oh=g(566),Be=g.n(Oh);class tg{constructor(d){this.helper=
d}fillPolygon(d,h){return this._fillPolygon(d,h)}_fillPolygon(d,h,m=!1){let A=ma(d,h);m&&(d=this.connectingLines(d,A),A=A.concat(d));return{type:"fillSketch",ops:this.renderLines(A,h)}}renderLines(d,h){const m=[];for(const A of d)m.push(...this.helper.doubleLineOps(A[0][0],A[0][1],A[1][0],A[1][1],h));return m}connectingLines(d,h){const m=[];if(1<h.length)for(let P=1;P<h.length;P++){var A=h[P-1];3>E(A)||(A=[h[P][0],A[1]],3<E(A)&&(A=this.splitOnIntersections(d,A),m.push(...A)))}return m}midPointInPolygon(d,
h){return ia(d,(h[0][0]+h[1][0])/2,(h[0][1]+h[1][1])/2)}splitOnIntersections(d,h){var m=Math.max(5,.1*E(h)),A=[];for(var P=0;P<d.length;P++){var W=d[P],va=d[(P+1)%d.length];if(ta(W,va,...h)&&(W=F(W,va,h[0],h[1]))){va=E([W,h[0]]);const qa=E([W,h[1]]);va>m&&qa>m&&A.push({point:W,distance:va})}}if(1<A.length){m=A.sort((qa,Aa)=>qa.distance-Aa.distance).map(qa=>qa.point);if(ia(d,...h[0])||m.shift(),ia(d,...h[1])||m.pop(),1>=m.length)return this.midPointInPolygon(d,h)?[h]:[];h=[h[0],...m,h[1]];m=[];for(A=
0;A<h.length-1;A+=2)P=[h[A],h[A+1]],this.midPointInPolygon(d,P)&&m.push(P);return m}return this.midPointInPolygon(d,h)?[h]:[]}}class wf extends tg{fillPolygon(d,h){return this._fillPolygon(d,h,!0)}}class Jd extends tg{fillPolygon(d,h){const m=this._fillPolygon(d,h);h=Object.assign({},h,{hachureAngle:h.hachureAngle+90});d=this._fillPolygon(d,h);return m.ops=m.ops.concat(d.ops),m}}class Hg{constructor(d){this.helper=d}fillPolygon(d,h){d=ma(d,h=Object.assign({},h,{curveStepCount:4,hachureAngle:0,roughness:1}));
return this.dotsOnLines(d,h)}dotsOnLines(d,h){const m=[];let A=h.hachureGap;0>A&&(A=4*h.strokeWidth);A=Math.max(A,.1);let P=h.fillWeight;0>P&&(P=h.strokeWidth/2);const W=A/4;for(const La of d){var va=E(La);d=Math.ceil(va/A)-1;va-=d*A;const Ga=(La[0][0]+La[1][0])/2-A/4,gb=Math.min(La[0][1],La[1][1]);for(let ib=0;ib<d;ib++){var qa=gb+va+ib*A,Aa=this.helper.randOffsetWithRange(Ga-W,Ga+W,h);qa=this.helper.randOffsetWithRange(qa-W,qa+W,h);Aa=this.helper.ellipse(Aa,qa,P,P,h);m.push(...Aa.ops)}}return{type:"fillSketch",
ops:m}}}class wd{constructor(d){this.helper=d}fillPolygon(d,h){d=ma(d,h);return{type:"fillSketch",ops:this.dashedLine(d,h)}}dashedLine(d,h){const m=0>h.dashOffset?0>h.hachureGap?4*h.strokeWidth:h.hachureGap:h.dashOffset,A=0>h.dashGap?0>h.hachureGap?4*h.strokeWidth:h.hachureGap:h.dashGap,P=[];return d.forEach(W=>{var va=E(W);const qa=Math.floor(va/(m+A));va=(va+A-qa*(m+A))/2;let Aa=W[0];var La=W[1];Aa[0]>La[0]&&(Aa=W[1],La=W[0]);W=Math.atan((La[1]-Aa[1])/(La[0]-Aa[0]));for(La=0;La<qa;La++){var Ga=
La*(m+A),gb=Ga+m;Ga=[Aa[0]+Ga*Math.cos(W)+va*Math.cos(W),Aa[1]+Ga*Math.sin(W)+va*Math.sin(W)];gb=[Aa[0]+gb*Math.cos(W)+va*Math.cos(W),Aa[1]+gb*Math.sin(W)+va*Math.sin(W)];P.push(...this.helper.doubleLineOps(Ga[0],Ga[1],gb[0],gb[1],h))}}),P}}class Ni{constructor(d){this.helper=d}fillPolygon(d,h){const m=0>h.hachureGap?4*h.strokeWidth:h.hachureGap,A=0>h.zigzagOffset?m:h.zigzagOffset;d=ma(d,h=Object.assign({},h,{hachureGap:m+A}));return{type:"fillSketch",ops:this.zigzagLines(d,A,h)}}zigzagLines(d,h,
m){const A=[];return d.forEach(P=>{var W=E(P);W=Math.round(W/(2*h));let va=P[0];var qa=P[1];va[0]>qa[0]&&(va=P[1],qa=P[0]);P=Math.atan((qa[1]-va[1])/(qa[0]-va[0]));for(qa=0;qa<W;qa++){var Aa=2*qa*h,La=2*(qa+1)*h,Ga=Math.sqrt(2*Math.pow(h,2));Aa=[va[0]+Aa*Math.cos(P),va[1]+Aa*Math.sin(P)];La=[va[0]+La*Math.cos(P),va[1]+La*Math.sin(P)];Ga=[Aa[0]+Ga*Math.cos(P+Math.PI/4),Aa[1]+Ga*Math.sin(P+Math.PI/4)];A.push(...this.helper.doubleLineOps(Aa[0],Aa[1],Ga[0],Ga[1],m),...this.helper.doubleLineOps(Ga[0],
Ga[1],La[0],La[1],m))}}),A}}const bf={};class fl{constructor(d){this.seed=d}next(){return this.seed?(2**31-1&(this.seed=Math.imul(48271,this.seed)))/2**31:Math.random()}}const Ph={A:7,a:7,C:6,c:6,H:1,h:1,L:2,l:2,M:2,m:2,Q:4,q:4,S:4,s:4,T:2,t:2,V:1,v:1,Z:0,z:0},we={randOffset:function(d,h){return hb(d,h)},randOffsetWithRange:function(d,h,m){return cb(d,h,m)},ellipse:function(d,h,m,A,P){m=da(m,A,P);return pa(d,h,P,m).opset},doubleLineOps:function(d,h,m,A,P){return Ya(d,h,m,A,P,!0)}};class Ch{constructor(d){this.defaultOptions=
{maxRandomnessOffset:2,roughness:1,bowing:1,stroke:"#000",strokeWidth:1,curveTightness:0,curveFitting:.95,curveStepCount:9,fillStyle:"hachure",fillWeight:-1,hachureAngle:-41,hachureGap:-1,dashOffset:-1,dashGap:-1,zigzagOffset:-1,seed:0,combineNestedSvgPaths:!1,disableMultiStroke:!1,disableMultiStrokeFill:!1};this.config=d||{};this.config.options&&(this.defaultOptions=this._o(this.config.options))}static newSeed(){return Math.floor(Math.random()*2**31)}_o(d){return d?Object.assign({},this.defaultOptions,
d):this.defaultOptions}_d(d,h,m){return{shape:d,sets:h||[],options:m||this.defaultOptions}}line(d,h,m,A,P){P=this._o(P);return this._d("line",[{type:"path",ops:Ya(d,h,m,A,P)}],P)}rectangle(d,h,m,A,P){P=this._o(P);const W=[];var va=Q([[d,h],[d+m,h],[d+m,h+A],[d,h+A]],!0,P);P.fill&&(d=[[d,h],[d+m,h],[d+m,h+A],[d,h+A]],"solid"===P.fillStyle?W.push(ea(d,P)):W.push(Ba(d,P)));return"none"!==P.stroke&&W.push(va),this._d("rectangle",W,P)}ellipse(d,h,m,A,P){P=this._o(P);const W=[];A=da(m,A,P);m=pa(d,h,P,A);
P.fill&&("solid"===P.fillStyle?(d=pa(d,h,P,A).opset,d.type="fillPath",W.push(d)):W.push(Ba(m.estimatedPoints,P)));return"none"!==P.stroke&&W.push(m.opset),this._d("ellipse",W,P)}circle(d,h,m,A){d=this.ellipse(d,h,m,m,A);return d.shape="circle",d}linearPath(d,h){h=this._o(h);return this._d("linearPath",[Q(d,!1,h)],h)}arc(d,h,m,A,P,W,va=!1,qa){qa=this._o(qa);const Aa=[],La=ba(d,h,m,A,P,W,va,!0,qa);if(va&&qa.fill)if("solid"===qa.fillStyle)d=ba(d,h,m,A,P,W,!0,!1,qa),d.type="fillPath",Aa.push(d);else{va=
Aa.push;{m=Math.abs(m/2);A=Math.abs(A/2);m+=hb(.01*m,qa);for(A+=hb(.01*A,qa);0>P;)P+=2*Math.PI,W+=2*Math.PI;W-P>2*Math.PI&&(P=0,W=2*Math.PI);const Ga=(W-P)/qa.curveStepCount,gb=[];for(;P<=W;P+=Ga)gb.push([d+m*Math.cos(P),h+A*Math.sin(P)]);d=(gb.push([d+m*Math.cos(W),h+A*Math.sin(W)]),gb.push([d,h]),Ba(gb,qa))}va.call(Aa,d)}return"none"!==qa.stroke&&Aa.push(La),this._d("arc",Aa,qa)}curve(d,h){h=this._o(h);const m=[],A=ha(d,h);h.fill&&"none"!==h.fill&&3<=d.length&&(d=H(function(P,W=0){var va=P.length;
if(3>va)throw Error("A curve must have at least three points.");const qa=[];if(3===va)qa.push([...P[0]],[...P[1]],[...P[2]],[...P[2]]);else{va=[];va.push(P[0],P[0]);for(var Aa=1;Aa<P.length;Aa++)va.push(P[Aa]),Aa===P.length-1&&va.push(P[Aa]);P=[];W=1-W;qa.push([...va[0]]);for(Aa=1;Aa+2<va.length;Aa++){const La=va[Aa];P[0]=[La[0],La[1]];P[1]=[La[0]+(W*va[Aa+1][0]-W*va[Aa-1][0])/6,La[1]+(W*va[Aa+1][1]-W*va[Aa-1][1])/6];P[2]=[va[Aa+1][0]+(W*va[Aa][0]-W*va[Aa+2][0])/6,va[Aa+1][1]+(W*va[Aa][1]-W*va[Aa+
2][1])/6];P[3]=[va[Aa+1][0],va[Aa+1][1]];qa.push(P[1],P[2],P[3])}}return qa}(d),10,(1+h.roughness)/2),"solid"===h.fillStyle?m.push(ea(d,h)):m.push(Ba(d,h)));return"none"!==h.stroke&&m.push(A),this._d("curve",m,h)}polygon(d,h){h=this._o(h);const m=[],A=Q(d,!0,h);return h.fill&&("solid"===h.fillStyle?m.push(ea(d,h)):m.push(Ba(d,h))),"none"!==h.stroke&&m.push(A),this._d("polygon",m,h)}path(d,h){const m=this._o(h),A=[];if(!d)return this._d("path",A,m);d=(d||"").replace(/\n/g," ").replace(/(-\s)/g,"-").replace("/(ss)/g",
" ");h=m.fill&&"transparent"!==m.fill&&"none"!==m.fill;const P="none"!==m.stroke,W=!!(m.simplification&&1>m.simplification),va=function(qa,Aa,La){var Ga=na(oa(ja(qa)));qa=[];let gb=[];var ib=[0,0];let kb=[];const Kb=()=>{4<=kb.length&&gb.push(...H(kb,Aa));kb=[]};for(const {key:Ib,data:mc}of Ga)switch(Ib){case "M":Kb();gb.length&&(qa.push(gb),gb=[]);ib=[mc[0],mc[1]];gb.push(ib);break;case "L":Kb();gb.push([mc[0],mc[1]]);break;case "C":kb.length||(Ga=gb.length?gb[gb.length-1]:ib,kb.push([Ga[0],Ga[1]]));
kb.push([mc[0],mc[1]]);kb.push([mc[2],mc[3]]);kb.push([mc[4],mc[5]]);break;case "Z":Kb(),gb.push([ib[0],ib[1]])}Kb();gb.length&&(qa.push(gb),gb=[]);if(!La)return qa;ib=[];for(const Ib of qa)qa=O(Ib,La),qa.length&&ib.push(qa);return ib}(d,1,W?4-4*m.simplification:(1+m.roughness)/2);if(h)if(m.combineNestedSvgPaths){const qa=[];va.forEach(Aa=>qa.push(...Aa));"solid"===m.fillStyle?A.push(ea(qa,m)):A.push(Ba(qa,m))}else va.forEach(qa=>{"solid"===m.fillStyle?A.push(ea(qa,m)):A.push(Ba(qa,m))});return P&&
(W?va.forEach(qa=>{A.push(Q(qa,!1,m))}):A.push(function(qa,Aa){qa=na(oa(ja(qa)));const La=[];let Ga=[0,0],gb=[0,0];for(const {key:ib,data:kb}of qa)switch(ib){case "M":{const Kb=1*(Aa.maxRandomnessOffset||0);La.push({op:"move",data:kb.map(Ib=>Ib+hb(Kb,Aa))});gb=[kb[0],kb[1]];Ga=[kb[0],kb[1]];break}case "L":La.push(...Ya(gb[0],gb[1],kb[0],kb[1],Aa));gb=[kb[0],kb[1]];break;case "C":{const [Kb,Ib,mc,Sc,Yc,kd]=kb;La.push(...ac(Kb,Ib,mc,Sc,Yc,kd,gb,Aa));gb=[Yc,kd];break}case "Z":La.push(...Ya(gb[0],gb[1],
Ga[0],Ga[1],Aa)),gb=[Ga[0],Ga[1]]}return{type:"path",ops:La}}(d,m))),this._d("path",A,m)}opsToPath(d){let h="";for(const m of d.ops)switch(d=m.data,m.op){case "move":h+=`M${d[0]} ${d[1]} `;break;case "bcurveTo":h+=`C${d[0]} ${d[1]}, ${d[2]} ${d[3]}, ${d[4]} ${d[5]} `;break;case "lineTo":h+=`L${d[0]} ${d[1]} `}return h.trim()}toPaths(d){var h=d.sets||[];d=d.options||this.defaultOptions;const m=[];for(const A of h){h=null;switch(A.type){case "path":h={d:this.opsToPath(A),stroke:d.stroke,strokeWidth:d.strokeWidth,
fill:"none"};break;case "fillPath":h={d:this.opsToPath(A),stroke:"none",strokeWidth:0,fill:d.fill||"none"};break;case "fillSketch":h=this.fillSketch(A,d)}h&&m.push(h)}return m}fillSketch(d,h){let m=h.fillWeight;return 0>m&&(m=h.strokeWidth/2),{d:this.opsToPath(d),stroke:h.fill||"none",strokeWidth:m,fill:"none"}}}class dm{constructor(d,h){this.canvas=d;this.ctx=this.canvas.getContext("2d");this.gen=new Ch(h)}draw(d){const h=d.sets||[],m=d.options||this.getDefaultOptions(),A=this.ctx;for(const P of h)switch(P.type){case "path":A.save();
A.strokeStyle="none"===m.stroke?"transparent":m.stroke;A.lineWidth=m.strokeWidth;m.strokeLineDash&&A.setLineDash(m.strokeLineDash);m.strokeLineDashOffset&&(A.lineDashOffset=m.strokeLineDashOffset);this._drawToContext(A,P);A.restore();break;case "fillPath":A.save();A.fillStyle=m.fill||"";this._drawToContext(A,P,"curve"===d.shape||"polygon"===d.shape?"evenodd":"nonzero");A.restore();break;case "fillSketch":this.fillSketch(A,P,m)}}fillSketch(d,h,m){let A=m.fillWeight;0>A&&(A=m.strokeWidth/2);d.save();
m.fillLineDash&&d.setLineDash(m.fillLineDash);m.fillLineDashOffset&&(d.lineDashOffset=m.fillLineDashOffset);d.strokeStyle=m.fill||"";d.lineWidth=A;this._drawToContext(d,h);d.restore()}_drawToContext(d,h,m="nonzero"){d.beginPath();for(const A of h.ops){const P=A.data;switch(A.op){case "move":d.moveTo(P[0],P[1]);break;case "bcurveTo":d.bezierCurveTo(P[0],P[1],P[2],P[3],P[4],P[5]);break;case "lineTo":d.lineTo(P[0],P[1])}}"fillPath"===h.type?d.fill(m):d.stroke()}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}line(d,
h,m,A,P){d=this.gen.line(d,h,m,A,P);return this.draw(d),d}rectangle(d,h,m,A,P){d=this.gen.rectangle(d,h,m,A,P);return this.draw(d),d}ellipse(d,h,m,A,P){d=this.gen.ellipse(d,h,m,A,P);return this.draw(d),d}circle(d,h,m,A){d=this.gen.circle(d,h,m,A);return this.draw(d),d}linearPath(d,h){d=this.gen.linearPath(d,h);return this.draw(d),d}polygon(d,h){d=this.gen.polygon(d,h);return this.draw(d),d}arc(d,h,m,A,P,W,va=!1,qa){d=this.gen.arc(d,h,m,A,P,W,va,qa);return this.draw(d),d}curve(d,h){d=this.gen.curve(d,
h);return this.draw(d),d}path(d,h){d=this.gen.path(d,h);return this.draw(d),d}}class Cg{constructor(d,h){this.svg=d;this.gen=new Ch(h)}draw(d){var h=d.sets||[];const m=d.options||this.getDefaultOptions(),A=this.svg.ownerDocument||window.document,P=A.createElementNS("http://www.w3.org/2000/svg","g");for(const W of h){h=null;switch(W.type){case "path":h=A.createElementNS("http://www.w3.org/2000/svg","path");h.setAttribute("d",this.opsToPath(W));h.setAttribute("stroke",m.stroke);h.setAttribute("stroke-width",
m.strokeWidth+"");h.setAttribute("fill","none");m.strokeLineDash&&h.setAttribute("stroke-dasharray",m.strokeLineDash.join(" ").trim());m.strokeLineDashOffset&&h.setAttribute("stroke-dashoffset",`${m.strokeLineDashOffset}`);break;case "fillPath":h=A.createElementNS("http://www.w3.org/2000/svg","path");h.setAttribute("d",this.opsToPath(W));h.setAttribute("stroke","none");h.setAttribute("stroke-width","0");h.setAttribute("fill",m.fill||"");"curve"!==d.shape&&"polygon"!==d.shape||h.setAttribute("fill-rule",
"evenodd");break;case "fillSketch":h=this.fillSketch(A,W,m)}h&&P.appendChild(h)}return P}fillSketch(d,h,m){let A=m.fillWeight;0>A&&(A=m.strokeWidth/2);d=d.createElementNS("http://www.w3.org/2000/svg","path");return d.setAttribute("d",this.opsToPath(h)),d.setAttribute("stroke",m.fill||""),d.setAttribute("stroke-width",A+""),d.setAttribute("fill","none"),m.fillLineDash&&d.setAttribute("stroke-dasharray",m.fillLineDash.join(" ").trim()),m.fillLineDashOffset&&d.setAttribute("stroke-dashoffset",`${m.fillLineDashOffset}`),
d}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}opsToPath(d){return this.gen.opsToPath(d)}line(d,h,m,A,P){d=this.gen.line(d,h,m,A,P);return this.draw(d)}rectangle(d,h,m,A,P){d=this.gen.rectangle(d,h,m,A,P);return this.draw(d)}ellipse(d,h,m,A,P){d=this.gen.ellipse(d,h,m,A,P);return this.draw(d)}circle(d,h,m,A){d=this.gen.circle(d,h,m,A);return this.draw(d)}linearPath(d,h){d=this.gen.linearPath(d,h);return this.draw(d)}polygon(d,h){d=this.gen.polygon(d,h);return this.draw(d)}arc(d,
h,m,A,P,W,va=!1,qa){d=this.gen.arc(d,h,m,A,P,W,va,qa);return this.draw(d)}curve(d,h){d=this.gen.curve(d,h);return this.draw(d)}path(d,h){d=this.gen.path(d,h);return this.draw(d)}}const Di={canvas:(d,h)=>new dm(d,h),svg:(d,h)=>new Cg(d,h),generator:d=>new Ch(d),newSeed:()=>Ch.newSeed()};var og=function(d){return null!=d&&"text"===d.type},cg=function(d){return null!=d&&If(d.type)},If=function(d){return"arrow"===d||"line"===d||"draw"===d},Qh=function(d){return null!=d&&"arrow"===d.type},Ei=function(d){return null!=
d&&("rectangle"===d.type||"diamond"===d.type||"ellipse"===d.type||"text"===d.type)},xf=function(d,h,m,A,P){return[(d-m)*Math.cos(P)-(h-A)*Math.sin(P)+m,(d-m)*Math.sin(P)+(h-A)*Math.cos(P)+A]},Jj=function(d,h,m){return xf(d[0],d[1],h[0],h[1],m)},lk=function(d,h,m,A,P,W,va,qa){var Aa=Math.cos(A);A=Math.sin(A);return d.e&&d.w?h+=P+va:d.e?(h+=P*(1+Aa),m+=P*A,h+=va*(1-Aa),m+=va*-A):d.w&&(h+=P*(1-Aa),m+=P*-A,h+=va*(1+Aa),m+=va*A),d.n&&d.s?m+=W+qa:d.n?(h+=W*A,m+=W*(1-Aa),h+=qa*-A,m+=qa*(1+Aa)):d.s&&(h+=
W*-A,m+=W*(1+Aa),h+=qa*A,m+=qa*(1-Aa)),[h,m]},mi=function(d,h){if(void 0===h&&(h=1),3<=d.length){var m=[d[0],d[d.length-1]];d=m[0];m=m[1];return Math.hypot(m[0]-d[0],m[1]-d[1])<=Na.qx/h}return!1},sj=function(d,h,m){var A=d.length;if(3>A)return!1;var P=[Number.MAX_SAFE_INTEGER,m];h=[h,m];for(var W=m=0;W<A;W++){var va=d[W],qa=d[(W+1)%A],Aa=va,La=qa,Ga=h,gb=P,ib=Rh(Aa,La,Ga),kb=Rh(Aa,La,gb),Kb=Rh(Ga,gb,Aa),Ib=Rh(Ga,gb,La);if(ib!==kb&&Kb!==Ib||0===ib&&$i(Aa,Ga,La)||0===kb&&$i(Aa,gb,La)||0===Kb&&$i(Ga,
Aa,gb)||0===Ib&&$i(Ga,La,gb)){if(0===Rh(va,h,qa))return $i(va,h,qa);m++}}return 1==m%2},$i=function(d,h,m){return h[0]<=Math.max(d[0],m[0])&&h[0]>=Math.min(d[0],m[0])&&h[1]<=Math.max(d[1],m[1])&&h[1]>=Math.min(d[1],m[1])},Rh=function(d,h,m){d=(h[1]-d[1])*(m[0]-h[0])-(h[0]-d[0])*(m[1]-h[1]);return 0===d?0:0<d?1:2},nh=function(d,h,m){return m?[Math.round(d/m)*m,Math.round(h/m)*m]:[d,h]},aj=function(d,h,m){var A=m.map(function(Aa){return Aa[d]}),P=Math.max.apply(Math,A);A=Math.min.apply(Math,A);P-=A;
var W=0===P?1:h/P,va=1/0;h=m.map(function(Aa){return Aa.map(function(La,Ga){if(Ga!==d)return La;La*=W;return va=Math.min(La,va),La})});if(2===h.length)return h;var qa=A-va;return h.map(function(Aa){return Aa.map(function(La,Ga){return Ga===d?La+qa:La})})},zf=function(d){return cg(d)?Il(d):[d.x,d.y,d.x+d.width,d.y+d.height]},Fi=function(d){for(var h=0,m=d.sets;h<m.length;h++){var A=m[h];if("path"===A.type)return A.ops}return d.sets[0].ops},sl=function(d,h){var m=[0,0];d=d.reduce(function(A,P){var W,
va=P.op;P=P.data;if("move"===va)m=P;else if("bcurveTo"===va){var qa=[P[0],P[1]],Aa=[P[2],P[3]],La=[P[4],P[5]],Ga=m;m=La;va=function(kb,Kb){return Math.pow(1-kb,3)*La[Kb]+3*kb*Math.pow(1-kb,2)*Aa[Kb]+3*Math.pow(kb,2)*(1-kb)*qa[Kb]+Ga[Kb]*Math.pow(kb,3)};for(P=0;1>=P;){var gb=va(P,0),ib=va(P,1);h&&(gb=(W=h(gb,ib))[0],ib=W[1]);A.minY=Math.min(A.minY,ib);A.minX=Math.min(A.minX,gb);A.maxX=Math.max(A.maxX,gb);A.maxY=Math.max(A.maxY,ib);P+=.1}}return A},{minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0});return[d.minX,
d.minY,d.maxX,d.maxY]},Il=function(d){if(2>d.points.length||!ni.get(d)){var h=d.points.reduce(function(m,A){var P=A[0];A=A[1];return m.minY=Math.min(m.minY,A),m.minX=Math.min(m.minX,P),m.maxX=Math.max(m.maxX,P),m.maxY=Math.max(m.maxY,A),m},{minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0});return[h.minX+d.x,h.minY+d.y,h.maxX+d.x,h.maxY+d.y]}h=ni.get(d);h=Fi(h[0]);h=sl(h);return[h[0]+d.x,h[1]+d.y,h[2]+d.x,h[3]+d.y]},ti=function(d){var h=zf(d),m=h[0],A=h[1],P=h[2],W=h[3];h=(m+P)/2;var va=(A+W)/2;if(cg(d))return function(gb,
ib,kb){if(2>gb.points.length||!ni.get(gb)){var Kb=gb.points.reduce(function(Ib,mc){var Sc,Yc=mc[0];mc=mc[1];return Yc=(Sc=xf(gb.x+Yc,gb.y+mc,ib,kb,gb.angle))[0],mc=Sc[1],Ib.minY=Math.min(Ib.minY,mc),Ib.minX=Math.min(Ib.minX,Yc),Ib.maxX=Math.max(Ib.maxX,Yc),Ib.maxY=Math.max(Ib.maxY,mc),Ib},{minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0});return[Kb.minX,Kb.minY,Kb.maxX,Kb.maxY]}Kb=ni.get(gb);Kb=Fi(Kb[0]);return sl(Kb,function(Ib,mc){return xf(gb.x+Ib,gb.y+mc,ib,kb,gb.angle)})}(d,h,va);if("diamond"===d.type){A=
xf(h,A,h,va,d.angle);var qa=A[0];A=A[1];W=xf(h,W,h,va,d.angle);var Aa=W[0];W=W[1];var La=xf(m,va,h,va,d.angle);m=La[0];La=La[1];va=xf(P,va,h,va,d.angle);h=va[0];va=va[1];return[Math.min(qa,Aa,m,h),Math.min(A,W,La,va),Math.max(qa,Aa,m,h),Math.max(A,W,La,va)]}if("ellipse"===d.type)return P=(P-m)/2,qa=(W-A)/2,A=Math.cos(d.angle),Aa=Math.sin(d.angle),d=Math.hypot(P*A,qa*Aa),P=Math.hypot(qa*A,P*Aa),[h-d,va-P,h+d,va+P];Aa=xf(m,A,h,va,d.angle);qa=Aa[0];Aa=Aa[1];La=xf(m,W,h,va,d.angle);m=La[0];La=La[1];var Ga=
xf(P,W,h,va,d.angle);W=Ga[0];Ga=Ga[1];va=xf(P,A,h,va,d.angle);h=va[0];va=va[1];return[Math.min(qa,m,W,h),Math.min(Aa,La,Ga,va),Math.max(qa,m,W,h),Math.max(Aa,La,Ga,va)]},pg=function(d){if(!d.length)return[0,0,0,0];var h=1/0,m=-1/0,A=1/0,P=-1/0;return d.forEach(function(W){W=ti(W);var va=W[1],qa=W[2],Aa=W[3];h=Math.min(h,W[0]);A=Math.min(A,va);m=Math.max(m,qa);P=Math.max(P,Aa)}),[h,A,m,P]},Rf=function(d,h,m){if(!cg(d))return[d.x,d.y,d.x+h,d.y+m];h=aj(0,h,aj(1,m,d.points));m=Di.generator();h="sharp"===
d.strokeSharpness?m.linearPath(h,Og(d)):m.curve(h,Og(d));h=Fi(h);h=sl(h);return[h[0]+d.x,h[1]+d.y,h[2]+d.x,h[3]+d.y]},Td=function(d,h,m){var A=Di.generator();h="sharp"===m?A.linearPath(h,Og(d)):A.curve(h,Og(d));h=Fi(h);h=sl(h);return[h[0]+d.x,h[1]+d.y,h[2]+d.x,h[3]+d.y]};const ne=JSON.parse('{"ix":"#ffffff","Sn":"#000000","MA":["#f8f9fa","#f1f3f5",0,0,"#ced4da","#adb5bd","#868e96","#495057","#343a40"],"Q6":["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],"iQ":["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],"pl":["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],"ht":["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],"QN":["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],"iN":["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],"sl":["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],"$C":["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],"ek":["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],"LR":["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],"er":["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],"$y":["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]}');
var $g=function(d,h){for(var m=0,A=h.length,P=d.length;m<A;m++,P++)d[P]=h[m];return d},cf=function(d){return[ne.Q6[d],ne.iQ[d],ne.pl[d],ne.ht[d],ne.QN[d],ne.iN[d],ne.sl[d],ne.$C[d],ne.ek[d],ne.LR[d],ne.er[d],ne.$y[d]]};const uj={canvasBackground:$g([ne.ix,ne.MA[0],ne.MA[1]],cf(0)),elementBackground:$g(["transparent",ne.MA[4],ne.MA[6]],cf(6)),elementStroke:$g([ne.Sn,ne.MA[8],ne.MA[7]],cf(9))};var ag=g(6207),ui=/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),ai=/^Win/.test(window.navigator.platform),
xe=ui?"metaKey":"ctrlKey",Mj=function(d){return"ArrowLeft"===d||"ArrowRight"===d||"ArrowDown"===d||"ArrowUp"===d},vj=function(d){return d.charAt(0).toUpperCase()+d.slice(1)},ah=function(d){return d instanceof HTMLElement&&"wysiwyg"===d.dataset.type||d instanceof HTMLBRElement||d instanceof HTMLTextAreaElement||d instanceof HTMLInputElement&&("text"===d.type||"number"===d.type)},dg=function(d){var h=d.fontFamily;return"".concat(d.fontSize,"px ").concat("".concat(Na.ut[h],", ").concat(Na._D))},wj=function(d,
h){var m=document.createElement("div"),A=document.body;m.style.position="absolute";m.style.whiteSpace="pre";m.style.font=h;A.appendChild(m);m.innerText=d.split("\n").map(function(P){return P||" "}).join("\n");d=m.offsetWidth;h=m.offsetHeight;A=document.createElement("span");A.style.display="inline-block";A.style.overflow="hidden";A.style.width="1px";A.style.height="1px";m.appendChild(A);A=A.offsetTop+A.offsetHeight;return document.body.removeChild(m),{width:d,height:h,baseline:A}},bj=function(d,h){var m,
A=0,P=function(){for(var W=[],va=0;va<arguments.length;va++)W[va]=arguments[va];m=W;clearTimeout(A);A=window.setTimeout(function(){return d.apply(void 0,W)},h)};return P.flush=function(){clearTimeout(A);m&&d.apply(void 0,m)},P.cancel=function(){clearTimeout(A)},P},bi=function(d){d&&(d.style.cursor="")},Ef=function(d,h){d&&(d.style.cursor=h)},ug=function(d,h){d&&("selection"===h?bi(d):d.style.cursor=Na.oc.CROSSHAIR)},Ug=function(){var d;return"HTML"===(null===(d=document.fullscreenElement)||void 0===
d?void 0:d.nodeName)},Ed=function(d){return d=d.replace(/\bAlt\b/i,"Alt").replace(/\bShift\b/i,"Shift").replace(/\b(Enter|Return)\b/i,"Enter").replace(/\bDel\b/i,"Delete"),ui?d.replace(/\bCtrlOrCmd\b/i,"Cmd").replace(/\bAlt\b/i,"Option"):d.replace(/\bCtrlOrCmd\b/i,"Ctrl")},Kf=function(d,h){var m=h.zoom,A=1/m.value;return{x:(d.clientX-m.translation.x-h.offsetLeft)*A-h.scrollX,y:(d.clientY-m.translation.y-h.offsetTop)*A-h.scrollY}},hh=function(d,h){var m=h.zoom;return{x:(d.sceneX+h.scrollX+h.offsetLeft)*
m.value+m.translation.x,y:(d.sceneY+h.scrollY+h.offsetTop)*m.value+m.translation.y}},Lf=function(d){return getComputedStyle(document.documentElement).getPropertyValue("--".concat(d))},gl=new RegExp("^[^".concat("A-Za-zÀ-ÖØ-öø-ʸ̀-֐ࠀ-῿Ⰰ-﬜﷾-﹯﻽-￿","]*[").concat("֑-߿יִ-﷽ﹰ-ﻼ","]")),Oi=function(d){return{x:d[0],y:d[1]}},Eh=function(d){if("AbortError"!==(null==d?void 0:d.name))throw d;},se=function(d){return function(h){(0,ag.unstable_batchedUpdates)(d,h)}},Fh=function(d,h){var m,A=[{value:1,symbol:"b"},{value:1E3,
symbol:"k"},{value:1E6,symbol:"M"},{value:1E9,symbol:"G"}];for(m=A.length-1;0<m&&!(d>=A[m].value);m--);return(d/A[m].value).toFixed(h).replace(/\.0+$|(\.[0-9]*[1-9])0+$/,"$1")+A[m].symbol},ci=function(){var d;return(null===(d=document.querySelector('meta[name\x3d"version"]'))||void 0===d?void 0:d.content)||Na.eQ},kg=function(){var d=new Map,h=Na.rk,m=Na.n5,A=ne.Sn,P=Na.Hg,W=window.innerHeight,va="".concat(Jb("labels.untitled"),"-"),qa=va.concat;var Aa=new Date;var La=Aa.getFullYear();var Ga="".concat(Aa.getMonth()+
1).padStart(2,"0"),gb="".concat(Aa.getDate()).padStart(2,"0"),ib="".concat(Aa.getHours()).padStart(2,"0");Aa="".concat(Aa.getMinutes()).padStart(2,"0");La="".concat(La,"-").concat(Ga,"-").concat(gb,"-").concat(ib).concat(Aa);return{appearance:"light",collaborators:d,currentChartType:"bar",currentItemBackgroundColor:"transparent",currentItemEndArrowhead:"arrow",currentItemFillStyle:"hachure",currentItemFontFamily:h,currentItemFontSize:m,currentItemLinearStrokeSharpness:"round",currentItemOpacity:100,
currentItemRoughness:1,currentItemStartArrowhead:null,currentItemStrokeColor:A,currentItemStrokeSharpness:"sharp",currentItemStrokeStyle:"solid",currentItemStrokeWidth:1,currentItemTextAlign:P,cursorButton:"up",draggingElement:null,editingElement:null,editingGroupId:null,editingLinearElement:null,elementLocked:!1,elementType:"selection",errorMessage:null,exportBackground:!0,exportEmbedScene:!1,exportWithDarkMode:!1,fileHandle:null,gridSize:null,height:W,isBindingEnabled:!0,isLibraryOpen:!1,isLoading:!1,
isResizing:!1,isRotating:!1,lastPointerDownWith:"mouse",multiElement:null,name:qa.call(va,La),openMenu:null,pasteDialog:{shown:!1,data:null},previousSelectedElementIds:{},resizingElement:null,scrolledOutside:!1,scrollX:0,scrollY:0,selectedElementIds:{},selectedGroupIds:{},selectionElement:null,shouldAddWatermark:!1,shouldCacheIgnoreZoom:!1,showHelpDialog:!1,showStats:!1,startBoundElement:null,suggestedBindings:[],toastMessage:null,viewBackgroundColor:ne.ix,width:window.innerWidth,zenModeEnabled:!1,
zoom:{value:1,translation:{x:0,y:0}},viewModeEnabled:!1}},Vg={appearance:{browser:!0,export:!1},collaborators:{browser:!1,export:!1},currentChartType:{browser:!0,export:!1},currentItemBackgroundColor:{browser:!0,export:!1},currentItemEndArrowhead:{browser:!0,export:!1},currentItemFillStyle:{browser:!0,export:!1},currentItemFontFamily:{browser:!0,export:!1},currentItemFontSize:{browser:!0,export:!1},currentItemLinearStrokeSharpness:{browser:!0,export:!1},currentItemOpacity:{browser:!0,export:!1},currentItemRoughness:{browser:!0,
export:!1},currentItemStartArrowhead:{browser:!0,export:!1},currentItemStrokeColor:{browser:!0,export:!1},currentItemStrokeSharpness:{browser:!0,export:!1},currentItemStrokeStyle:{browser:!0,export:!1},currentItemStrokeWidth:{browser:!0,export:!1},currentItemTextAlign:{browser:!0,export:!1},cursorButton:{browser:!0,export:!1},draggingElement:{browser:!1,export:!1},editingElement:{browser:!1,export:!1},editingGroupId:{browser:!0,export:!1},editingLinearElement:{browser:!1,export:!1},elementLocked:{browser:!0,
export:!1},elementType:{browser:!0,export:!1},errorMessage:{browser:!1,export:!1},exportBackground:{browser:!0,export:!1},exportEmbedScene:{browser:!0,export:!1},exportWithDarkMode:{browser:!0,export:!1},fileHandle:{browser:!1,export:!1},gridSize:{browser:!0,export:!0},height:{browser:!1,export:!1},isBindingEnabled:{browser:!1,export:!1},isLibraryOpen:{browser:!1,export:!1},isLoading:{browser:!1,export:!1},isResizing:{browser:!1,export:!1},isRotating:{browser:!1,export:!1},lastPointerDownWith:{browser:!0,
export:!1},multiElement:{browser:!1,export:!1},name:{browser:!0,export:!1},offsetLeft:{browser:!1,export:!1},offsetTop:{browser:!1,export:!1},openMenu:{browser:!0,export:!1},pasteDialog:{browser:!1,export:!1},previousSelectedElementIds:{browser:!0,export:!1},resizingElement:{browser:!1,export:!1},scrolledOutside:{browser:!0,export:!1},scrollX:{browser:!0,export:!1},scrollY:{browser:!0,export:!1},selectedElementIds:{browser:!0,export:!1},selectedGroupIds:{browser:!0,export:!1},selectionElement:{browser:!1,
export:!1},shouldAddWatermark:{browser:!0,export:!1},shouldCacheIgnoreZoom:{browser:!0,export:!1},showHelpDialog:{browser:!1,export:!1},showStats:{browser:!0,export:!1},startBoundElement:{browser:!1,export:!1},suggestedBindings:{browser:!1,export:!1},toastMessage:{browser:!1,export:!1},viewBackgroundColor:{browser:!0,export:!0},width:{browser:!1,export:!1},zenModeEnabled:{browser:!0,export:!1},zoom:{browser:!0,export:!1},viewModeEnabled:{browser:!1,export:!1}},cn=function(d,h){for(var m={},A=0,P=
Object.keys(d);A<P.length;A++){var W=P[A],va=Vg[W];null!=va&&va[h]&&(m[W]=d[W])}return m},Jl=kg(),Hk=[12,8],Kl=[3,6],im=function(d,h,m){switch(m.globalAlpha=d.opacity/100,d.type){case "rectangle":case "diamond":case "ellipse":h.draw(ni.get(d));break;case "arrow":case "draw":case "line":ni.get(d).forEach(function(gb){h.draw(gb)});break;default:if(!og(d))throw Error("Unimplemented type ".concat(d.type));var A=gl.test(d.text),P=A&&!m.canvas.isConnected;P&&document.body.appendChild(m.canvas);m.canvas.setAttribute("dir",
A?"rtl":"ltr");A=m.font;m.font=dg(d);var W=m.fillStyle;m.fillStyle=d.strokeColor;var va=m.textAlign;m.textAlign=d.textAlign;var qa=d.text.replace(/\r\n?/g,"\n").split("\n"),Aa=d.height/qa.length,La=d.height-d.baseline;d="center"===d.textAlign?d.width/2:"right"===d.textAlign?d.width:0;for(var Ga=0;Ga<qa.length;Ga++)m.fillText(qa[Ga],d,(Ga+1)*Aa-La);m.fillStyle=W;m.font=A;m.textAlign=va;P&&m.canvas.remove()}m.globalAlpha=1},hm=new WeakMap,ni=new WeakMap,Og=function(d){var h={seed:d.seed,strokeLineDash:"dashed"===
d.strokeStyle?Hk:"dotted"===d.strokeStyle?Kl:void 0,disableMultiStroke:"solid"!==d.strokeStyle,strokeWidth:"solid"!==d.strokeStyle?d.strokeWidth+.5:d.strokeWidth,fillWeight:d.strokeWidth/2,hachureGap:4*d.strokeWidth,roughness:d.roughness,stroke:d.strokeColor};switch(d.type){case "rectangle":case "diamond":case "ellipse":return h.fillStyle=d.fillStyle,h.fill="transparent"===d.backgroundColor?void 0:d.backgroundColor,"ellipse"===d.type&&(h.curveFitting=1),h;case "line":case "draw":return mi(d.points)&&
(h.fillStyle=d.fillStyle,h.fill="transparent"===d.backgroundColor?void 0:d.backgroundColor),h;case "arrow":return h;default:throw Error("Unimplemented type ".concat(d.type));}},Ik=function(d,h){var m=ni.get(d)||null;if(!m){switch(hm.delete(d),d.type){case "rectangle":if("round"===d.strokeSharpness){m=d.width;var A=d.height,P=.25*Math.min(m,A);m=h.path("M ".concat(P," 0 L ").concat(m-P," 0 Q ").concat(m," 0, ").concat(m," ").concat(P," L ").concat(m," ").concat(A-P," Q ").concat(m," ").concat(A,", ").concat(m-
P," ").concat(A," L ").concat(P," ").concat(A," Q 0 ").concat(A,", 0 ").concat(A-P," L 0 ").concat(P," Q 0 0, ").concat(P," 0"),Og(d))}else m=h.rectangle(0,0,d.width,d.height,Og(d));break;case "diamond":m=function(va){var qa=Math.floor(va.width/2)+1,Aa=Math.floor(va.height/2)+1;return[qa,0,va.width,Aa,qa,va.height,0,Aa]}(d);m=h.polygon([[m[0],m[1]],[m[2],m[3]],[m[4],m[5]],[m[6],m[7]]],Og(d));break;case "ellipse":m=h.ellipse(d.width/2,d.height/2,d.width,d.height,Og(d));break;case "line":case "draw":case "arrow":var W=
Og(d);m=d.points.length?d.points:[[0,0]];if(m="sharp"===d.strokeSharpness?W.fill?[h.polygon(m,W)]:[h.linearPath(m,W)]:[h.curve(m,W)],"arrow"===d.type){A=d.startArrowhead;A=void 0===A?null:A;P=d.endArrowhead;P=void 0===P?"arrow":P;function va(qa,Aa,La,Ga){Aa=function(Kb,Ib,mc,Sc){Ib=Fi(Ib[0]);if(1>Ib.length)return null;var Yc="start"===mc?1:Ib.length-1,kd=Ib[Yc].data,ke=[kd[4],kd[5]],ie=[kd[2],kd[3]],De=[kd[0],kd[1]];Ib=Ib[Yc-1];var qe=[0,0];"move"===Ib.op?qe=Ib.data:"bcurveTo"===Ib.op&&(qe=[Ib.data[4],
Ib.data[5]]);Yc=function(md,Fd){return Math.pow(1-md,3)*ke[Fd]+3*md*Math.pow(1-md,2)*ie[Fd]+3*Math.pow(md,2)*(1-md)*De[Fd]+qe[Fd]*Math.pow(md,3)};Ib="start"===mc?qe:ke;mc=Ib[0];Ib=Ib[1];kd=[Yc(.3,0),Yc(.3,1)];Yc=kd[0];kd=kd[1];var Re=Math.hypot(mc-Yc,Ib-kd);Yc=(mc-Yc)/Re;kd=(Ib-kd)/Re;Re={arrow:30,bar:15,dot:15}[Sc];Kb=Kb.points.reduce(function(md,Fd,Ud,Ee){Ud=0<Ud?Ee[Ud-1]:[0,0];return md+Math.hypot(Fd[0]-Ud[0],Fd[1]-Ud[1])},0);Re=Math.min(Re,Kb/2);Kb=mc-Yc*Re;Yc=Ib-kd*Re;if("dot"===Sc)return[mc,
Ib,Math.hypot(Yc-Ib,Kb-mc)];kd={arrow:20,bar:90}[Sc];Re=xf(Kb,Yc,mc,Ib,-kd*Math.PI/180);Sc=Re[0];Re=Re[1];Kb=xf(Kb,Yc,mc,Ib,kd*Math.PI/180);return[mc,Ib,Sc,Re,Kb[0],Kb[1]]}(qa,Aa,La,Ga);if(null===Aa)return[];if("dot"===Ga)return[h.circle(Aa[0],Aa[1],Aa[2],Eb(Eb({},W),{},{fill:qa.strokeColor,fillStyle:"solid"}))];Ga=Aa[0];La=Aa[1];var gb=Aa[2],ib=Aa[3],kb=Aa[4];Aa=Aa[5];return"dotted"===qa.strokeStyle?W.strokeLineDash=[3,4]:delete W.strokeLineDash,[h.line(gb,ib,Ga,La,W),h.line(kb,Aa,Ga,La,W)]}null!==
A&&(A=va(d,m,"start",A),m.push.apply(m,A));null!==P&&(A=va(d,m,"end",P),m.push.apply(m,A))}break;case "text":m=[]}ni.set(d,m)}},tl=function(d,h,m,A,P){var W=h.generator;switch(d.type){case "selection":m.translate(d.x+P.scrollX,d.y+P.scrollY);h=m.fillStyle;m.fillStyle="rgba(0, 0, 255, 0.10)";m.fillRect(0,0,d.width,d.height);m.fillStyle=h;m.translate(-d.x-P.scrollX,-d.y-P.scrollY);break;case "rectangle":case "diamond":case "ellipse":case "line":case "draw":case "arrow":case "text":if(Ik(d,W),A){h=P?
P.zoom:Jl.zoom;W=(A=hm.get(d))&&A.canvasZoom!==h.value&&!(null!=P&&P.shouldCacheIgnoreZoom);if(!A||W){A=document.createElement("canvas");W=A.getContext("2d");var va=0,qa=0;if(cg(d)){va=zf(d);var Aa=va[0];qa=va[1];var La=va[3];A.width=Math.abs(Aa-va[2])*window.devicePixelRatio*h.value+40*h.value;A.height=Math.abs(qa-La)*window.devicePixelRatio*h.value+40*h.value;va=d.x>Aa?Math.floor(Math.abs(d.x-Aa))*window.devicePixelRatio*h.value:0;qa=d.y>qa?Math.floor(Math.abs(d.y-qa))*window.devicePixelRatio*h.value:
0;W.translate(va,qa)}else A.width=d.width*window.devicePixelRatio*h.value+40*h.value,A.height=d.height*window.devicePixelRatio*h.value+40*h.value;W.translate(20*h.value,20*h.value);W.scale(window.devicePixelRatio*h.value,window.devicePixelRatio*h.value);Aa=Di.canvas(A);h=(im(d,Aa,W),W.translate(-20*h.value,-20*h.value),W.scale(1/(window.devicePixelRatio*h.value),1/(window.devicePixelRatio*h.value)),{element:d,canvas:A,canvasZoom:h.value,canvasOffsetX:va,canvasOffsetY:qa});d=(hm.set(d,h),h)}else d=
A;h=d.element;va=zf(h);A=va[0];W=va[1];qa=va[2];va=va[3];Aa=((A+qa)/2+P.scrollX)*window.devicePixelRatio;P=((W+va)/2+P.scrollY)*window.devicePixelRatio;m.scale(1/window.devicePixelRatio,1/window.devicePixelRatio);m.translate(Aa,P);m.rotate(h.angle);m.drawImage(d.canvas,-(qa-A)/2*window.devicePixelRatio-20*d.canvasZoom/d.canvasZoom,-(va-W)/2*window.devicePixelRatio-20*d.canvasZoom/d.canvasZoom,d.canvas.width/d.canvasZoom,d.canvas.height/d.canvasZoom);m.rotate(-h.angle);m.translate(-Aa,-P);m.scale(window.devicePixelRatio,
window.devicePixelRatio);!0}else W=zf(d),qa=W[0],A=W[1],va=W[2],Aa=W[3],W=(qa+va)/2+P.scrollX,P=(A+Aa)/2+P.scrollY,qa=(va-qa)/2-(d.x-qa),A=(Aa-A)/2-(d.y-A),m.translate(W,P),m.rotate(d.angle),m.translate(-qa,-A),im(d,h,m),m.translate(qa,A),m.rotate(-d.angle),m.translate(-W,-P);break;default:throw Error("Unimplemented type ".concat(d.type));}},ch=function(){function d(){this.callbacks=new Set;this.nonDeletedElements=[];this.elements=[];this.elementsMap=new Map}return d.mapElementToScene=function(h,
m){"string"==typeof h?this.sceneMapById.set(h,m):this.sceneMapByElement.set(h,m)},d.getScene=function(h){return"string"==typeof h?this.sceneMapById.get(h)||null:this.sceneMapByElement.get(h)||null},d.prototype.getElementsIncludingDeleted=function(){return this.elements},d.prototype.getElements=function(){return this.nonDeletedElements},d.prototype.getElement=function(h){return this.elementsMap.get(h)||null},d.prototype.getNonDeletedElement=function(h){return(h=this.getElement(h))&&!h.isDeleted?h:
null},d.prototype.getNonDeletedElements=function(h){var m=this,A=[];return h.forEach(function(P){P=m.getNonDeletedElement(P);null!=P&&A.push(P)}),A},d.prototype.replaceAllElements=function(h){var m=this;this.elements=h;this.elementsMap.clear();h.forEach(function(A){m.elementsMap.set(A.id,A);d.mapElementToScene(A,m)});this.nonDeletedElements=Rd(this.elements);this.informMutation()},d.prototype.informMutation=function(){for(var h=0,m=Array.from(this.callbacks);h<m.length;h++)(0,m[h])()},d.prototype.addCallback=
function(h){var m=this;if(this.callbacks.has(h))throw Error();return this.callbacks.add(h),function(){if(!m.callbacks.has(h))throw Error();m.callbacks.delete(h)}},d.prototype.destroy=function(){var h=this;d.sceneMapById.forEach(function(m,A){m===h&&d.sceneMapById.delete(A)});this.callbacks.clear()},d}();ch.sceneMapByElement=new WeakMap;ch.sceneMapById=new Map;var bg=new fl(Date.now()),dj=function(){return Math.floor(bg.next()*Math.pow(2,31))},gf=function(){return((d=21)=>{let h="",m=crypto.getRandomValues(new Uint8Array(d));
for(;d--;){let A=63&m[d];h+=36>A?A.toString(36):62>A?(A-26).toString(36).toUpperCase():63>A?"_":"-"}return h})()},pe=function(d,h){var m,A=!1,P=h.points,W;for(W in void 0!==P&&(h=fb(fb({},function(kb){var Kb=kb.map(function(Ib){return Ib[0]});kb=kb.map(function(Ib){return Ib[1]});return{width:Math.max.apply(Math,Kb)-Math.min.apply(Math,Kb),height:Math.max.apply(Math,kb)-Math.min.apply(Math,kb)}}(P)),h)),h){var va=h[W];if(void 0!==va&&(d[W]!==va||"object"==typeof va&&null!==va&&"groupIds"!==W)){if("points"===
W){var qa=d[W],Aa=va;if(qa.length===Aa.length){for(var La=!1,Ga=qa.length;--Ga;){var gb=qa[Ga],ib=Aa[Ga];if(gb[0]!==ib[0]||gb[1]!==ib[1]){La=!0;break}}if(!La)continue}}d[W]=va;A=!0}}A&&(void 0===h.height&&void 0===h.width&&void 0===P||ni.delete(d),d.version++,d.versionNonce=dj(),null===(m=ch.getScene(d))||void 0===m||m.informMutation())},vg=function(d,h){return fb(fb(fb({},d),h),{},{version:d.version+1,versionNonce:dj()})},Gh=function(d){return cg(d)?2>d.points.length:0===d.width&&0===d.height},lg=
function(d,h,m){var A=Math.abs(h),P=Math.abs(m);"line"===d||"arrow"===d||"draw"===d?(d=Math.round(Math.atan(P/A)/Na.ay)*Na.ay,0===d?m=0:d===Math.PI/2?h=0:m=Math.round(A*Math.tan(d))*Math.sign(m)||m):"selection"!==d&&(m=A*Math.sign(m));return{width:h,height:m}},ej=function(d){var h={width:d.width,height:d.height,x:d.x,y:d.y};if(0>d.width){var m=Math.abs(d.width);h.width=m;h.x=d.x-m}0>d.height&&(m=Math.abs(d.height),h.height=m,h.y=d.y-m);return h},Qi=g(5474),Lk=g.n(Qi),qk=function(d,h){for(var m=0,
A=h.length,P=d.length;m<A;m++,P++)d[P]=h[m];return d},rk=function(d,h,m){var A,P;m=m.filter(function(W){return W.groupIds.includes(d)});return 2>m.length?h.selectedGroupIds[d]||h.editingGroupId===d?Ka(Ka({},h),{},{selectedGroupIds:Ka(Ka({},h.selectedGroupIds),{},(A={},A[d]=!1,A)),editingGroupId:null}):h:Ka(Ka({},h),{},{selectedGroupIds:Ka(Ka({},h.selectedGroupIds),{},(P={},P[d]=!0,P)),selectedElementIds:Ka(Ka({},h.selectedElementIds),Object.fromEntries(m.map(function(W){return[W.id,!0]})))})},Hh=
function(d,h){return h.groupIds.filter(function(m){return m!==d.editingGroupId}).find(function(m){return d.selectedGroupIds[m]})},sk=function(d){return Object.entries(d.selectedGroupIds).filter(function(h){h[0];return h[1]}).map(function(h){var m=h[0];h[1];return m})},Je=function(d,h){for(var m=Ka({},d),A=0,P=We(h,d);A<P.length;A++){var W=P[A].groupIds;if(d.editingGroupId){var va=W.indexOf(d.editingGroupId);-1<va&&(W=W.slice(0,va))}0<W.length&&(m=rk(W[W.length-1],m,h))}return m},Pj=function(d,h){return d.filter(function(m){return m.groupIds.includes(h)})},
uk=function(d,h){var m,A,P=h.x,W=h.y,va=h.strokeColor,qa=h.backgroundColor,Aa=h.fillStyle,La=h.strokeWidth,Ga=h.strokeStyle,gb=h.roughness,ib=h.opacity,kb=h.width;kb=void 0===kb?0:kb;var Kb=h.height;Kb=void 0===Kb?0:Kb;var Ib=h.angle;Ib=void 0===Ib?0:Ib;var mc=h.groupIds;mc=void 0===mc?[]:mc;var Sc=h.strokeSharpness,Yc=h.boundElementIds;Yc=void 0===Yc?null:Yc;h=Lk()(h,"x y strokeColor backgroundColor fillStyle strokeWidth strokeStyle roughness opacity width height angle groupIds strokeSharpness boundElementIds".split(" "));
return{id:h.id||gf(),type:d,x:P,y:W,width:kb,height:Kb,angle:Ib,strokeColor:va,backgroundColor:qa,fillStyle:Aa,strokeWidth:La,strokeStyle:Ga,roughness:gb,opacity:ib,groupIds:mc,strokeSharpness:Sc,seed:null!==(m=h.seed)&&void 0!==m?m:dj(),version:h.version||1,versionNonce:null!==(A=h.versionNonce)&&void 0!==A?A:0,isDeleted:!1,boundElementIds:Yc}},Ll=function(d){return uk(d.type,d)},Ri=function(d,h){return{x:"center"===d.textAlign?h.width/2:"right"===d.textAlign?h.width:0,y:"middle"===d.verticalAlign?
h.height/2:0}},hj=function(d){var h=wj(d.text,dg(d)),m=Ri(d,h);return vg(Ca(Ca({},uk("text",d)),{},{text:d.text,fontSize:d.fontSize,fontFamily:d.fontFamily,textAlign:d.textAlign,verticalAlign:d.verticalAlign,x:d.x-m.x,y:d.y-m.y,width:h.width,height:h.height,baseline:h.baseline}),{})},Th=function(d){return Ca(Ca({},uk(d.type,d)),{},{points:d.points||[],lastCommittedPoint:null,startBinding:null,endBinding:null,startArrowhead:d.startArrowhead,endArrowhead:d.endArrowhead})},Qj=function(d,h){if(void 0===
h&&(h=0),null==d||"object"!=typeof d)return d;if("[object Object]"===Object.prototype.toString.call(d)){var m="function"==typeof d.constructor?Object.create(Object.getPrototypeOf(d)):{},A;for(A in d)d.hasOwnProperty(A)&&(0!==h||"shape"!==A&&"canvas"!==A)&&(m[A]=Qj(d[A],h+1));return m}if(Array.isArray(d)){m=d.length;for(A=Array(m);m--;)A[m]=Qj(d[m],h+1);return A}return d},Hi=function(d,h,m,A){m=Qj(m);return m.id=gf(),m.seed=dj(),m.groupIds=function(P,W,va){var qa=qk([],P);W=W?P.indexOf(W):-1;P=-1<
W?W:P.length;for(W=0;W<P;W++)qa[W]=va(qa[W]);return qa}(m.groupIds,d,function(P){return h.has(P)||h.set(P,gf()),h.get(P)}),A&&(m=Object.assign(m,A)),m},Ce={mouse:8,pen:16,touch:28},ul={e:!0,s:!0,n:!0,w:!0},Fm={e:!0,s:!0,n:!0,w:!0},Rj={e:!0,s:!0,n:!0,w:!0,nw:!0,se:!0},Si={e:!0,s:!0,n:!0,w:!0,ne:!0,sw:!0},bh=function(d,h,m,A,P,W,va){d=xf(d+m/2,h+A/2,P,W,va);return[d[0]-m/2,d[1]-A/2,m,A]},pk=function(d,h,m,A,P){var W=d[0],va=d[1],qa=d[2];d=d[3];void 0===P&&(P={});var Aa=Ce[A];A=Aa/m.value;var La=Aa/
m.value,Ga=Aa/m.value,gb=Aa/m.value,ib=qa-W,kb=d-va,Kb=(W+qa)/2,Ib=(va+d)/2,mc=4/m.value;Aa=(Aa-8)/(2*m.value);var Sc={nw:P.nw?void 0:bh(W-mc-Ga+Aa,va-mc-gb+Aa,A,La,Kb,Ib,h),ne:P.ne?void 0:bh(qa+mc-Aa,va-mc-gb+Aa,A,La,Kb,Ib,h),sw:P.sw?void 0:bh(W-mc-Ga+Aa,d+mc-Aa,A,La,Kb,Ib,h),se:P.se?void 0:bh(qa+mc-Aa,d+mc-Aa,A,La,Kb,Ib,h),rotation:P.rotation?void 0:bh(W+ib/2-A/2,va-mc-gb+Aa-16/m.value,A,La,Kb,Ib,h)};m=5*Ce.mouse/m.value;return Math.abs(ib)>m&&(P.n||(Sc.n=bh(W+ib/2-A/2,va-mc-gb+Aa,A,La,Kb,Ib,h)),
P.s||(Sc.s=bh(W+ib/2-A/2,d+mc-Aa,A,La,Kb,Ib,h))),Math.abs(kb)>m&&(P.w||(Sc.w=bh(W-mc-Ga+Aa,va+kb/2-La/2,A,La,Kb,Ib,h)),P.e||(Sc.e=bh(qa+mc-Aa,va+kb/2-La/2,A,La,Kb,Ib,h))),Sc},cj=function(d,h,m){void 0===m&&(m="mouse");var A={};if("arrow"===d.type||"line"===d.type||"draw"===d.type){if(2===d.points.length){var P=d.points[1];0===P[0]||0===P[1]?A=Si:0<P[0]&&0>P[1]?A=Rj:0<P[0]&&0<P[1]?A=Si:0>P[0]&&0<P[1]?A=Rj:0>P[0]&&0>P[1]&&(A=Si)}}else"text"===d.type&&(A=Fm);return pk(zf(d),d.angle,h,m,A)},ei=function(d,
h){return[0,0,0,0,h,d,1,0]},Pg=function(d,h){void 0===d&&(d=0);void 0===h&&(h=0);var m=[0,0,0,0,0,0,0,0];if(0>h||7<h)throw Error("Expected `index` betwen 0 and 7, got `".concat(h,"`"));return 0!==d&&(m[h]=d),m},Jh=function(d){return[d[0],d[1],d[2],d[3],-d[4],-d[5],-d[6],-d[7]]},hl=function(d,h){return"number"==typeof h?[d[0]-h,d[1],d[2],d[3],d[4],d[5],d[6],d[7]]:[d[0]-h[0],d[1]-h[1],d[2]-h[2],d[3]-h[3],d[4]-h[4],d[5]-h[5],d[6]-h[6],d[7]-h[7]]},vk=function(d,h){return"number"==typeof h?[d[0]*h,d[1]*
h,d[2]*h,d[3]*h,d[4]*h,d[5]*h,d[6]*h,d[7]*h]:[h[0]*d[0]+h[2]*d[2]+h[3]*d[3]-h[6]*d[6],h[1]*d[0]+h[0]*d[1]-h[4]*d[2]+h[5]*d[3]+h[2]*d[4]-h[3]*d[5]-h[7]*d[6]-h[6]*d[7],h[2]*d[0]+h[0]*d[2]-h[6]*d[3]+h[3]*d[6],h[3]*d[0]+h[6]*d[2]+h[0]*d[3]-h[2]*d[6],h[4]*d[0]+h[2]*d[1]-h[1]*d[2]+h[7]*d[3]+h[0]*d[4]+h[6]*d[5]-h[5]*d[6]+h[3]*d[7],h[5]*d[0]-h[3]*d[1]+h[7]*d[2]+h[1]*d[3]-h[6]*d[4]+h[0]*d[5]+h[4]*d[6]+h[2]*d[7],h[6]*d[0]+h[3]*d[2]-h[2]*d[3]+h[0]*d[6],h[7]*d[0]+h[6]*d[1]+h[5]*d[2]+h[4]*d[3]+h[3]*d[4]+h[2]*
d[5]+h[1]*d[6]+h[0]*d[7]]},zj=function(d,h){return[Aj(d,h),d[1]*h[7]+d[4]*h[5]-d[5]*h[4]+d[7]*h[1],d[2]*h[7]-d[4]*h[6]+d[6]*h[4]+d[7]*h[2],d[3]*h[7]+d[5]*h[6]-d[6]*h[5]+d[7]*h[3],d[4]*h[7]+d[7]*h[4],d[5]*h[7]+d[7]*h[5],d[6]*h[7]+d[7]*h[6],d[7]*h[7]]},Aj=function(d,h){return d[0]*h[7]+d[1]*h[6]+d[2]*h[5]+d[3]*h[4]+d[4]*h[3]+d[5]*h[2]+d[6]*h[1]+d[7]*h[0]},Ml=function(d){return Math.sqrt(Math.abs(d[0]*d[0]-d[2]*d[2]-d[3]*d[3]+d[6]*d[6]))},Gi=function(d){var h=Ml(d);return 0===h||1===h?d:vk(d,(0>d[6]?
-1:1)/h)},Kk=(Pg(1,1),Pg(1,2),Pg(1,3),Pg(1,4),Pg(1,5),Pg(1,6),Pg(1,7),function(d,h,m){return Gi([0,m,d,h,0,0,0,0])}),yj=function(d,h){return m=d,[(A=h)[0]*m[0]+A[2]*m[2]+A[3]*m[3]-A[6]*m[6],A[1]*m[0]+A[0]*m[1]-A[4]*m[2]+A[5]*m[3]+A[2]*m[4]-A[3]*m[5]-A[7]*m[6]-A[6]*m[7],A[2]*m[0]+A[0]*m[2]-A[6]*m[3]+A[3]*m[6],A[3]*m[0]+A[6]*m[2]+A[0]*m[3]-A[2]*m[6],A[4]*m[0]+A[7]*m[3]+A[0]*m[4]+A[3]*m[7],A[5]*m[0]+A[7]*m[2]+A[0]*m[5]+A[2]*m[7],A[6]*m[0]+A[0]*m[6],A[7]*m[0]+A[0]*m[7]];var m,A},ij=function(d){return[0,
0,0,0,d[1],d[0],1,0]},jh=function(d){return[d[5],d[4]]},xi=function(d,h){return m=vk(d,Math.sin(h/2)),A=Math.cos(h/2),"number"==typeof A?[m[0]+A,m[1],m[2],m[3],m[4],m[5],m[6],m[7]]:[m[0]+A[0],m[1]+A[1],m[2]+A[2],m[3]+A[3],m[4]+A[4],m[5]+A[5],m[6]+A[6],m[7]+A[7]];var m,A},Ti=function(d,h){return Gi(vk(vk(d,h),Jh(d)))},xk=function(d,h,m,A){var P=10/h.zoom.value;return!Tj(d,h,[m,A])&&om(d,[m,A],P)},Tj=function(d,h,m){h=10/h.zoom.value;if("text"===d.type)var A=qm;else"arrow"===d.type?A=!1:(A="transparent"!==
d.backgroundColor,A="line"===d.type||"draw"===d.type?A&&mi(d.points):A),A=A?Uj:tk;return gj({element:d,point:m,threshold:h,check:A})},om=function(d,h,m){var A=h[0],P=h[1],W=zf(d);h=W[0];var va=W[1],qa=W[2];W=W[3];A=xf(A,P,(h+qa)/2,(va+W)/2,-d.angle);d=A[0];A=A[1];return d>h-m&&d<qa+m&&A>va-m&&A<W+m},pm=function(d,h){var m=h.x;h=h.y;var A=Sj(d,d.width,d.height);return gj({element:d,point:[m,h],threshold:A,check:Im})},Sj=function(d,h,m){return Math.max(16,Math.min(.25*("diamond"===d.type?1/Math.sqrt(2):
1)*Math.min(h,m),32))},gj=function(d){switch(d.element.type){case "rectangle":case "text":case "diamond":case "ellipse":var h=Em(d.element,d.point);return d.check(h,d.threshold);case "arrow":case "line":case "draw":return Vj(d);case "selection":return console.warn("This should not happen, we need to investigate why it does."),!1}},Em=function(d,h){switch(d.type){case "rectangle":case "text":var m=Jf(d,h),A=m[1],P=m[2];d=Math;h=d.max;m=Kk(0,1,-m[3]);m=Aj(A,m);P=Kk(1,0,-P);A=Aj(A,P);return h.call(d,
m,A);case "diamond":return A=Jf(d,h),d=A[1],h=A[2],A=A[3],h=Kk(A,h,-A*h),Aj(d,h);case "ellipse":return d=Ig(d,h),h=d[1],-Math.sign(h[1])*Aj(d[0],h)}},qm=function(d,h){return 0>d},Uj=function(d,h){return d<h},tk=function(d,h){return Math.abs(d)<h},Im=function(d,h){return 0<=d&&d<h},Ig=function(d,h){h=Jf(d,h);d=h[1];var m=h[2],A=h[3];h=jh(d);var P=h[0],W=h[1],va=.707,qa=.707;[0,1,2,3].forEach(function(Aa){Aa=(m*m-A*A)*Math.pow(va,3)/m;var La=(A*A-m*m)*Math.pow(qa,3)/A,Ga=P-Aa,gb=W-La,ib=Math.hypot(A*
qa-La,m*va-Aa),kb=Math.hypot(gb,Ga);va=Math.min(1,Math.max(0,(Ga*ib/kb+Aa)/m));qa=Math.min(1,Math.max(0,(gb*ib/kb+La)/A));Aa=Math.hypot(qa,va);va/=Aa;qa/=Aa});h=ei(m*va,A*qa);return[d,yj(Gi(zj(h,d)),h)]},Vj=function(d){var h=d.element,m=d.threshold;if(!ni.get(h))return!1;var A=Jf(d.element,d.point),P=A[0],W=A[1],va=A[2];A=Kk(0,1,-A[3]);va=Kk(1,0,-va);if(!Uj(Aj(W,A),m)||!Uj(Aj(W,va),m))return!1;P=jh(P);var qa=P[0],Aa=P[1];P=ni.get(h);return d.check===Uj&&P.some(function(La){var Ga=h.strokeSharpness;
var gb=[],ib=!1,kb=0;for(La=Fi(La);kb<La.length;kb++){var Kb=La[kb];"move"===Kb.op?(ib=!ib)&&gb.push([Kb.data[0],Kb.data[1]]):"bcurveTo"===Kb.op&&ib&&(gb.push([Kb.data[0],Kb.data[1]]),gb.push([Kb.data[2],Kb.data[3]]),gb.push([Kb.data[4],Kb.data[5]]))}4<=gb.length?"sharp"===Ga?Ga=sj(gb,qa,Aa):(Ga=H(gb,10,5),Ga=sj(Ga,qa,Aa)):Ga=!1;return Ga})?!0:P.some(function(La){return fm(La,qa,Aa,m)})},Jf=function(d,h){var m,A=ij(h);h=zf(d);var P=kh(h),W=xi(P,d.angle);A=Ti(W,A);P=hl(A,[0,0,0,0,P[4],P[5],0,0]);P=
[0,0,0,0,Math.abs(P[4]),Math.abs(P[5]),1,0];d=(m=d.x,[0,0,0,0,d.y,m,0,0]);return[hl(A,d),P,(h[2]-h[0])/2,(h[3]-h[1])/2]},xj=function(d){var h=zf(d);h=kh(h);d=xi(h,d.angle);h=[0,0,0,0,h[4],h[5],0,0];h=Jh([1,0,0,0,-.5*h[5],.5*h[4],0,0]);return vk(h,d)},kh=function(d){return ei((d[0]+d[2])/2,(d[1]+d[3])/2)},Dh=function(d,h,m,A){switch(void 0===A&&(A=0),d.type){case "rectangle":case "text":case "diamond":var P=yf(d);var W=P.flatMap(function(va,qa){qa=[va,P[(qa+1)%4]];var Aa=A;va=qa[0];qa=qa[1];var La=
[0,0,0,0,qa[4]-va[4],qa[5]-va[5],0,0];var Ga=Math.sqrt(Math.abs(La[7]*La[7]-La[5]*La[5]-La[4]*La[4]+La[1]*La[1]));La=0===Ga||1===Ga?La:vk(La,1/Ga);Aa*=.5;Aa=[1,0,0,0,Aa*La[4],Aa*La[5],0,0];qa=[Ti(Aa,va),Ti(Aa,qa)];va=qa[0];qa=qa[1];if(0<=Aj(va,h)*Aj(qa,h))var gb=[];else{a:{va=Gi(zj(qa,va));va=Gi((gb=h,[(ib=va)[0]*gb[0],ib[1]*gb[0]+ib[0]*gb[1],ib[2]*gb[0]+ib[0]*gb[2],ib[3]*gb[0]+ib[0]*gb[3],ib[4]*gb[0]+ib[2]*gb[1]-ib[1]*gb[2]+ib[0]*gb[4],ib[5]*gb[0]-ib[3]*gb[1]+ib[1]*gb[3]+ib[0]*gb[5],ib[6]*gb[0]+
ib[3]*gb[2]-ib[2]*gb[3]+ib[0]*gb[6],ib[7]*gb[0]+ib[6]*gb[1]+ib[5]*gb[2]+ib[4]*gb[3]+ib[3]*gb[4]+ib[2]*gb[5]+ib[1]*gb[6]]));break a;var ib}gb=[va]}return gb}).concat(P.flatMap(function(va){var qa=A;if(0===qa)var Aa=0===Aj(h,va)?[va]:[];else{Aa=h[2];var La=h[3],Ga=h[1],gb=jh(va);va=gb[0];var ib=gb[1];gb=Aa*Aa+La*La;qa=qa*qa*gb-Math.pow(Aa*va+La*ib+Ga,2);if(0===gb||0>=qa)Aa=[];else{qa=Math.sqrt(qa);var kb=va*La*La-ib*Aa*La-Aa*Ga;Ga=ib*Aa*Aa-va*Aa*La-La*Ga;Aa=[ei((kb+La*qa)/gb,(Ga-Aa*qa)/gb),ei((kb-La*
qa)/gb,(Ga+Aa*qa)/gb)]}}return Aa}));break;case "ellipse":W=rl(d,A,h)}if(2>W.length)return[];d=W.sort(function(va,qa){return Ml(zj(va,m))-Ml(zj(qa,m))});return[d[0],d[d.length-1]]},yf=function(d,h){void 0===h&&(h=1);var m=h*d.width/2;h=h*d.height/2;switch(d.type){case "rectangle":case "text":return[ei(m,h),ei(m,-h),ei(-m,-h),ei(-m,h)];case "diamond":return[ei(0,h),ei(m,0),ei(0,-h),ei(-m,0)]}},rl=function(d,h,m){var A=d.width/2+h;d=d.height/2+h;h=m[2];var P=m[3],W=m[1];m=A*A*h*h+d*d*P*P;var va=m-W*
W;if(0===m||0>=va)return[];va=Math.sqrt(va);var qa=-A*A*h*W;W*=-d*d*P;return[ei((qa+A*d*P*va)/m,(W-A*d*h*va)/m),ei((qa-A*d*P*va)/m,(W+A*d*h*va)/m)]},Mf=function(d,h,m){var A=Math.sign(h),P=0,W=null;return yf(d,Math.abs(h)).forEach(function(va){var qa=A*Gi(zj(va,m))[1];qa>P&&(P=qa,W=va)}),W},fm=function(d,h,m,A){var P=[0,0];return Fi(d).some(function(W,va){va=W.op;var qa=W.data;if("move"===va)P=qa;else if("bcurveTo"===va){W=[qa[0],qa[1]];va=[qa[2],qa[3]];qa=[qa[4],qa[5]];var Aa=P;return P=qa,function(La,
Ga,gb,ib,kb,Kb){var Ib=kb[0];kb=kb[1];for(var mc=function(ke,ie){return Math.pow(1-ke,3)*ib[ie]+3*ke*Math.pow(1-ke,2)*gb[ie]+3*Math.pow(ke,2)*(1-ke)*Ga[ie]+La[ie]*Math.pow(ke,3)},Sc=0;1>=Sc;){var Yc=mc(Sc,0),kd=mc(Sc,1);if(Math.sqrt(Math.pow(Yc-Ib,2)+Math.pow(kd-kb,2))<Kb)return!0;Sc+=.01}return!1}(Aa,W,va,qa,[h,m],A)}return!1})},mk=function(d,h,m){return h>=d[0]&&h<=d[0]+d[2]&&m>=d[1]&&m<=d[1]+d[3]},Ol=function(d,h,m,A,P,W){return d.reduce(function(va,qa){return va?va:(va=function(Aa,La,Ga,gb,ib,
kb){if(!La.selectedElementIds[Aa.id])return!1;Aa=cj(Aa,ib,kb);La=Aa.rotation;var Kb=Lk()(Aa,["rotation"]);if(La&&mk(La,Ga,gb))return"rotation";Aa=Object.keys(Kb).filter(function(Ib){Ib=Kb[Ib];return!!Ib&&mk(Ib,Ga,gb)});return 0<Aa.length&&Aa[0]}(qa,h,m,A,P,W))?{element:qa,transformHandleType:va}:null},null)},yi=function(d,h,m,A,P){var W=pk([d[0],d[1],d[2],d[3]],0,A,P,ul);return Object.keys(W).find(function(va){return(va=W[va])&&mk(va,h,m)})||!1},ph=["ns","nesw","ew","nwse"],mg=function(d){var h=d.element,
m=h&&-1==Math.sign(h.height)*Math.sign(h.width),A=null;switch(d.transformHandleType){case "n":case "s":A="ns";break;case "w":case "e":A="ew";break;case "nw":case "se":A=m?"nesw":"nwse";break;case "ne":case "sw":A=m?"nwse":"nesw";break;case "rotation":return"grab"}A&&h&&(d=A,h=h.angle,m=ph.indexOf(d),0<=m&&(d=ph[(m+Math.round(h/(Math.PI/4)))%ph.length]),A=d);return A?"".concat(A,"-resize"):""},vl=function(d,h){for(var m=0,A=h.length,P=d.length;m<A;m++,P++)d[P]=h[m];return d},Nf=function(){function d(h,
m){this.elementId=h.id;ch.mapElementToScene(this.elementId,m);d.normalizePoints(h);this.lastUncommittedPoint=this.activePointIndex=null;this.isDragging=!1;this.pointerOffset={x:0,y:0};this.endBindingElement=this.startBindingElement="keep"}return d.getElement=function(h){var m;return(null===(m=ch.getScene(h))||void 0===m?void 0:m.getNonDeletedElement(h))||null},d.handlePointDragging=function(h,m,A,P,W){if(!h.editingLinearElement)return!1;var va=h.editingLinearElement,qa=va.activePointIndex,Aa=va.isDragging,
La=d.getElement(va.elementId);return La?null!=qa&&-1<qa?(!1===Aa&&m({editingLinearElement:ab(ab({},va),{},{isDragging:!0})}),h=d.createPointAt(La,A-va.pointerOffset.x,P-va.pointerOffset.y,h.gridSize),d.movePoint(La,qa,h),Qh(La)&&W(La,0===qa?"start":"end"),!0):!1:!1},d.handlePointerUp=function(h,m,A){h=m.activePointIndex;var P=m.isDragging,W=d.getElement(m.elementId);if(!W)return m;var va={};!P||0!==h&&h!==W.points.length-1||(mi(W.points,A.zoom.value)&&d.movePoint(W,h,0===h?W.points[W.points.length-
1]:W.points[0]),P=A.isBindingEnabled?yh(Oi(d.getPointAtIndexGlobalCoordinates(W,h)),ch.getScene(W)):null,(A={})[0===h?"startBindingElement":"endBindingElement"]=P,va=A);return ab(ab(ab({},m),va),{},{isDragging:!1,pointerOffset:{x:0,y:0}})},d.handlePointerDown=function(h,m,A,P,W){var va={didAddPoint:!1,hitElement:null};if(!m.editingLinearElement)return va;var qa=d.getElement(m.editingLinearElement.elementId);if(!qa)return va;if(h.altKey)return null==m.editingLinearElement.lastUncommittedPoint&&pe(qa,
{points:vl(vl([],qa.points),[d.createPointAt(qa,W.x,W.y,m.gridSize)])}),P.resumeRecording(),A({editingLinearElement:ab(ab({},m.editingLinearElement),{},{activePointIndex:qa.points.length-1,lastUncommittedPoint:null,endBindingElement:yh(W,ch.getScene(qa))})}),va.didAddPoint=!0,va;h=d.getPointIndexUnderCursor(qa,m.zoom,W.x,W.y);if(-1<h)va.hitElement=qa;else{var Aa=m.editingLinearElement;P=Aa.startBindingElement;Aa=Aa.endBindingElement;m.isBindingEnabled&&Qh(qa)&&Tf(qa,P,Aa)}Aa=zf(qa);P=(Aa[0]+Aa[2])/
2;Aa=(Aa[1]+Aa[3])/2;qa=-1<h&&xf(qa.x+qa.points[h][0],qa.y+qa.points[h][1],P,Aa,qa.angle);return A({editingLinearElement:ab(ab({},m.editingLinearElement),{},{activePointIndex:-1<h?h:null,pointerOffset:qa?{x:W.x-qa[0],y:W.y-qa[1]}:{x:0,y:0}})}),va},d.handlePointerMove=function(h,m,A,P,W){var va=P.lastUncommittedPoint,qa=d.getElement(P.elementId);if(!qa)return P;var Aa=qa.points,La=Aa[Aa.length-1];if(!h.altKey)return La===va&&d.movePoint(qa,Aa.length-1,"delete"),ab(ab({},P),{},{lastUncommittedPoint:null});
h=d.createPointAt(qa,m-P.pointerOffset.x,A-P.pointerOffset.y,W);return La===va?d.movePoint(qa,qa.points.length-1,h):d.movePoint(qa,"new",h),ab(ab({},P),{},{lastUncommittedPoint:qa.points[qa.points.length-1]})},d.getPointsGlobalCoordinates=function(h){var m=zf(h),A=(m[0]+m[2])/2,P=(m[1]+m[3])/2;return h.points.map(function(W){var va;return[(va=xf(h.x+W[0],h.y+W[1],A,P,h.angle))[0],va[1]]})},d.getPointAtIndexGlobalCoordinates=function(h,m){var A=0>m?h.points.length+m:m;m=zf(h);A=h.points[A];return xf(h.x+
A[0],h.y+A[1],(m[0]+m[2])/2,(m[1]+m[3])/2,h.angle)},d.pointFromAbsoluteCoords=function(h,m){var A=zf(h);m=xf(m[0],m[1],(A[0]+A[2])/2,(A[1]+A[3])/2,-h.angle);return[m[0]-h.x,m[1]-h.y]},d.getPointIndexUnderCursor=function(h,m,A,P){h=this.getPointsGlobalCoordinates(h);for(var W=h.length;-1<--W;){var va=h[W];if(Math.hypot(va[0]-A,va[1]-P)*m.value<this.POINT_HANDLE_SIZE/2+1)return W}return-1},d.createPointAt=function(h,m,A,P){m=nh(m,A,P);A=zf(h);m=xf(m[0],m[1],(A[0]+A[2])/2,(A[1]+A[3])/2,-h.angle);return[m[0]-
h.x,m[1]-h.y]},d.normalizePoints=function(h){var m=h.points,A=m[0][0],P=m[0][1];pe(h,{points:m.map(function(W,va){return[W[0]-A,W[1]-P]}),x:h.x+A,y:h.y+P})},d.movePointByOffset=function(h,m,A){var P=h.points[m];d.movePoint(h,m,[P[0]+A.x,P[1]+A.y])},d.movePoint=function(h,m,A,P){var W=h.points,va=0,qa=0;if("delete"===A){if("new"===m)throw Error("invalid args in movePoint");(A=W.slice()).splice(m,1);0===m&&(va=A[0][0],qa=A[0][1],A=A.map(function(gb,ib){return 0===ib?[0,0]:[gb[0]-va,gb[1]-qa]}))}else if("new"===
m)A=vl(vl([],W),[A]);else{var Aa=A[0]-W[m][0],La=A[1]-W[m][1];A=W.map(function(gb,ib){return ib===m?0===ib?(va=Aa,qa=La,gb):(va=0,qa=0,[gb[0]+Aa,gb[1]+La]):va||qa?[gb[0]-va,gb[1]-qa]:gb})}var Ga=Td(h,A,h.strokeSharpness||"round");W=Td(h,W,h.strokeSharpness||"round");W=xf(va,qa,(W[0]+W[2])/2-(Ga[0]+Ga[2])/2,(W[1]+W[3])/2-(Ga[1]+Ga[3])/2,h.angle);pe(h,ab(ab({},P),{},{points:A,x:h.x+W[0],y:h.y+W[1]}))},d}();Nf.POINT_HANDLE_SIZE=20;var rm=function(d,h){for(var m=0,A=h.length,P=d.length;m<A;m++,P++)d[P]=
h[m];return d},Tf=function(d,h,m){var A=new Set,P=new Set;eg(d,h,m,"start",A,P);eg(d,m,h,"end",A,P);h=Array.from(P).filter(function(W){return!A.has(W)});ch.getScene(d).getNonDeletedElements(h).forEach(function(W){var va;pe(W,{boundElementIds:null===(va=W.boundElementIds)||void 0===va?void 0:va.filter(function(qa){return qa!==d.id})})})},eg=function(d,h,m,A,P,W){if("keep"!==h)if(null!=h)null!=m&&("keep"===m?Bf(d,h,A):"start"!==A&&m.id===h.id)||(ek(d,h,A),P.add(h.id));else{var va;h="start"===A?"startBinding":
"endBinding";m=d[h];d=null==m?null:(pe(d,((va={})[h]=null,va)),m.elementId);null!=d&&W.add(d)}},Dg=function(d){d.forEach(function(h){Qh(h)?Tf(h,Xg(h,"start"),Xg(h,"end")):Ei(h)&&zk(h)})},zk=function(d){wh(d).forEach(function(h){var m=h[1];return Tf(h[0],"end"===m?"keep":d,"start"===m?"keep":d)})},Ok=function(d,h,m,A){null!=h.startBoundElement&&ek(d,h.startBoundElement,"start");h=yh(A,m);null==h||Bf(d,h,"end")||ek(d,h,"end")},ek=function(d,h,m){var A,P;pe(d,((A={})["start"===m?"startBinding":"endBinding"]=
function(W){for(var va=1;va<arguments.length;va++){var qa=null!=arguments[va]?arguments[va]:{};va%2?Fb(Object(qa),!0).forEach(function(Aa){Be()(W,Aa,qa[Aa])}):Object.getOwnPropertyDescriptors?Object.defineProperties(W,Object.getOwnPropertyDescriptors(qa)):Fb(Object(qa)).forEach(function(Aa){Object.defineProperty(W,Aa,Object.getOwnPropertyDescriptor(qa,Aa))})}return W}({elementId:h.id},Le(d,h,m)),A));pe(h,{boundElementIds:Array.from(new Set(rm(rm([],null!==(P=h.boundElementIds)&&void 0!==P?P:[]),[d.id])))})},
Bf=function(d,h,m){m=d["start"===m?"endBinding":"startBinding"];return(null==m?void 0:m.elementId)===h.id&&3>d.points.length},Tg=function(d){d.forEach(function(h){Qh(h)&&Tf(h,null,null)})},yh=function(d,h){return zh(h.getElements(),function(m){return Ei(m)&&pm(m,d)})},Le=function(d,h,m){var A="start"===m?-1:1;m=-1===A?0:d.points.length-1;A=m-A;m=Nf.getPointAtIndexGlobalCoordinates(d,m);A=Nf.getPointAtIndexGlobalCoordinates(d,A);a:{d=xj(h);A=Ti(d,ij(A));d=Ti(d,ij(m));var P=Gi(zj(d,A));d=h.height/h.width;
A=h.width/2;var W=h.height/2,va=P[2],qa=P[3];P=P[1];var Aa=Math.abs(qa),La=Math.abs(va);switch(h.type){case "rectangle":case "text":d=P/(A*(La+d*Aa));break a;case "diamond":d=Aa<La?P/(La*A):P/(Aa*W);break a;case "ellipse":d=P/(A*Math.sqrt(Math.pow(va,2)+Math.pow(d,2)*Math.pow(qa,2)));break a}d=void 0}return{focus:d,gap:Math.max(1,Em(h,m))}},Vh=function(d,h){var m,A=null!==(m=d.boundElementIds)&&void 0!==m?m:[];if(0!==A.length){h=null!=h?h:{};var P=h.newSize,W=Zi(h.simultaneouslyUpdated);ch.getScene(d).getNonDeletedElements(A).forEach(function(va){var qa,
Aa;if((null===(qa=va.startBinding)||void 0===qa?void 0:qa.elementId)===d.id||(null===(Aa=va.endBinding)||void 0===Aa?void 0:Aa.elementId)===d.id)qa=Gf(d,va.startBinding,P),Aa=Gf(d,va.endBinding,P),W.has(va.id)?pe(va,{startBinding:qa,endBinding:Aa}):(El(va,"start",qa,d),El(va,"end",Aa,d))})}},Zi=function(d){return new Set((d||[]).map(function(h){return h.id}))},El=function(d,h,m,A){var P;if(!(null==m||m.elementId!==A.id&&2<d.points.length)){var W=ch.getScene(d).getElement(m.elementId);if(null!=W){var va=
"start"===h?-1:1;A=-1===va?0:d.points.length-1;var qa=Nf.getPointAtIndexGlobalCoordinates(d,A-va);va=function(Aa,La,Ga){if(0===La){var gb=zf(Aa);gb=kh(gb);return jh(gb)}gb=xj(Aa);Ga=Ti(gb,ij(Ga));gb=Jh(gb);switch(Aa.type){case "rectangle":case "text":case "diamond":var ib=Mf(Aa,La,Ga);break;case "ellipse":var kb=Math.abs(La);ib=Aa.width*kb/2;Aa=Aa.height*kb/2;La=Math.sign(La);kb=jh(Ga);Ga=kb[0];kb=kb[1];kb=0===kb?1E-4:kb;var Kb=Math.pow(Ga,2)*Math.pow(Aa,2)+Math.pow(kb,2)*Math.pow(ib,2);La=(-Ga*Math.pow(Aa,
2)+La*kb*Math.sqrt(Math.max(0,Kb-Math.pow(ib,2)*Math.pow(Aa,2))))/Kb;Ga=(-La*Ga-1)/kb;ib=-Math.pow(ib,2)*La/(Math.pow(Ga,2)*Math.pow(Aa,2)+Math.pow(La,2)*Math.pow(ib,2));ib=ei(ib,(-La*ib-1)/Ga)}return jh(Ti(gb,ib))}(W,m.focus,qa);0===m.gap?W=va:(W=function(Aa,La,Ga,gb){void 0===gb&&(gb=0);var ib=xj(Aa);La=Ti(ib,ij(La));Ga=Ti(ib,ij(Ga));Ga=Gi(zj(Ga,La));var kb=Jh(ib);return Dh(Aa,Ga,La,gb).map(function(Kb){return jh(Ti(kb,Kb))})}(W,qa,va,m.gap),W=0===W.length?va:W[0]);Nf.movePoint(d,A,Nf.pointFromAbsoluteCoords(d,
W),((P={})["start"===h?"startBinding":"endBinding"]=m,P))}}},Gf=function(d,h,m){if(null==h||null==m)return h;var A=h.gap,P=h.focus,W=m.width;m=m.height;var va=d.width,qa=d.height;return{elementId:h.elementId,gap:Math.max(1,Math.min(Sj(d,W,m),A*(W<m?W/va:m/qa))),focus:P}},$l=function(d){return[Xg(d,"start"),Xg(d,"end")].filter(function(h){return null!=h})},Xg=function(d,h){return yh(Oi(Nf.getPointAtIndexGlobalCoordinates(d,"start"===h?0:-1)),ch.getScene(d))},wh=function(d){return ch.getScene(d).getElements().map(function(h){if(!Qh(h))return null;
var m=Wf(h,"start",d),A=Wf(h,"end",d);return m||A?[h,m&&A?"both":m?"start":"end",d]:null}).filter(function(h){return null!=h})},Wf=function(d,h,m){return null==d["start"===h?"startBinding":"endBinding"]&&!Bf(d,m,h)&&pm(m,Oi(Nf.getPointAtIndexGlobalCoordinates(d,"start"===h?0:-1)))},tj=function(d,h,m,A){var P=new Set,W=new Set,va="duplicatesServeAsOld"===A;h.forEach(function(qa){var Aa=qa.boundElementIds;if(null!=Aa&&0<Aa.length&&(Aa.forEach(function(La){va&&!m.has(La)&&P.add(La)}),W.add(m.get(qa.id))),
Qh(qa))null!=qa.startBinding&&(Aa=qa.startBinding.elementId,va&&!m.has(Aa)&&W.add(Aa)),null!=qa.endBinding&&(Aa=qa.endBinding.elementId,va&&!m.has(Aa)&&W.add(Aa)),null==qa.startBinding&&null==qa.endBinding||P.add(m.get(qa.id))});d.filter(function(qa){return P.has(qa.id)}).forEach(function(qa){var Aa=qa.endBinding;pe(qa,{startBinding:Mg(qa.startBinding,m),endBinding:Mg(Aa,m)})});d.filter(function(qa){return W.has(qa.id)}).forEach(function(qa){var Aa=qa.boundElementIds;null!=Aa&&0<Aa.length&&pe(qa,
{boundElementIds:Aa.map(function(La){var Ga;return null!==(Ga=m.get(La))&&void 0!==Ga?Ga:La})})})},Mg=function(d,h){var m;if(null==d)return null;var A=d.elementId;return{focus:d.focus,gap:d.gap,elementId:null!==(m=h.get(A))&&void 0!==m?m:A}},nj=function(d,h){var m=new Set(h.map(function(P){return P.id})),A=new Set;h.forEach(function(P){var W;Ei(P)&&(null===(W=P.boundElementIds)||void 0===W||W.forEach(function(va){m.has(va)||A.add(va)}))});d.filter(function(P){return A.has(P.id)}).forEach(function(P){var W=
P.endBinding;pe(P,{startBinding:am(P.startBinding,m),endBinding:am(W,m)})})},am=function(d,h){return null==d||h.has(d.elementId)?null:d},Ji=function(d,h){for(var m=0,A=h.length,P=d.length;m<A;m++,P++)d[P]=h[m];return d},tf=function(d){return d>=2*Math.PI?d-2*Math.PI:d},Ye=function(d,h,m){return cg(d)?{points:aj(0,h,aj(1,m,d.points))}:{}},lh=function(d,h,m){h=h/d.width*d.fontSize;if(1>h)return null;d=wj(d.text,dg({fontSize:h,fontFamily:d.fontFamily}));return{size:h,baseline:d.baseline+(m-d.height)}},
Zk=function(d,h,m,A){var P=pg(d),W=P[0],va=P[1],qa=P[2],Aa=P[3];switch(h){case "se":var La=Math.max((m-W)/(qa-W),(A-va)/(Aa-va));var Ga=function(ib,kb,Kb){var Ib=kb[0];kb=kb[1];return{x:ib.x+(Ib-W)*(La-1)+Ib-Kb[0],y:ib.y+(kb-va)*(La-1)+kb-Kb[1]}};break;case "nw":La=Math.max((qa-m)/(qa-W),(Aa-A)/(Aa-va));Ga=function(ib,kb,Kb){var Ib=kb[2];kb=kb[3];return{x:ib.x-(qa-Ib)*(La-1)+Ib-Kb[2],y:ib.y-(Aa-kb)*(La-1)+kb-Kb[3]}};break;case "ne":La=Math.max((m-W)/(qa-W),(Aa-A)/(Aa-va));Ga=function(ib,kb,Kb){var Ib=
kb[0];kb=kb[3];return{x:ib.x+(Ib-W)*(La-1)+Ib-Kb[0],y:ib.y-(Aa-kb)*(La-1)+kb-Kb[3]}};break;case "sw":La=Math.max((qa-m)/(qa-W),(A-va)/(Aa-va)),Ga=function(ib,kb,Kb){var Ib=kb[1];kb=kb[2];return{x:ib.x-(qa-kb)*(La-1)+kb-Kb[2],y:ib.y+(Ib-va)*(La-1)+Ib-Kb[1]}}}if(0<La){var gb=d.reduce(function(ib,kb){if(!ib)return ib;var Kb=kb.width*La,Ib=kb.height*La,mc={};if("text"===kb.type){mc=lh(kb,Kb,Ib);if(null===mc)return null;mc={fontSize:mc.size,baseline:mc.baseline}}var Sc=zf(kb),Yc=Ye(kb,Kb,Ib);Vh(kb,{newSize:{width:Kb,
height:Ib},simultaneouslyUpdated:d});var kd=Rf(Xb(Xb({},kb),Yc),Kb,Ib);Sc=Ga(kb,Sc,kd);kb=Sc.x;Sc=Sc.y;return Ji(Ji([],ib),[Xb(Xb({width:Kb,height:Ib,x:kb,y:Sc},Yc),mc)])},[]);gb&&d.forEach(function(ib,kb){pe(ib,gb[kb])})}},oj=function(d,h,m,A,P,W,va){var qa=5*Math.PI/2+Math.atan2(A-va,m-W);P&&(qa+=Na.ay/2,qa-=qa%Na.ay);h.forEach(function(Aa,La){var Ga,gb,ib=zf(Aa);La=(ib[0]+ib[2])/2;ib=(ib[1]+ib[3])/2;var kb=null!==(Ga=null===(gb=d.originalElements.get(Aa.id))||void 0===gb?void 0:gb.angle)&&void 0!==
Ga?Ga:Aa.angle;Ga=xf(La,ib,W,va,qa+kb-Aa.angle);pe(Aa,{x:Aa.x+(Ga[0]-La),y:Aa.y+(Ga[1]-ib),angle:tf(qa+kb)})})},ii=function(d,h,m,A,P,W,va,qa,Aa,La){var Ga;Aa&&(va=(Ga=lg(h,va,W<A?-qa:qa)).width,0>(qa=Ga.height)&&(qa=-qa));h=P<m?m-va:m;W=W<A?A-qa:A;La&&(h=m-(va+=va)/2,W=A-(qa+=qa)/2);0!==va&&0!==qa&&pe(d,{x:h,y:W,width:va,height:qa})},Ek=function(d){return d.replace(/\t/g,"        ").replace(/\r?\n|\r/g,"\n")},th=function(d){var h=wj(d.text,dg(d));pe(d,{width:h.width,height:h.height,baseline:h.baseline})},
Uf=function(d,h){return!(d.viewModeEnabled||!d.editingElement&&!We(h,d).length&&"selection"===d.elementType)},pi=function(d){return d.filter(function(h){return h.isDeleted||!Gh(h)})},Wj=function(d){return d.reduce(function(h,m){return h[m.id]=m,h},{})},il=function(d){return d.reduce(function(h,m){return h+m.version},0)},Rd=function(d){return d.filter(function(h){return!h.isDeleted})},yg=function(d){return Rd(d).map(function(h){return If(h.type)?Bc(Bc({},h),{},{lastCommittedPoint:null}):h})},ql=function(d,
h,m){var A=[d.horizontal,d.vertical].map(function(P){return null!=P&&P.x<=h&&h<=P.x+P.width&&P.y<=m&&m<=P.y+P.height});d=A[0];A=A[1];return{isOverEither:d||A,isOverHorizontal:d,isOverVertical:A}},Yg=function(d,h){return d.some(function(m){return h.selectedElementIds[m.id]})},We=function(d,h){return d.filter(function(m){return h.selectedElementIds[m.id]})},Bj=function(d,h){return h.editingElement?[h.editingElement]:We(d,h)},vi=function(d){var h=d.scenePoint,m=d.viewportDimensions;d=d.zoom;return{scrollX:m.width/
2*(1/d.value)-h.x-1/d.value*d.translation.x,scrollY:m.height/2*(1/d.value)-h.y-1/d.value*d.translation.y}},ji=function(d,h,m){var A;if(!d.length)return{scrollX:0,scrollY:0};var P=pg(d);m=P[0];var W=P[1],va=P[2];P=P[3];return function(qa,Aa,La){Aa=La[2];var Ga=La[3],gb=hh({sceneX:La[0],sceneY:La[1]},qa);La=gb.x;gb=gb.y;Aa=hh({sceneX:Aa,sceneY:Ga},qa);Ga=Aa.y;return Aa.x-La>qa.width||Ga-gb>qa.height}(h,0,[m,W,va,P])&&(m=(A=function(qa,Aa){if(!qa.length)return[0,0,0,0];var La=1/0,Ga=qa[0];return qa.forEach(function(gb){var ib=
ti(gb);ib=Math.hypot(Aa.x-(ib[0]+ib[2])/2,Aa.y-(ib[1]+ib[3])/2);ib<La&&(La=ib,Ga=gb)}),ti(Ga)}(d,Kf({clientX:h.scrollX,clientY:h.scrollY},h)))[0],W=A[1],va=A[2],P=A[3]),vi({scenePoint:{x:(m+va)/2,y:(W+P)/2},viewportDimensions:{width:h.width,height:h.height},zoom:h.zoom})},Xj=function(d){return"rectangle"===d||"ellipse"===d||"diamond"===d||"draw"===d||"line"===d},nf=function(d){return"rectangle"===d||"ellipse"===d||"diamond"===d||"arrow"===d||"draw"===d||"line"===d},$k=function(d){return"rectangle"===
d||"arrow"===d||"draw"===d||"line"===d},zh=function(d,h){for(var m=null,A=d.length-1;0<=A;--A){var P=d[A];if(!P.isDeleted&&h(P)){m=P;break}}return m},Yh=function(d,h,m,A){return void 0===A&&(A={x:0,y:0}),{value:d,translation:{x:A.x-m.left-d/h.value*(A.x-m.left-h.translation.x),y:A.y-m.top-d/h.value*(A.y-m.top-h.translation.y)}}},fk=function(d){d=parseFloat(d.toFixed(2));return Math.max(.1,Math.min(d,10))},Te=(g(9478),R().forwardRef(function(d,h){var m=R().useRef(null);R().useImperativeHandle(h,function(){return m.current});
h="ToolIcon_size_".concat(d.size||"m");return"button"===d.type?R().createElement("button",{className:zc("ToolIcon_type_button",h,d.className,d.visible&&!d.hidden?"ToolIcon_type_button--show":"ToolIcon_type_button--hide",{ToolIcon:!d.hidden,"ToolIcon--selected":d.selected}),hidden:d.hidden,title:d.title,"aria-label":d["aria-label"],type:"button",onClick:d.onClick,ref:m},R().createElement("div",{className:"ToolIcon__icon","aria-hidden":"true"},d.icon||d.label,d.keyBindingLabel&&R().createElement("span",
{className:"ToolIcon__keybinding"},d.keyBindingLabel)),d.showAriaLabel&&R().createElement("div",{className:"ToolIcon__label"},d["aria-label"]),d.children):R().createElement("label",{className:zc("ToolIcon",d.className),title:d.title},R().createElement("input",{className:"ToolIcon_type_radio ".concat(h),type:"radio",name:d.name,"aria-label":d["aria-label"],"aria-keyshortcuts":d["aria-keyshortcuts"],"data-testid":d["data-testid"],id:d.id,onChange:d.onChange,checked:d.checked,ref:m}),R().createElement("div",
{className:"ToolIcon__icon"},d.icon,d.keyBindingLabel&&R().createElement("span",{className:"ToolIcon__keybinding"},d.keyBindingLabel)))}));Te.defaultProps={visible:!0,className:""};var Ng=function(d){return"light"===d?ne.$y[4]:ne.$y[9]},de=function(d){return"light"===d?ne.Sn:ne.MA[4]},Jg=function(d){return"light"===d?ne.ix:"#1e1e1e"},fe=function(d,h){void 0===h&&(h=512);h="number"==typeof h?{width:h}:h;var m=h.width;m=void 0===m?512:m;var A=h.height;A=void 0===A?m:A;var P=h.mirror;h=h.style;return R().createElement("svg",
{"aria-hidden":"true",focusable:"false",role:"img",viewBox:"0 0 ".concat(m," ").concat(A),className:zc({"rtl-mirror":P}),style:h},"string"==typeof d?R().createElement("path",{fill:"currentColor",d}):d)},gk=fe("M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z",
{mirror:!0}),Vd=fe("M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z",{width:448,height:512}),al=fe("M252 54L203 8a28 27 0 00-20-8H28C12 0 0 12 0 27v195c0 15 12 26 28 26h204c15 0 28-11 28-26V73a28 27 0 00-8-19zM130 213c-21 0-37-16-37-36 0-19 16-35 37-35 20 0 37 16 37 35 0 20-17 36-37 36zm56-169v56c0 4-4 6-7 6H44c-4 0-7-2-7-6V42c0-4 3-7 7-7h133l4 2 3 2a7 7 0 012 5z M296 201l87 95-188 205-78 9c-10 1-19-8-18-20l9-84zm141-14l-41-44a31 31 0 00-46 0l-38 41 87 95 38-42c13-14 13-36 0-50z",
{width:448,height:512}),hk=fe("M572.694 292.093L500.27 416.248A63.997 63.997 0 0 1 444.989 448H45.025c-18.523 0-30.064-20.093-20.731-36.093l72.424-124.155A64 64 0 0 1 152 256h399.964c18.523 0 30.064 20.093 20.73 36.093zM152 224h328v-48c0-26.51-21.49-48-48-48H272l-64-64H48C21.49 64 0 85.49 0 112v278.046l69.077-118.418C86.214 242.25 117.989 224 152 224z",{width:576,height:512,mirror:!0}),bl=fe("M384 112v352c0 26.51-21.49 48-48 48H48c-26.51 0-48-21.49-48-48V112c0-26.51 21.49-48 48-48h80c0-35.29 28.71-64 64-64s64 28.71 64 64h80c26.51 0 48 21.49 48 48zM192 40c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24m96 114v-20a6 6 0 0 0-6-6H102a6 6 0 0 0-6 6v20a6 6 0 0 0 6 6h180a6 6 0 0 0 6-6z",
{width:384,height:512}),Ki=fe("M32 464a48 48 0 0 0 48 48h288a48 48 0 0 0 48-48V128H32zm272-256a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zM432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16z",{width:448,height:512}),Hj=fe("M204.3 5C104.9 24.4 24.8 104.3 5.2 203.4c-37 187 131.7 326.4 258.8 306.7 41.2-6.4 61.4-54.6 42.5-91.7-23.1-45.4 9.9-98.4 60.9-98.4h79.7c35.8 0 64.8-29.6 64.9-65.3C511.5 97.1 368.1-26.9 204.3 5zM96 320c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm32-128c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm128-64c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm128 64c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z"),
Ai=fe("M384 121.9c0-6.3-2.5-12.4-7-16.9L279.1 7c-4.5-4.5-10.6-7-17-7H256v128h128zM571 308l-95.7-96.4c-10.1-10.1-27.4-3-27.4 11.3V288h-64v64h64v65.2c0 14.3 17.3 21.4 27.4 11.3L571 332c6.6-6.6 6.6-17.4 0-24zm-379 28v-32c0-8.8 7.2-16 16-16h176V160H248c-13.2 0-24-10.8-24-24V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V352H208c-8.8 0-16-7.2-16-16z",{width:576,height:512,mirror:!0}),Zc=fe("M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z",
{width:448,height:512}),Ld=fe("M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z",{width:448,height:512}),hd=fe("M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"),vd=fe("M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"),
Qf=fe("M255.545 8c-66.269.119-126.438 26.233-170.86 68.685L48.971 40.971C33.851 25.851 8 36.559 8 57.941V192c0 13.255 10.745 24 24 24h134.059c21.382 0 32.09-25.851 16.971-40.971l-41.75-41.75c30.864-28.899 70.801-44.907 113.23-45.273 92.398-.798 170.283 73.977 169.484 169.442C423.236 348.009 349.816 424 256 424c-41.127 0-79.997-14.678-110.63-41.556-4.743-4.161-11.906-3.908-16.368.553L89.34 422.659c-4.872 4.872-4.631 12.815.482 17.433C133.798 479.813 192.074 504 256 504c136.966 0 247.999-111.033 248-247.998C504.001 119.193 392.354 7.755 255.545 8z",
{mirror:!0}),hg=fe("M256.455 8c66.269.119 126.437 26.233 170.859 68.685l35.715-35.715C478.149 25.851 504 36.559 504 57.941V192c0 13.255-10.745 24-24 24H345.941c-21.382 0-32.09-25.851-16.971-40.971l41.75-41.75c-30.864-28.899-70.801-44.907-113.23-45.273-92.398-.798-170.283 73.977-169.484 169.442C88.764 348.009 162.184 424 256 424c41.127 0 79.997-14.678 110.629-41.556 4.743-4.161 11.906-3.908 16.368.553l39.662 39.662c4.872 4.872 4.631 12.815-.482 17.433C378.202 479.813 319.926 504 256 504 119.034 504 8.001 392.967 8 256.002 7.999 119.193 119.646 7.755 256.455 8z",
{mirror:!0}),Zh=fe("M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zM262.655 90c-54.497 0-89.255 22.957-116.549 63.758-3.536 5.286-2.353 12.415 2.715 16.258l34.699 26.31c5.205 3.947 12.621 3.008 16.665-2.122 17.864-22.658 30.113-35.797 57.303-35.797 20.429 0 45.698 13.148 45.698 32.958 0 14.976-12.363 22.667-32.534 33.976C247.128 238.528 216 254.941 216 296v4c0 6.627 5.373 12 12 12h56c6.627 0 12-5.373 12-12v-1.333c0-28.462 83.186-29.647 83.186-106.667 0-58.002-60.165-102-116.531-102zM256 338c-25.365 0-46 20.635-46 46 0 25.364 20.635 46 46 46s46-20.636 46-46c0-25.365-20.635-46-46-46z",
{mirror:!0}),Zg=(fe("M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92z",{width:24,height:24}),fe("M16 5l-1.42 1.42-1.59-1.59V16h-1.98V4.83L9.42 6.42 8 5l4-4 4 4zm4 5v11c0 1.1-.9 2-2 2H6c-1.11 0-2-.9-2-2V10c0-1.11.89-2 2-2h3v2H6v11h12V10h-3V8h3c1.1 0 2 .89 2 2z",
{width:24,height:24}),fe(R().createElement("path",{stroke:"currentColor",strokeWidth:"40",fill:"currentColor",d:"M148 560a318 318 0 0 0 522 110 316 316 0 0 0 0-450 316 316 0 0 0-450 0c-11 11-21 22-30 34v4h47c25 0 46 21 46 46s-21 45-46 45H90c-13 0-25-6-33-14-9-9-14-20-14-33V156c0-25 20-45 45-45s45 20 45 45v32l1 1a401 401 0 0 1 623 509l212 212a42 42 0 0 1-59 59L698 757A401 401 0 0 1 65 570a42 42 0 0 1 83-10z"}),{width:1024})),qj=R().memo(function(d){d=d.appearance;return fe(R().createElement(R().Fragment,
null,R().createElement("path",{d:"M22 9.556C22 8.696 21.303 8 20.444 8H16v8H8v4.444C8 21.304 8.697 22 9.556 22h10.888c.86 0 1.556-.697 1.556-1.556V9.556z",fill:de(d),stroke:de(d),strokeWidth:"2"}),R().createElement("path",{d:"M16 3.556C16 2.696 15.303 2 14.444 2H3.556C2.696 2 2 2.697 2 3.556v10.888C2 15.304 2.697 16 3.556 16h10.888c.86 0 1.556-.697 1.556-1.556V3.556z",fill:Ng(d),stroke:Ng(d),strokeWidth:"2"})),{width:24,mirror:!0})}),jk=R().memo(function(d){d=d.appearance;return fe(R().createElement(R().Fragment,
null,R().createElement("path",{d:"M16 3.556C16 2.696 15.303 2 14.444 2H3.556C2.696 2 2 2.697 2 3.556v10.888C2 15.304 2.697 16 3.556 16h10.888c.86 0 1.556-.697 1.556-1.556V3.556z",fill:Ng(d),stroke:Ng(d),strokeWidth:"2"}),R().createElement("path",{d:"M22 9.556C22 8.696 21.303 8 20.444 8H9.556C8.696 8 8 8.697 8 9.556v10.888C8 21.304 8.697 22 9.556 22h10.888c.86 0 1.556-.697 1.556-1.556V9.556z",fill:de(d),stroke:de(d),strokeWidth:"2"})),{width:24,mirror:!0})}),ed=R().memo(function(d){d=d.appearance;
return fe(R().createElement(R().Fragment,null,R().createElement("path",{d:"M13 21a1 1 0 001 1h7a1 1 0 001-1v-7a1 1 0 00-1-1h-3v5h-5v3zM11 3a1 1 0 00-1-1H3a1 1 0 00-1 1v7a1 1 0 001 1h3V6h5V3z",fill:de(d),stroke:de(d),strokeWidth:"2"}),R().createElement("path",{d:"M18 7.333C18 6.597 17.403 6 16.667 6H7.333C6.597 6 6 6.597 6 7.333v9.334C6 17.403 6.597 18 7.333 18h9.334c.736 0 1.333-.597 1.333-1.333V7.333z",fill:Ng(d),stroke:Ng(d),strokeWidth:"2"})),{width:24,mirror:!0})}),sd=R().memo(function(d){d=d.appearance;
return fe(R().createElement(R().Fragment,null,R().createElement("path",{d:"M18 7.333C18 6.597 17.403 6 16.667 6H7.333C6.597 6 6 6.597 6 7.333v9.334C6 17.403 6.597 18 7.333 18h9.334c.736 0 1.333-.597 1.333-1.333V7.333z",fill:Ng(d),stroke:Ng(d),strokeLinejoin:"round",strokeWidth:"2"}),R().createElement("path",{d:"M11 3a1 1 0 00-1-1H3a1 1 0 00-1 1v7a1 1 0 001 1h8V3zM22 14a1 1 0 00-1-1h-7a1 1 0 00-1 1v7a1 1 0 001 1h8v-8z",fill:de(d),stroke:de(d),strokeLinejoin:"round",strokeWidth:"2"})),{width:24,mirror:!0})}),
zg=R().memo(function(d){d=d.appearance;return fe(R().createElement(R().Fragment,null,R().createElement("path",{d:"M 2,5 H 22",fill:de(d),stroke:de(d),strokeWidth:"2",strokeLinecap:"round"}),R().createElement("path",{d:"M 6,7 C 5.446,7 5,7.446 5,8 v 9.999992 c 0,0.554 0.446,1 1,1 h 3.0000001 c 0.554,0 0.9999999,-0.446 0.9999999,-1 V 8 C 10,7.446 9.5540001,7 9.0000001,7 Z m 9,0 c -0.554,0 -1,0.446 -1,1 v 5.999992 c 0,0.554 0.446,1 1,1 h 3 c 0.554,0 1,-0.446 1,-1 V 8 C 19,7.446 18.554,7 18,7 Z",fill:Ng(d),
stroke:Ng(d),strokeWidth:"2"})),{width:24,mirror:!0})}),Tc=R().memo(function(d){d=d.appearance;return fe(R().createElement(R().Fragment,null,R().createElement("path",{d:"M 2,19 H 22",fill:de(d),stroke:de(d),strokeWidth:"2",strokeLinecap:"round"}),R().createElement("path",{d:"m 6,16.999992 c -0.554,0 -1,-0.446 -1,-1 V 6 C 5,5.446 5.446,5 6,5 H 9.0000001 C 9.5540001,5 10,5.446 10,6 v 9.999992 c 0,0.554 -0.4459999,1 -0.9999999,1 z m 9,0 c -0.554,0 -1,-0.446 -1,-1 V 10 c 0,-0.554 0.446,-1 1,-1 h 3 c 0.554,0 1,0.446 1,1 v 5.999992 c 0,0.554 -0.446,1 -1,1 z",
fill:Ng(d),stroke:Ng(d),strokeWidth:"2"})),{width:24,mirror:!0})}),Ak=R().memo(function(d){d=d.appearance;return fe(R().createElement(R().Fragment,null,R().createElement("path",{d:"M 5,2 V 22",fill:de(d),stroke:de(d),strokeWidth:"2",strokeLinecap:"round"}),R().createElement("path",{d:"m 7.000004,5.999996 c 0,-0.554 0.446,-1 1,-1 h 9.999992 c 0.554,0 1,0.446 1,1 v 3.0000001 c 0,0.554 -0.446,0.9999999 -1,0.9999999 H 8.000004 c -0.554,0 -1,-0.4459999 -1,-0.9999999 z m 0,9 c 0,-0.554 0.446,-1 1,-1 h 5.999992 c 0.554,0 1,0.446 1,1 v 3 c 0,0.554 -0.446,1 -1,1 H 8.000004 c -0.554,0 -1,-0.446 -1,-1 z",
fill:Ng(d),stroke:Ng(d),strokeWidth:"2"})),{width:24})}),Km=R().memo(function(d){d=d.appearance;return fe(R().createElement(R().Fragment,null,R().createElement("path",{d:"M 19,2 V 22",fill:de(d),stroke:de(d),strokeWidth:"2",strokeLinecap:"round"}),R().createElement("path",{d:"m 16.999996,5.999996 c 0,-0.554 -0.446,-1 -1,-1 H 6.000004 c -0.554,0 -1,0.446 -1,1 v 3.0000001 c 0,0.554 0.446,0.9999999 1,0.9999999 h 9.999992 c 0.554,0 1,-0.4459999 1,-0.9999999 z m 0,9 c 0,-0.554 -0.446,-1 -1,-1 h -5.999992 c -0.554,0 -1,0.446 -1,1 v 3 c 0,0.554 0.446,1 1,1 h 5.999992 c 0.554,0 1,-0.446 1,-1 z",
fill:Ng(d),stroke:Ng(d),strokeWidth:"2"})),{width:24})}),Pf=R().memo(function(d){d=d.appearance;return fe(R().createElement(R().Fragment,null,R().createElement("path",{d:"M5 5V19Z",fill:"black"}),R().createElement("path",{d:"M19 5V19M5 5V19",stroke:de(d),strokeWidth:"2",strokeLinecap:"round"}),R().createElement("path",{d:"M15 9C15.554 9 16 9.446 16 10V14C16 14.554 15.554 15 15 15H9C8.446 15 8 14.554 8 14V10C8 9.446 8.446 9 9 9H15Z",fill:Ng(d),stroke:Ng(d),strokeWidth:"2"})),{width:24})}),Ag=R().memo(function(d){d=
d.appearance;return fe(R().createElement(R().Fragment,null,R().createElement("path",{d:"M5 5L19 5M5 19H19",fill:de(d),stroke:de(d),strokeWidth:"2",strokeLinecap:"round"}),R().createElement("path",{d:"M15 9C15.554 9 16 9.446 16 10V14C16 14.554 15.554 15 15 15H9C8.446 15 8 14.554 8 14V10C8 9.446 8.446 9 9 9H15Z",fill:Ng(d),stroke:Ng(d),strokeWidth:"2"})),{width:24})}),$h=R().memo(function(d){d=d.appearance;return fe(R().createElement(R().Fragment,null,R().createElement("path",{d:"m 5.000004,16.999996 c 0,0.554 0.446,1 1,1 h 3 c 0.554,0 1,-0.446 1,-1 v -10 c 0,-0.554 -0.446,-1 -1,-1 h -3 c -0.554,0 -1,0.446 -1,1 z m 9,-2 c 0,0.554 0.446,1 1,1 h 3 c 0.554,0 1,-0.446 1,-1 v -6 c 0,-0.554 -0.446,-1 -1,-1 h -3 c -0.554,0 -1,0.446 -1,1 z",
fill:Ng(d),stroke:Ng(d),strokeWidth:"2"}),R().createElement("path",{d:"M 2,12 H 22",fill:de(d),stroke:de(d),strokeWidth:"2",strokeDasharray:"1, 2.8",strokeLinecap:"round"})),{width:24,mirror:!0})}),te=R().memo(function(d){d=d.appearance;return fe(R().createElement(R().Fragment,null,R().createElement("path",{d:"M 7 5 C 6.446 5 6 5.446 6 6 L 6 9 C 6 9.554 6.446 10 7 10 L 17 10 C 17.554 10 18 9.554 18 9 L 18 6 C 18 5.446 17.554 5 17 5 L 7 5 z M 9 14 C 8.446 14 8 14.446 8 15 L 8 18 C 8 18.554 8.446 19 9 19 L 15 19 C 15.554 19 16 18.554 16 18 L 16 15 C 16 14.446 15.554 14 15 14 L 9 14 z ",
fill:Ng(d),stroke:Ng(d),strokeWidth:"2"}),R().createElement("path",{d:"M 12,2 V 22",fill:de(d),stroke:de(d),strokeWidth:"2",strokeDasharray:"1, 2.8",strokeLinecap:"round"})),{width:24})}),cl=fe("M192 256c61.9 0 112-50.1 112-112S253.9 32 192 32 80 82.1 80 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C51.6 288 0 339.6 0 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zM480 256c53 0 96-43 96-96s-43-96-96-96-96 43-96 96 43 96 96 96zm48 32h-3.8c-13.9 4.8-28.6 8-44.2 8s-30.3-3.2-44.2-8H432c-20.4 0-39.2 5.9-55.7 15.4 24.4 26.3 39.7 61.2 39.7 99.8v38.4c0 2.2-.5 4.3-.6 6.4H592c26.5 0 48-21.5 48-48 0-61.9-50.1-112-112-112z",
{width:640,height:512,mirror:!0}),ik=(fe("M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm115.7 272l-176 101c-15.8 8.8-35.7-2.5-35.7-21V152c0-18.4 19.8-29.8 35.7-21l176 107c16.4 9.2 16.4 32.9 0 42z"),fe("M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm96 328c0 8.8-7.2 16-16 16H176c-8.8 0-16-7.2-16-16V176c0-8.8 7.2-16 16-16h160c8.8 0 16 7.2 16 16v160z"),fe("M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z",
{width:352,height:512})),Bi=fe("M34.52 239.03L228.87 44.69c9.37-9.37 24.57-9.37 33.94 0l22.67 22.67c9.36 9.36 9.37 24.52.04 33.9L131.49 256l154.02 154.75c9.34 9.38 9.32 24.54-.04 33.9l-22.67 22.67c-9.37 9.37-24.57 9.37-33.94 0L34.52 272.97c-9.37-9.37-9.37-24.57 0-33.94z",{width:320,height:512,style:{marginLeft:"-0.2rem"},mirror:!0}),zd=fe("M464 0c26.51 0 48 21.49 48 48v288c0 26.51-21.49 48-48 48H176c-26.51 0-48-21.49-48-48V48c0-26.51 21.49-48 48-48h288M176 416c-44.112 0-80-35.888-80-80V128H48c-26.51 0-48 21.49-48 48v288c0 26.51 21.49 48 48 48h288c26.51 0 48-21.49 48-48v-48H176z",
{mirror:!0}),Ah=fe("M11.553 22.894a.998.998 0 00.894 0s3.037-1.516 5.465-4.097C19.616 16.987 21 14.663 21 12V5a1 1 0 00-.649-.936l-8-3a.998.998 0 00-.702 0l-8 3A1 1 0 003 5v7c0 2.663 1.384 4.987 3.088 6.797 2.428 2.581 5.465 4.097 5.465 4.097zm-1.303-8.481l6.644-6.644a.856.856 0 111.212 1.212l-7.25 7.25a.856.856 0 01-1.212 0l-3.75-3.75a.856.856 0 111.212-1.212l3.144 3.144z",{width:24}),jf=R().memo(function(d){d=d.appearance;return fe(R().createElement(R().Fragment,null,R().createElement("path",{d:"M25 26H111V111H25",
fill:de(d)}),R().createElement("path",{d:"M25 111C25 80.2068 25 49.4135 25 26M25 26C48.6174 26 72.2348 26 111 26H25ZM25 26C53.3671 26 81.7343 26 111 26H25ZM111 26C111 52.303 111 78.606 111 111V26ZM111 26C111 51.2947 111 76.5893 111 111V26ZM111 111C87.0792 111 63.1585 111 25 111H111ZM111 111C87.4646 111 63.9293 111 25 111H111ZM25 111C25 81.1514 25 51.3028 25 26V111Z",stroke:de(d),strokeWidth:"2"}),R().createElement("path",{d:"M100 100H160V160H100",fill:de(d)}),R().createElement("path",{d:"M100 160C100 144.106 100 128.211 100 100M100 100C117.706 100 135.412 100 160 100H100ZM100 100C114.214 100 128.428 100 160 100H100ZM160 100C160 120.184 160 140.369 160 160V100ZM160 100C160 113.219 160 126.437 160 160V100ZM160 160C145.534 160 131.068 160 100 160H160ZM160 160C143.467 160 126.934 160 100 160H160ZM100 160C100 143.661 100 127.321 100 100V160Z",
stroke:de(d),strokeWidth:"2"}),R().createElement("rect",{x:"2.5",y:"2.5",width:"30",height:"30",fill:Jg(d),stroke:de(d),strokeWidth:"6"}),R().createElement("rect",{x:"2.5",y:"149.5",width:"30",height:"30",fill:Jg(d),stroke:de(d),strokeWidth:"6"}),R().createElement("rect",{x:"147.5",y:"149.5",width:"30",height:"30",fill:Jg(d),stroke:de(d),strokeWidth:"6"}),R().createElement("rect",{x:"147.5",y:"2.5",width:"30",height:"30",fill:Jg(d),stroke:de(d),strokeWidth:"6"})),{width:182,height:182,mirror:!0})}),
fi=R().memo(function(d){d=d.appearance;return fe(R().createElement(R().Fragment,null,R().createElement("path",{d:"M25 26H111V111H25",fill:de(d)}),R().createElement("path",{d:"M25 111C25 80.2068 25 49.4135 25 26M25 26C48.6174 26 72.2348 26 111 26H25ZM25 26C53.3671 26 81.7343 26 111 26H25ZM111 26C111 52.303 111 78.606 111 111V26ZM111 26C111 51.2947 111 76.5893 111 111V26ZM111 111C87.0792 111 63.1585 111 25 111H111ZM111 111C87.4646 111 63.9293 111 25 111H111ZM25 111C25 81.1514 25 51.3028 25 26V111Z",
stroke:de(d),strokeWidth:"2"}),R().createElement("path",{d:"M100 100H160V160H100",fill:de(d)}),R().createElement("path",{d:"M100 160C100 144.106 100 128.211 100 100M100 100C117.706 100 135.412 100 160 100H100ZM100 100C114.214 100 128.428 100 160 100H100ZM160 100C160 120.184 160 140.369 160 160V100ZM160 100C160 113.219 160 126.437 160 160V100ZM160 160C145.534 160 131.068 160 100 160H160ZM160 160C143.467 160 126.934 160 100 160H160ZM100 160C100 143.661 100 127.321 100 100V160Z",stroke:de(d),strokeWidth:"2"}),
R().createElement("rect",{x:"2.5",y:"2.5",width:"30",height:"30",fill:Jg(d),stroke:de(d),strokeWidth:"6"}),R().createElement("rect",{x:"78.5",y:"149.5",width:"30",height:"30",fill:Jg(d),stroke:de(d),strokeWidth:"6"}),R().createElement("rect",{x:"147.5",y:"149.5",width:"30",height:"30",fill:Jg(d),stroke:de(d),strokeWidth:"6"}),R().createElement("rect",{x:"147.5",y:"78.5",width:"30",height:"30",fill:Jg(d),stroke:de(d),strokeWidth:"6"}),R().createElement("rect",{x:"105.5",y:"2.5",width:"30",height:"30",
fill:Jg(d),stroke:de(d),strokeWidth:"6"}),R().createElement("rect",{x:"2.5",y:"102.5",width:"30",height:"30",fill:Jg(d),stroke:de(d),strokeWidth:"6"})),{width:182,height:182,mirror:!0})}),$d=R().memo(function(d){d=d.appearance;return fe(R().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20.101 16H28.0934L36 8.95989V4H33.5779L20.101 16ZM30.5704 4L17.0935 16H9.10101L22.5779 4H30.5704ZM19.5704 4L6.09349 16H4V10.7475L11.5779 4H19.5704ZM8.57036 4H4V8.06952L8.57036 4ZM36 11.6378L31.101 16H36V11.6378ZM2 2V18H38V2H2Z",
fill:de(d)}),{width:40,height:20})}),Ui=R().memo(function(d){d=d.appearance;return fe(R().createElement("g",{fill:de(d),fillRule:"evenodd",clipRule:"evenodd"},R().createElement("path",{d:"M20.101 16H28.0934L36 8.95989V4H33.5779L20.101 16ZM30.5704 4L17.0935 16H9.10101L22.5779 4H30.5704ZM19.5704 4L6.09349 16H4V10.7475L11.5779 4H19.5704ZM8.57036 4H4V8.06952L8.57036 4ZM36 11.6378L31.101 16H36V11.6378ZM2 2V18H38V2H2Z"}),R().createElement("path",{d:"M14.0001 18L3.00006 4.00002L4.5727 2.76438L15.5727 16.7644L14.0001 18ZM25.0001 18L14.0001 4.00002L15.5727 2.76438L26.5727 16.7644L25.0001 18ZM36.0001 18L25.0001 4.00002L26.5727 2.76438L37.5727 16.7644L36.0001 18Z"})),
{width:40,height:20})}),rg=R().memo(function(d){d=d.appearance;return fe(R().createElement("path",{d:"M2 2H38V18H2V2Z",fill:de(d)}),{width:40,height:20})}),wl=R().memo(function(d){var h=d.appearance;d=d.strokeWidth;return fe(R().createElement("path",{d:"M6 10H34",stroke:de(h),strokeWidth:d,fill:"none"}),{width:40,height:20})}),Kh=R().memo(function(d){d=d.appearance;return fe(R().createElement("path",{d:"M6 10H34",stroke:de(d),strokeWidth:2,fill:"none"}),{width:40,height:20})}),Yj=R().memo(function(d){d=
d.appearance;return fe(R().createElement("path",{d:"M6 10H34",stroke:de(d),strokeWidth:2.5,strokeDasharray:"10, 8",fill:"none"}),{width:40,height:20})}),jj=R().memo(function(d){d=d.appearance;return fe(R().createElement("path",{d:"M6 10H34",stroke:de(d),strokeWidth:2.5,strokeDasharray:"4, 4",fill:"none"}),{width:40,height:20})}),ki=R().memo(function(d){d=d.appearance;return fe(R().createElement("path",{d:"M3.00098 16.1691C6.28774 13.9744 19.6399 2.8905 22.7215 3.00082C25.8041 3.11113 19.1158 15.5488 21.4962 16.8309C23.8757 18.1131 34.4155 11.7148 37.0001 10.6919",
stroke:de(d),strokeWidth:2,fill:"none"}),{width:40,height:20,mirror:!0})}),Bk=R().memo(function(d){d=d.appearance;return fe(R().createElement("path",{d:"M3 17C6.68158 14.8752 16.1296 9.09849 22.0648 6.54922C28 3.99995 22.2896 13.3209 25 14C27.7104 14.6791 36.3757 9.6471 36.3757 9.6471M6.40706 15C13 11.1918 20.0468 1.51045 23.0234 3.0052C26 4.49995 20.457 12.8659 22.7285 16.4329C25 20 36.3757 13 36.3757 13",stroke:de(d),strokeWidth:2,fill:"none"}),{width:40,height:20,mirror:!0})}),fh=R().memo(function(d){d=
d.appearance;return fe(R().createElement("path",{d:"M3 15.6468C6.93692 13.5378 22.5544 2.81528 26.6206 3.00242C30.6877 3.18956 25.6708 15.3346 27.4009 16.7705C29.1309 18.2055 35.4001 12.4762 37 11.6177M3.97143 10.4917C6.61158 9.24563 16.3706 2.61886 19.8104 3.01724C23.2522 3.41472 22.0773 12.2013 24.6181 12.8783C27.1598 13.5536 33.3179 8.04068 35.0571 7.07244",stroke:de(d),strokeWidth:2,fill:"none"}),{width:40,height:20,mirror:!0})}),Pl=R().memo(function(d){d=d.appearance;return fe(R().createElement("path",
{d:"M10 17L10 5L35 5",stroke:de(d),strokeWidth:2,fill:"none"}),{width:40,height:20,mirror:!0})}),pj=R().memo(function(d){d=d.appearance;return fe(R().createElement("path",{d:"M10 17V15C10 8 13 5 21 5L33.5 5",stroke:de(d),strokeWidth:2,fill:"none"}),{width:40,height:20,mirror:!0})}),fg=R().memo(function(d){d=d.appearance;return fe(R().createElement("path",{d:"M6 10H34",stroke:de(d),strokeWidth:2,fill:"none"}),{width:40,height:20})}),vn=R().memo(function(d){var h=d.appearance;d=d.flip;d=void 0!==d&&
d;return fe(R().createElement("g",{transform:d?"translate(40, 0) scale(-1, 1)":"",stroke:de(h),strokeWidth:2,fill:"none"},R().createElement("path",{d:"M34 10H6M34 10L27 5M34 10L27 15"}),R().createElement("path",{d:"M27.5 5L34.5 10L27.5 15"})),{width:40,height:20})}),Ql=R().memo(function(d){var h=d.appearance;d=d.flip;d=void 0!==d&&d;return fe(R().createElement("g",{stroke:de(h),fill:de(h),transform:d?"translate(40, 0) scale(-1, 1)":""},R().createElement("path",{d:"M32 10L6 10",strokeWidth:2}),R().createElement("circle",
{r:"4",transform:"matrix(-1 0 0 1 30 10)"})),{width:40,height:20})}),sg=R().memo(function(d){var h=d.appearance;d=d.flip;d=void 0!==d&&d;return fe(R().createElement("g",{transform:d?"translate(40, 0) scale(-1, 1)":""},R().createElement("path",{d:"M34 10H5.99996M34 10L34 5M34 10L34 15",stroke:de(h),strokeWidth:2,fill:"none"})),{width:40,height:20})}),Pk=[],Wd=function(d){return Pk=Pk.concat(d),d},Eg=function(d,h){var m;return d.editingGroupId&&(h=Pj(Rd(h),d.editingGroupId),h.length)?Wc(Wc({},d),{},
{selectedElementIds:(m={},m[h[0].id]=!0,m)}):d},Ff=Wd({name:"deleteSelectedElements",perform:function(d,h){if(h.editingLinearElement){var m=h.editingLinearElement,A=m.activePointIndex,P=m.startBindingElement,W=m.endBindingElement,va=Nf.getElement(m.elementId);if(!va)return!1;if(null==A||-1===A||2>va.points.length)return d=d.filter(function(qa){return qa.id!==va.id}),{elements:d,appState:Wc(Wc({},Eg(h,d)),{},{editingLinearElement:null}),commitToHistory:!1};m={startBindingElement:0===A?null:P,endBindingElement:A===
va.points.length-1?null:W};return Nf.movePoint(va,A,"delete"),{elements:d,appState:Wc(Wc({},h),{},{editingLinearElement:Wc(Wc(Wc({},h.editingLinearElement),m),{},{activePointIndex:0<A?A-1:0})}),commitToHistory:!0}}m=function(qa,Aa){return{elements:qa.map(function(La){return Aa.selectedElementIds[La.id]?vg(La,{isDeleted:!0}):La}),appState:Wc(Wc({},Aa),{},{selectedElementIds:{}})}}(d,h);A=m.elements;m=m.appState;return nj(A,d.filter(function(qa){return h.selectedElementIds[qa.id]})),{elements:A,appState:Wc(Wc({},
m=Eg(m,A)),{},{elementType:"selection",multiElement:null}),commitToHistory:Yg(Rd(d),h)}},contextItemLabel:"labels.delete",keyTest:function(d){return"Backspace"===d.key||"Delete"===d.key},PanelComponent:function(d){var h=d.elements,m=d.appState,A=d.updateData;return R().createElement(Te,{type:"button",icon:Ki,title:Jb("labels.delete"),"aria-label":Jb("labels.delete"),onClick:function(){return A(null)},visible:Yg(Rd(h),m)})}}),Bh=function(d,h){for(var m=0,A=h.length,P=d.length;m<A;m++,P++)d[P]=h[m];
return d},Cj=function(d,h){for(var m=[],A=[],P=null,W=-1;++W<d.length;)h.selectedElementIds[d[W].id]?(A.length&&(m=m.concat(A),A=[]),m.push(W),P=W+1):d[W].isDeleted&&P===W?(P=W+1,A.push(W)):A=[];return m},Nh=function(d,h,m,A){var P=h[m],W=function(va){return!va.isDeleted&&(!d.editingGroupId||va.groupIds.includes(d.editingGroupId))};m="left"===A?function(va,qa,Aa){void 0===Aa&&(Aa=va.length-1);0>Aa&&(Aa=va.length+Aa);for(Aa=Math.min(va.length-1,Math.max(Aa,0))+1;-1<--Aa;)if(qa(va[Aa],Aa,va))return Aa;
return-1}(h,W,Math.max(0,m-1)):function(va,qa,Aa){void 0===Aa&&(Aa=0);0>Aa&&(Aa=va.length+Aa);for(Aa=Math.min(va.length,Math.max(Aa,0))-1;++Aa<va.length;)if(qa(va[Aa],Aa,va))return Aa;return-1}(h,W,m+1);W=h[m];if(!W)return-1;if(d.editingGroupId){if((null==P?void 0:P.groupIds.join(""))===(null==W?void 0:W.groupIds.join("")))return m;if(null==W||!W.groupIds.includes(d.editingGroupId))return-1}if(!W.groupIds.length)return m;P=d.editingGroupId?W.groupIds[W.groupIds.indexOf(d.editingGroupId)-1]:W.groupIds[W.groupIds.length-
1];P=Pj(h,P);return P.length?"left"===A?h.indexOf(P[0]):h.indexOf(P[P.length-1]):m},Xf=function(d,h,m){var A,P=Cj(h,d),W=(A=0,P.reduce(function(va,qa,Aa){return 0<Aa&&P[Aa-1]!==qa-1&&(A=++A),(va[A]||(va[A]=[])).push(qa),va},[]));return"right"===m&&(W=W.reverse()),W.forEach(function(va,qa){qa=va[0];va=va[va.length-1];var Aa="left"===m?qa:va,La=Nh(d,h,Aa,m);if(-1!==La&&Aa!==La){Aa="left"===m?h.slice(0,La):h.slice(0,qa);var Ga=h.slice(qa,va+1);qa="left"===m?h.slice(La,qa):h.slice(va+1,La+1);va="left"===
m?h.slice(va+1):h.slice(La+1);h=Bh("left"===m?Bh(Bh(Bh([],Aa),Ga),qa):Bh(Bh(Bh([],Aa),qa),Ga),va)}}),h},gh=function(d,h,m){var A=Cj(d,h),P=[],W=[];if("left"===m){if(h.editingGroupId){if(!(h=Pj(d,h.editingGroupId)).length)return d;var va=d.indexOf(h[0])}else va=0;h=A[A.length-1]}else{if(h.editingGroupId){if(!(h=Pj(d,h.editingGroupId)).length)return d;h=d.indexOf(h[h.length-1])}else h=d.length-1;va=A[0]}for(var qa=va;qa<h+1;qa++)A.includes(qa)?P.push(d[qa]):W.push(d[qa]);A=d.slice(0,va);d=d.slice(h+
1);return Bh("left"===m?Bh(Bh(Bh([],A),P),W):Bh(Bh(Bh([],A),W),P),d)},kj=Wd({name:"sendBackward",perform:function(d,h){return{elements:Xf(h,d.slice(),"left"),appState:h,commitToHistory:!0}},contextItemLabel:"labels.sendBackward",keyPriority:40,keyTest:function(d){return d[xe]&&!d.shiftKey&&"BracketLeft"===d.code},PanelComponent:function(d){var h=d.updateData;d=d.appState;return R().createElement("button",{type:"button",className:"zIndexButton",onClick:function(){return h(null)},title:"".concat(Jb("labels.sendBackward"),
" — ").concat(Ed("CtrlOrCmd+["))},R().createElement(jk,{appearance:d.appearance}))}}),Fl=Wd({name:"bringForward",perform:function(d,h){return{elements:Xf(h,d.slice(),"right"),appState:h,commitToHistory:!0}},contextItemLabel:"labels.bringForward",keyPriority:40,keyTest:function(d){return d[xe]&&!d.shiftKey&&"BracketRight"===d.code},PanelComponent:function(d){var h=d.updateData;d=d.appState;return R().createElement("button",{type:"button",className:"zIndexButton",onClick:function(){return h(null)},
title:"".concat(Jb("labels.bringForward")," — ").concat(Ed("CtrlOrCmd+]"))},R().createElement(qj,{appearance:d.appearance}))}}),f=Wd({name:"sendToBack",perform:function(d,h){return{elements:gh(d,h,"left"),appState:h,commitToHistory:!0}},contextItemLabel:"labels.sendToBack",keyTest:function(d){return ui?d[xe]&&d.altKey&&"BracketLeft"===d.code:d[xe]&&d.shiftKey&&"BracketLeft"===d.code},PanelComponent:function(d){var h=d.updateData;d=d.appState;return R().createElement("button",{type:"button",className:"zIndexButton",
onClick:function(){return h(null)},title:"".concat(Jb("labels.sendToBack")," — ").concat(Ed(ui?"CtrlOrCmd+Alt+[":"CtrlOrCmd+Shift+["))},R().createElement(sd,{appearance:d.appearance}))}}),y=Wd({name:"bringToFront",perform:function(d,h){return{elements:gh(d,h,"right"),appState:h,commitToHistory:!0}},contextItemLabel:"labels.bringToFront",keyTest:function(d){return ui?d[xe]&&d.altKey&&"BracketRight"===d.code:d[xe]&&d.shiftKey&&"BracketRight"===d.code},PanelComponent:function(d){var h=d.updateData;d=
d.appState;return R().createElement("button",{type:"button",className:"zIndexButton",onClick:function(m){return h(null)},title:"".concat(Jb("labels.bringToFront")," — ").concat(Ed(ui?"CtrlOrCmd+Alt+]":"CtrlOrCmd+Shift+]"))},R().createElement(ed,{appearance:d.appearance}))}}),V=Wd({name:"selectAll",perform:function(d,h){return!h.editingLinearElement&&{appState:Je($c($c({},h),{},{editingGroupId:null,selectedElementIds:d.reduce(function(m,A){return A.isDeleted||(m[A.id]=!0),m},{})}),Rd(d)),commitToHistory:!0}},
contextItemLabel:"labels.selectAll",keyTest:function(d){return d[xe]&&"a"===d.key}}),U=function(d,h){for(var m=0,A=h.length,P=d.length;m<A;m++,P++)d[P]=h[m];return d},fa=Wd({name:"duplicateSelection",perform:function(d,h){if(h.editingLinearElement){var m=h.editingLinearElement,A=m.activePointIndex;m=Nf.getElement(m.elementId);if(!m||null===A)return!1;var P=m.points,W=P[A],va=P[A+1];return pe(m,{points:U(U(U([],P.slice(0,A+1)),[va?[(W[0]+va[0])/2,(W[1]+va[1])/2]:[W[0]+30,W[1]+30]]),P.slice(A+1))}),
{appState:ze(ze({},h),{},{editingLinearElement:ze(ze({},h.editingLinearElement),{},{activePointIndex:A+1})}),elements:d,commitToHistory:!0}}return ze(ze({},za(d,h)),{},{commitToHistory:!0})},contextItemLabel:"labels.duplicateSelection",keyTest:function(d){return d[xe]&&"d"===d.key},PanelComponent:function(d){var h=d.elements,m=d.appState,A=d.updateData;return R().createElement(Te,{type:"button",icon:zd,title:"".concat(Jb("labels.duplicateSelection")," — ").concat(Ed("CtrlOrCmd+D")),"aria-label":Jb("labels.duplicateSelection"),
onClick:function(){return A(null)},visible:Yg(Rd(h),m)})}}),za=function(d,h){for(var m=new Map,A=[],P=[],W=new Map,va=function(gb){var ib=Hi(h.editingGroupId,m,gb,{x:gb.x+Na.k/2,y:gb.y+Na.k/2});return W.set(gb.id,ib.id),P.push(gb),A.push(ib),ib},qa=[],Aa=0;Aa<d.length;){var La=d[Aa];if(h.selectedElementIds[La.id]){if(La.groupIds.length){var Ga=Hh(h,La);if(Ga){La=Pj(d,Ga);qa.push.apply(qa,U(U([],La),La.map(function(gb){return va(gb)})));Aa+=La.length;continue}}qa.push(La,va(La))}else qa.push(La);Aa++}return tj(qa,
P,W),{elements:qa,appState:Je(ze(ze({},h),{},{selectedGroupIds:{},selectedElementIds:A.reduce(function(gb,ib){return gb[ib.id]=!0,gb},{})}),Rd(qa))}},Ia=function(d){var h=d.options,m=d.value,A=d.onChange,P=d.group;return R().createElement("div",{className:"buttonList buttonListIcon"},h.map(function(W){return R().createElement("label",{key:W.text,className:zc({active:m===W.value}),title:W.text},R().createElement("input",{type:"radio",name:P,onChange:function(){return A(W.value)},checked:m===W.value}),
W.icon)}))},Qa=function(d){var h=d.options,m=d.value,A=d.onChange,P=d.group;return R().createElement("div",{className:"buttonList"},h.map(function(W){return R().createElement("label",{key:W.text,className:zc({active:m===W.value})},R().createElement("input",{type:"radio",name:P,onChange:function(){return A(W.value)},checked:m===W.value}),W.text)}))},db=(g(2816),function(d){var h=d.children,m=d.left,A=d.top,P=d.onCloseRequest;d=d.fitInViewport;var W=void 0!==d&&d,va=(0,Z.useRef)(null);return(0,Z.useLayoutEffect)(function(){if(W&&
va.current){var qa=va.current,Aa=qa.getBoundingClientRect(),La=Aa.y,Ga=Aa.width,gb=Aa.height,ib=window.innerWidth;Aa.x+Ga>ib&&(qa.style.left="".concat(ib-Ga,"px"));Aa=window.innerHeight;La+gb>Aa&&(qa.style.top="".concat(Aa-gb,"px"))}},[W]),(0,Z.useEffect)(function(){if(P){var qa=function(Aa){var La;null!==(La=va.current)&&void 0!==La&&La.contains(Aa.target)||(0,ag.unstable_batchedUpdates)(function(){return P(Aa)})};return document.addEventListener("pointerdown",qa,!1),function(){return document.removeEventListener("pointerdown",
qa,!1)}}},[P]),R().createElement("div",{className:"popover",style:{top:A,left:m},ref:va},h)}),qb=(g(5574),function(d){var h=(new Option).style;return h.color=d,!!h.color}),Db=[["1","2","3","4","5"],["q","w","e","r","t"],["a","s","d","f","g"]].flat(),bc=function(d){var h=d.colors,m=d.color,A=d.onChange,P=d.onClose,W=d.label,va=d.showInput,qa=void 0===va||va;d=d.type;var Aa=R().useRef(),La=R().useRef(),Ga=R().useRef(),gb=R().useRef();R().useEffect(function(){La.current?La.current.focus():gb.current?
gb.current.focus():Ga.current&&Ga.current.focus()},[]);return R().createElement("div",{className:"color-picker color-picker-type-".concat(d),role:"dialog","aria-modal":"true","aria-label":Jb("labels.colorPicker"),onKeyDown:function(ib){if("Tab"===ib.key){var kb,Kb=document.activeElement;if(ib.shiftKey)Kb===Aa.current&&(null===(kb=gb.current)||void 0===kb||kb.focus(),ib.preventDefault());else if(Kb===gb.current){var Ib;null===(Ib=Aa.current)||void 0===Ib||Ib.focus();ib.preventDefault()}}else Mj(ib.key)?
(Kb=document.activeElement,kb=ef.rtl,-1!==(Ib=Array.prototype.indexOf.call(Ga.current.children,Kb))&&(Kb=Ga.current.children.length-(qa?1:0),Ga.current.children[ib.key===(kb?"ArrowLeft":"ArrowRight")?(Ib+1)%Kb:ib.key===(kb?"ArrowRight":"ArrowLeft")?(Kb+Ib-1)%Kb:"ArrowDown"===ib.key?(Ib+5)%Kb:"ArrowUp"===ib.key?(Kb+Ib-5)%Kb:Ib].focus()),ib.preventDefault()):Db.includes(ib.key.toLowerCase())&&!ah(ib.target)?(Ib=Db.indexOf(ib.key.toLowerCase()),Ga.current.children[Ib].focus(),ib.preventDefault()):"Escape"!==
ib.key&&"Enter"!==ib.key||(ib.preventDefault(),P());ib.nativeEvent.stopImmediatePropagation()}},R().createElement("div",{className:"color-picker-triangle color-picker-triangle-shadow"}),R().createElement("div",{className:"color-picker-triangle"}),R().createElement("div",{className:"color-picker-content",ref:function(ib){ib&&(Ga.current=ib)},tabIndex:0},h.map(function(ib,kb){return R().createElement("button",{className:"color-picker-swatch",onClick:function(Kb){Kb.currentTarget.focus();A(ib)},title:"".concat(ib,
" — ").concat(Db[kb].toUpperCase()),"aria-label":ib,"aria-keyshortcuts":Db[kb],style:{color:ib},key:ib,ref:function(Kb){Kb&&0===kb&&(Aa.current=Kb);Kb&&ib===m&&(La.current=Kb)},onFocus:function(){A(ib)}},"transparent"===ib?R().createElement("div",{className:"color-picker-transparent"}):void 0,R().createElement("span",{className:"color-picker-keybinding"},Db[kb]))}),qa&&R().createElement(gc,{color:m,label:W,onChange:function(ib){A(ib)},ref:gb})))},gc=R().forwardRef(function(d,h){var m=d.color,A=d.onChange;
d=d.label;var P=R().useState(m),W=P[0],va=P[1],qa=R().useRef(null);R().useEffect(function(){va(m)},[m]);R().useImperativeHandle(h,function(){return qa.current});var Aa=R().useCallback(function(La){La=La.toLowerCase();var Ga;(Ga="transparent"===La||qb(La)?La:qb("#".concat(La))?"#".concat(La):null)&&A(Ga);va(La)},[A]);return R().createElement("label",{className:"color-input-container"},R().createElement("div",{className:"color-picker-hash"},"#"),R().createElement("input",{spellCheck:!1,className:"color-picker-input",
"aria-label":d,onChange:function(La){return Aa(La.target.value)},value:(W||"").replace(/^#/,""),onBlur:function(){return va(m)},ref:qa}))}),hc=function(d){var h=d.type,m=d.color,A=d.onChange;d=d.label;var P=R().useState(!1),W=P[0],va=P[1],qa=R().useRef(null);return R().createElement("div",null,R().createElement("div",{className:"color-picker-control-container"},R().createElement("button",{className:"color-picker-label-swatch","aria-label":d,style:m?{"--swatch-color":m}:void 0,onClick:function(){return va(!W)},
ref:qa}),R().createElement(gc,{color:m,label:d,onChange:function(Aa){A(Aa)}})),R().createElement(R().Suspense,{fallback:""},W?R().createElement(db,{onCloseRequest:function(Aa){return Aa.target!==qa.current&&va(!1)}},R().createElement(bc,{colors:uj[h],color:m||null,onChange:function(Aa){A(Aa)},onClose:function(){var Aa;va(!1);null===(Aa=qa.current)||void 0===Aa||Aa.focus()},label:d,showInput:!1,type:h})):null))},Oc=g(6950),xd=g.n(Oc);g(7143);var Yd=function(d,h,m){return d.map(function(A){var P;return h.selectedElementIds[A.id]||
A.id===(null===(P=h.editingElement)||void 0===P?void 0:P.id)?m(A):A})},Yf=function(d,h,m,A){var P,W,va=h.editingElement;d=Rd(d);return null!==(P=null!==(W=va&&m(va))&&void 0!==W?W:Yg(d,h)?function(qa,Aa,La){qa=Array.from(new Set(We(qa,Aa).map(function(Ga){return La(Ga)})));return 1===qa.length?qa[0]:null}(d,h,m):A)&&void 0!==P?P:null},he=(Wd({name:"changeStrokeColor",perform:function(d,h,m){return{elements:Yd(d,h,function(A){return vg(A,{strokeColor:m})}),appState:je(je({},h),{},{currentItemStrokeColor:m}),
commitToHistory:!0}},PanelComponent:function(d){var h=d.elements,m=d.appState;d=d.updateData;return R().createElement(R().Fragment,null,R().createElement("h3",{"aria-hidden":"true"},Jb("labels.stroke")),R().createElement(hc,{type:"elementStroke",label:Jb("labels.stroke"),color:Yf(h,m,function(A){return A.strokeColor},m.currentItemStrokeColor),onChange:d}))}}),Wd({name:"changeBackgroundColor",perform:function(d,h,m){return{elements:Yd(d,h,function(A){return vg(A,{backgroundColor:m})}),appState:je(je({},
h),{},{currentItemBackgroundColor:m}),commitToHistory:!0}},PanelComponent:function(d){var h=d.elements,m=d.appState;d=d.updateData;return R().createElement(R().Fragment,null,R().createElement("h3",{"aria-hidden":"true"},Jb("labels.background")),R().createElement(hc,{type:"elementBackground",label:Jb("labels.background"),color:Yf(h,m,function(A){return A.backgroundColor},m.currentItemBackgroundColor),onChange:d}))}}),Wd({name:"changeFillStyle",perform:function(d,h,m){return{elements:Yd(d,h,function(A){return vg(A,
{fillStyle:m})}),appState:je(je({},h),{},{currentItemFillStyle:m}),commitToHistory:!0}},PanelComponent:function(d){var h=d.elements,m=d.appState,A=d.updateData;return R().createElement("fieldset",null,R().createElement("legend",null,Jb("labels.fill")),R().createElement(Ia,{options:[{value:"hachure",text:Jb("labels.hachure"),icon:R().createElement($d,{appearance:m.appearance})},{value:"cross-hatch",text:Jb("labels.crossHatch"),icon:R().createElement(Ui,{appearance:m.appearance})},{value:"solid",text:Jb("labels.solid"),
icon:R().createElement(rg,{appearance:m.appearance})}],group:"fill",value:Yf(h,m,function(P){return P.fillStyle},m.currentItemFillStyle),onChange:function(P){A(P)}}))}}),Wd({name:"changeStrokeWidth",perform:function(d,h,m){return{elements:Yd(d,h,function(A){return vg(A,{strokeWidth:m})}),appState:je(je({},h),{},{currentItemStrokeWidth:m}),commitToHistory:!0}},PanelComponent:function(d){var h=d.elements,m=d.appState,A=d.updateData;return R().createElement("fieldset",null,R().createElement("legend",
null,Jb("labels.strokeWidth")),R().createElement(Ia,{group:"stroke-width",options:[{value:1,text:Jb("labels.thin"),icon:R().createElement(wl,{appearance:m.appearance,strokeWidth:2})},{value:2,text:Jb("labels.bold"),icon:R().createElement(wl,{appearance:m.appearance,strokeWidth:6})},{value:4,text:Jb("labels.extraBold"),icon:R().createElement(wl,{appearance:m.appearance,strokeWidth:10})}],value:Yf(h,m,function(P){return P.strokeWidth},m.currentItemStrokeWidth),onChange:function(P){return A(P)}}))}}),
Wd({name:"changeSloppiness",perform:function(d,h,m){return{elements:Yd(d,h,function(A){return vg(A,{seed:dj(),roughness:m})}),appState:je(je({},h),{},{currentItemRoughness:m}),commitToHistory:!0}},PanelComponent:function(d){var h=d.elements,m=d.appState,A=d.updateData;return R().createElement("fieldset",null,R().createElement("legend",null,Jb("labels.sloppiness")),R().createElement(Ia,{group:"sloppiness",options:[{value:0,text:Jb("labels.architect"),icon:R().createElement(ki,{appearance:m.appearance})},
{value:1,text:Jb("labels.artist"),icon:R().createElement(Bk,{appearance:m.appearance})},{value:2,text:Jb("labels.cartoonist"),icon:R().createElement(fh,{appearance:m.appearance})}],value:Yf(h,m,function(P){return P.roughness},m.currentItemRoughness),onChange:function(P){return A(P)}}))}}),Wd({name:"changeStrokeStyle",perform:function(d,h,m){return{elements:Yd(d,h,function(A){return vg(A,{strokeStyle:m})}),appState:je(je({},h),{},{currentItemStrokeStyle:m}),commitToHistory:!0}},PanelComponent:function(d){var h=
d.elements,m=d.appState,A=d.updateData;return R().createElement("fieldset",null,R().createElement("legend",null,Jb("labels.strokeStyle")),R().createElement(Ia,{group:"strokeStyle",options:[{value:"solid",text:Jb("labels.strokeStyle_solid"),icon:R().createElement(Kh,{appearance:m.appearance})},{value:"dashed",text:Jb("labels.strokeStyle_dashed"),icon:R().createElement(Yj,{appearance:m.appearance})},{value:"dotted",text:Jb("labels.strokeStyle_dotted"),icon:R().createElement(jj,{appearance:m.appearance})}],
value:Yf(h,m,function(P){return P.strokeStyle},m.currentItemStrokeStyle),onChange:function(P){return A(P)}}))}}),Wd({name:"changeOpacity",perform:function(d,h,m){return{elements:Yd(d,h,function(A){return vg(A,{opacity:m})}),appState:je(je({},h),{},{currentItemOpacity:m}),commitToHistory:!0}},PanelComponent:function(d){var h,m=d.elements,A=d.appState,P=d.updateData;return R().createElement("label",{className:"control-label"},Jb("labels.opacity"),R().createElement("input",{type:"range",min:"0",max:"100",
step:"10",onChange:function(W){return P(+W.target.value)},onWheel:function(W){W.stopPropagation();var va=+W.target.value;0>W.deltaY&&100>va?P(va+10):0<W.deltaY&&0<va&&P(va-10)},value:null!==(h=Yf(m,A,function(W){return W.opacity},A.currentItemOpacity))&&void 0!==h?h:void 0}))}}),Wd({name:"changeFontSize",perform:function(d,h,m){return{elements:Yd(d,h,function(A){return og(A)?(A=vg(A,{fontSize:m}),th(A),A):A}),appState:je(je({},h),{},{currentItemFontSize:m}),commitToHistory:!0}},PanelComponent:function(d){var h=
d.elements,m=d.appState,A=d.updateData;return R().createElement("fieldset",null,R().createElement("legend",null,Jb("labels.fontSize")),R().createElement(Qa,{group:"font-size",options:[{value:16,text:Jb("labels.small")},{value:20,text:Jb("labels.medium")},{value:28,text:Jb("labels.large")},{value:36,text:Jb("labels.veryLarge")}],value:Yf(h,m,function(P){return og(P)&&P.fontSize},m.currentItemFontSize||Na.n5),onChange:function(P){return A(P)}}))}}),Wd({name:"changeFontFamily",perform:function(d,h,m){return{elements:Yd(d,
h,function(A){return og(A)?(A=vg(A,{fontFamily:m}),th(A),A):A}),appState:je(je({},h),{},{currentItemFontFamily:m}),commitToHistory:!0}},PanelComponent:function(d){var h=d.elements,m=d.appState,A=d.updateData;d=[{value:1,text:Jb("labels.handDrawn")},{value:2,text:Jb("labels.normal")},{value:3,text:Jb("labels.code")}];return R().createElement("fieldset",null,R().createElement("legend",null,Jb("labels.fontFamily")),R().createElement(Qa,{group:"font-family",options:d,value:Yf(h,m,function(P){return og(P)&&
P.fontFamily},m.currentItemFontFamily||Na.rk),onChange:function(P){return A(P)}}))}}),Wd({name:"changeTextAlign",perform:function(d,h,m){return{elements:Yd(d,h,function(A){return og(A)?(A=vg(A,{textAlign:m}),th(A),A):A}),appState:je(je({},h),{},{currentItemTextAlign:m}),commitToHistory:!0}},PanelComponent:function(d){var h=d.elements,m=d.appState,A=d.updateData;return R().createElement("fieldset",null,R().createElement("legend",null,Jb("labels.textAlign")),R().createElement(Qa,{group:"text-align",
options:[{value:"left",text:Jb("labels.left")},{value:"center",text:Jb("labels.center")},{value:"right",text:Jb("labels.right")}],value:Yf(h,m,function(P){return og(P)&&P.textAlign},m.currentItemTextAlign),onChange:function(P){return A(P)}}))}}),Wd({name:"changeSharpness",perform:function(d,h,m){var A=Bj(Rd(d),h),P=A.length?A.every(function(W){return!cg(W)}):!If(h.elementType);A=A.length?A.every(cg):If(h.elementType);return{elements:Yd(d,h,function(W){return vg(W,{strokeSharpness:m})}),appState:je(je({},
h),{},{currentItemStrokeSharpness:P?m:h.currentItemStrokeSharpness,currentItemLinearStrokeSharpness:A?m:h.currentItemLinearStrokeSharpness}),commitToHistory:!0}},PanelComponent:function(d){var h=d.elements,m=d.appState,A=d.updateData;return R().createElement("fieldset",null,R().createElement("legend",null,Jb("labels.edges")),R().createElement(Ia,{group:"edges",options:[{value:"sharp",text:Jb("labels.sharp"),icon:R().createElement(Pl,{appearance:m.appearance})},{value:"round",text:Jb("labels.round"),
icon:R().createElement(pj,{appearance:m.appearance})}],value:Yf(h,m,function(P){return P.strokeSharpness},$k(m.elementType)&&(If(m.elementType)?m.currentItemLinearStrokeSharpness:m.currentItemStrokeSharpness)||null),onChange:function(P){return A(P)}}))}}),Wd({name:"changeArrowhead",perform:function(d,h,m){var A;return{elements:Yd(d,h,function(P){if(cg(P)){var W=m.position,va=m.type;if("start"===W)return vg(P,{startArrowhead:va});if("end"===W)return vg(P,{endArrowhead:va})}return P}),appState:je(je({},
h),{},(A={},A["start"===m.position?"currentItemStartArrowhead":"currentItemEndArrowhead"]=m.type,A)),commitToHistory:!0}},PanelComponent:function(d){var h=d.elements,m=d.appState,A=d.updateData;d=ef.rtl;return R().createElement("fieldset",null,R().createElement("legend",null,Jb("labels.arrowheads")),R().createElement("div",{className:"iconSelectList"},R().createElement(dd,{label:"arrowhead_start",options:[{value:null,text:Jb("labels.arrowhead_none"),icon:R().createElement(fg,{appearance:m.appearance}),
keyBinding:"q"},{value:"arrow",text:Jb("labels.arrowhead_arrow"),icon:R().createElement(vn,{appearance:m.appearance,flip:!d}),keyBinding:"w"},{value:"bar",text:Jb("labels.arrowhead_bar"),icon:R().createElement(sg,{appearance:m.appearance,flip:!d}),keyBinding:"e"},{value:"dot",text:Jb("labels.arrowhead_dot"),icon:R().createElement(Ql,{appearance:m.appearance,flip:!d}),keyBinding:"r"}],value:Yf(h,m,function(P){return cg(P)&&"arrow"===P.type?P.startArrowhead:m.currentItemStartArrowhead},m.currentItemStartArrowhead),
onChange:function(P){return A({position:"start",type:P})}}),R().createElement(dd,{label:"arrowhead_end",group:"arrowheads",options:[{value:null,text:Jb("labels.arrowhead_none"),keyBinding:"q",icon:R().createElement(fg,{appearance:m.appearance})},{value:"arrow",text:Jb("labels.arrowhead_arrow"),keyBinding:"w",icon:R().createElement(vn,{appearance:m.appearance,flip:d})},{value:"bar",text:Jb("labels.arrowhead_bar"),keyBinding:"e",icon:R().createElement(sg,{appearance:m.appearance,flip:d})},{value:"dot",
text:Jb("labels.arrowhead_dot"),keyBinding:"r",icon:R().createElement(Ql,{appearance:m.appearance,flip:d})}],value:Yf(h,m,function(P){return cg(P)&&"arrow"===P.type?P.endArrowhead:m.currentItemEndArrowhead},m.currentItemEndArrowhead),onChange:function(P){return A({position:"end",type:P})}})))}}),g(2189)),re=g.n(he),Zf=R().createContext(!1),ig=function(){return window.matchMedia?window.matchMedia(re().isMobileQuery):{matches:!1,addListener:function(){},removeListener:function(){}}},Hf=function(d){d=
d.children;var h=(0,Z.useRef)();h.current||(h.current=ig());var m=(0,Z.useState)(h.current.matches),A=m[0],P=m[1];return(0,Z.useEffect)(function(){var W=function(){return P(h.current.matches)};return h.current.addListener(W),function(){return h.current.removeListener(W)}},[]),R().createElement(Zf.Provider,{value:A},d)};Wd({name:"changeViewBackgroundColor",perform:function(d,h,m){return{appState:Ne(Ne({},h),{},{viewBackgroundColor:m}),commitToHistory:!0}},PanelComponent:function(d){var h=d.appState,
m=d.updateData;return R().createElement("div",{style:{position:"relative"}},R().createElement(hc,{label:Jb("labels.canvasBackground"),type:"canvasBackground",color:h.viewBackgroundColor,onChange:function(A){return m(A)}}))}});Wd({name:"clearCanvas",perform:function(d,h){return{elements:d.map(function(m){return vg(m,{isDeleted:!0})}),appState:Ne(Ne({},kg()),{},{appearance:h.appearance,elementLocked:h.elementLocked,exportBackground:h.exportBackground,exportEmbedScene:h.exportEmbedScene,gridSize:h.gridSize,
shouldAddWatermark:h.shouldAddWatermark,showStats:h.showStats,pasteDialog:h.pasteDialog}),commitToHistory:!0}},PanelComponent:function(d){var h=d.updateData;return R().createElement(Te,{type:"button",icon:Ki,title:Jb("buttons.clearReset"),"aria-label":Jb("buttons.clearReset"),showAriaLabel:Ae(),onClick:function(){window.confirm(Jb("alerts.clearReset"))&&h(null)}})}});Wd({name:"zoomIn",perform:function(d,h){d=Yh(fk(h.zoom.value+Na.V4),h.zoom,{left:h.offsetLeft,top:h.offsetTop},{x:h.width/2,y:h.height/
2});return{appState:Ne(Ne({},h),{},{zoom:d}),commitToHistory:!1}},PanelComponent:function(d){var h=d.updateData;return R().createElement(Te,{type:"button",icon:Zc,title:"".concat(Jb("buttons.zoomIn")," — ").concat(Ed("CtrlOrCmd++")),"aria-label":Jb("buttons.zoomIn"),onClick:function(){h(null)}})},keyTest:function(d){return("Equal"===d.code||"NumpadAdd"===d.code)&&(d[xe]||d.shiftKey)}});Wd({name:"zoomOut",perform:function(d,h){d=Yh(fk(h.zoom.value-Na.V4),h.zoom,{left:h.offsetLeft,top:h.offsetTop},
{x:h.width/2,y:h.height/2});return{appState:Ne(Ne({},h),{},{zoom:d}),commitToHistory:!1}},PanelComponent:function(d){var h=d.updateData;return R().createElement(Te,{type:"button",icon:Ld,title:"".concat(Jb("buttons.zoomOut")," — ").concat(Ed("CtrlOrCmd+-")),"aria-label":Jb("buttons.zoomOut"),onClick:function(){h(null)}})},keyTest:function(d){return("Minus"===d.code||"NumpadSubtract"===d.code)&&(d[xe]||d.shiftKey)}});Wd({name:"resetZoom",perform:function(d,h){return{appState:Ne(Ne({},h),{},{zoom:Yh(1,
h.zoom,{left:h.offsetLeft,top:h.offsetTop},{x:h.width/2,y:h.height/2})}),commitToHistory:!1}},PanelComponent:function(d){var h=d.updateData;return R().createElement(Te,{type:"button",icon:Zg,title:Jb("buttons.resetZoom"),"aria-label":Jb("buttons.resetZoom"),onClick:function(){h(null)}})},keyTest:function(d){return("Digit0"===d.code||"Numpad0"===d.code)&&(d[xe]||d.shiftKey)}});var Ie=function(d,h,m){d=Rd(d);var A=We(d,h);A=m&&0<A.length?pg(A):pg(d);m=Yh(Math.min(Math.max(Math.floor(Math.min(h.width/
(A[2]-A[0]),h.height/(A[3]-A[1]))/Na.V4)*Na.V4,Na.V4),1),h.zoom,{left:h.offsetLeft,top:h.offsetTop});d=(A[0]+A[2])/2;A=(A[1]+A[3])/2;return{appState:Ne(Ne(Ne({},h),vi({scenePoint:{x:d,y:A},viewportDimensions:{width:h.width,height:h.height},zoom:m})),{},{zoom:m}),commitToHistory:!1}};Wd({name:"zoomToSelection",perform:function(d,h){return Ie(d,h,!0)},keyTest:function(d){return"Digit2"===d.code&&d.shiftKey&&!d.altKey&&!d[xe]}});Wd({name:"zoomToFit",perform:function(d,h){return Ie(d,h,!1)},keyTest:function(d){return"Digit1"===
d.code&&d.shiftKey&&!d.altKey&&!d[xe]}});var $e,Cf,Of=Wd({name:"finalize",perform:function(d,h,m,A){var P,W;m=A.canvas;if(h.editingLinearElement){A=h.editingLinearElement;var va=A.startBindingElement,qa=A.endBindingElement,Aa=Nf.getElement(A.elementId);if(Aa)return Qh(Aa)&&Tf(Aa,va,qa),{elements:2>Aa.points.length||Gh(Aa)?d.filter(function(gb){return gb.id!==Aa.id}):void 0,appState:Bg(Bg({},h),{},{editingLinearElement:null}),commitToHistory:!0}}window.document.activeElement instanceof HTMLElement&&
window.document.activeElement.blur();if(A=h.multiElement?h.multiElement:"draw"===(null===(W=h.editingElement)||void 0===W?void 0:W.type)?h.editingElement:null){"draw"!==A.type&&"touch"!==h.lastPointerDownWith&&(W=A.points,(va=A.lastCommittedPoint)&&W[W.length-1]===va||pe(A,{points:A.points.slice(0,-1)}));Gh(A)&&(d=d.slice(0,-1));W=mi(A.points,h.zoom.value);if(("line"===A.type||"draw"===A.type)&&W){var La=A.points,Ga=La[0];pe(A,{points:La.map(function(gb,ib){return ib===La.length-1?[Ga[0],Ga[1]]:gb})})}Qh(A)&&
!W&&1<A.points.length&&(va=Nf.getPointAtIndexGlobalCoordinates(A,-1),W=va[0],va=va[1],Ok(A,h,ch.getScene(A),{x:W,y:va}));h.elementLocked||"draw"===h.elementType||(h.selectedElementIds[A.id]=!0)}return(h.elementLocked||"draw"===h.elementType)&&A||bi(m),{elements:d,appState:Bg(Bg({},h),{},{elementType:(h.elementLocked||"draw"===h.elementType)&&A?h.elementType:"selection",draggingElement:null,multiElement:null,editingElement:null,startBoundElement:null,suggestedBindings:[],selectedElementIds:A&&!h.elementLocked&&
"draw"!==h.elementType?Bg(Bg({},h.selectedElementIds),{},(P={},P[A.id]=!0,P)):h.selectedElementIds}),commitToHistory:"draw"===h.elementType}},keyTest:function(d,h){return"Escape"===d.key&&(null!==h.editingLinearElement||!h.draggingElement&&null===h.multiElement)||("Escape"===d.key||"Enter"===d.key)&&null!==h.multiElement},PanelComponent:function(d){var h=d.appState;d=d.updateData;return R().createElement(Te,{type:"button",icon:hd,title:Jb("buttons.done"),"aria-label":Jb("buttons.done"),onClick:d,
visible:null!=h.multiElement})}}),dh="undefined"!=typeof v&&null!==($e=v.env)&&void 0!==$e&&$e.REACT_APP_GOOGLE_ANALYTICS_ID&&"undefined"!=typeof window&&window.gtag?function(d,h,m,A){window.gtag("event",h,{event_category:d,event_label:m,value:A})}:("undefined"!=typeof v&&null!==(Cf=v.env)&&void 0!==Cf&&Cf.JEST_WORKER_ID,function(d,h,m,A){}),oh=(g(8518),function(){var d=function(h,m){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,P){A.__proto__=P}||function(A,P){for(var W in P)Object.prototype.hasOwnProperty.call(P,
W)&&(A[W]=P[W])})(h,m)};return function(h,m){function A(){this.constructor=h}if("function"!=typeof m&&null!==m)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");d(h,m);h.prototype=null===m?Object.create(m):(A.prototype=m.prototype,new A)}}()),si=function(d){function h(){for(var m=[],A=0;A<arguments.length;A++)m[A]=arguments[A];var P,W;A=this;return A=d.apply(this,m)||this,P=W=A,A.handleFocus=function(va){va=va.currentTarget;var qa=window.getSelection();if(qa){var Aa=
document.createRange();Aa.selectNodeContents(va);qa.removeAllRanges();qa.addRange(Aa)}},A.handleBlur=function(va){va=va.currentTarget.innerText.trim();va!==W.props.value&&W.props.onChange(va);(va=window.getSelection())&&va.removeAllRanges()},A.handleKeyDown=function(va){"Enter"!==va.key||(va.preventDefault(),va.nativeEvent.isComposing||229===va.keyCode)||va.currentTarget.blur()},A.makeEditable=function(va){if(va)try{va.contentEditable="plaintext-only"}catch(qa){va.contentEditable="true"}},P}return oh(h,
d),h.prototype.render=function(){return R().createElement("span",{suppressContentEditableWarning:!0,ref:this.makeEditable,"data-type":"wysiwyg",className:"TextInput",role:"textbox","aria-label":this.props.label,onBlur:this.handleBlur,onKeyDown:this.handleKeyDown,onFocus:this.handleFocus},this.props.value)},h}(Z.Component),Ij=(g(2680),function(d){var h=d.children,m=d.label,A=d.position;A=void 0===A?"below":A;d=d.long;d=void 0!==d&&d;return R().createElement("div",{className:"Tooltip"},R().createElement("span",
{className:"above"===A?"Tooltip__label Tooltip__label--above":"Tooltip__label Tooltip__label--below",style:{width:d?"50ch":"10ch"}},m),h)}),yk=function(d){var h=d.title?d.title:"dark"===d.value?Jb("buttons.lightMode"):Jb("buttons.darkMode");return R().createElement("label",{className:"ToolIcon ToolIcon_type_floating ToolIcon_size_M",title:h},R().createElement("input",{className:"ToolIcon_type_checkbox ToolIcon_toggle_opaque",type:"checkbox",onChange:function(m){return d.onChange(m.target.checked?
"dark":"light")},checked:"dark"===d.value,"aria-label":h}),R().createElement("div",{className:"ToolIcon__icon"},"light"===d.value?Nl.MOON:Nl.SUN))},Nl={SUN:R().createElement("svg",{width:"512",height:"512",className:"rtl-mirror",viewBox:"0 0 512 512"},R().createElement("path",{fill:"currentColor",d:"M256 160c-52.9 0-96 43.1-96 96s43.1 96 96 96 96-43.1 96-96-43.1-96-96-96zm246.4 80.5l-94.7-47.3 33.5-100.4c4.5-13.6-8.4-26.5-21.9-21.9l-100.4 33.5-47.4-94.8c-6.4-12.8-24.6-12.8-31 0l-47.3 94.7L92.7 70.8c-13.6-4.5-26.5 8.4-21.9 21.9l33.5 100.4-94.7 47.4c-12.8 6.4-12.8 24.6 0 31l94.7 47.3-33.5 100.5c-4.5 13.6 8.4 26.5 21.9 21.9l100.4-33.5 47.3 94.7c6.4 12.8 24.6 12.8 31 0l47.3-94.7 100.4 33.5c13.6 4.5 26.5-8.4 21.9-21.9l-33.5-100.4 94.7-47.3c13-6.5 13-24.7.2-31.1zm-155.9 106c-49.9 49.9-131.1 49.9-181 0-49.9-49.9-49.9-131.1 0-181 49.9-49.9 131.1-49.9 181 0 49.9 49.9 49.9 131.1 0 181z"})),
MOON:R().createElement("svg",{width:"512",height:"512",className:"rtl-mirror",viewBox:"0 0 512 512"},R().createElement("path",{fill:"currentColor",d:"M283.211 512c78.962 0 151.079-35.925 198.857-94.792 7.068-8.708-.639-21.43-11.562-19.35-124.203 23.654-238.262-71.576-238.262-196.954 0-72.222 38.662-138.635 101.498-174.394 9.686-5.512 7.25-20.197-3.756-22.23A258.156 258.156 0 0 0 283.211 0c-141.309 0-256 114.511-256 256 0 141.309 114.511 256 256 256z"}))};const mm="chooseFileSystemEntries"in self?
"chooseFileSystemEntries":"showOpenFilePicker"in self&&"showOpenFilePicker",nm=mm?"chooseFileSystemEntries"===mm?g.e(736).then(g.bind(g,9012)):g.e(736).then(g.bind(g,499)):g.e(736).then(g.bind(g,5034));mm?"chooseFileSystemEntries"===mm?g.e(736).then(g.bind(g,6980)):g.e(736).then(g.bind(g,868)):g.e(736).then(g.bind(g,3110));const hf=mm?"chooseFileSystemEntries"===mm?g.e(736).then(g.bind(g,1170)):g.e(736).then(g.bind(g,7814)):g.e(736).then(g.bind(g,4001));var Qk,Ci=function(d,h){if(null!=h&&h.collaborators&&
(h=h.collaborators.get(d),null!=h&&h.color))return h.color;d=d.split("").reduce(function(A,P){return A+P.charCodeAt(0)},0);h=uj.elementBackground.slice(1);var m=uj.elementStroke.slice(1);return{background:h[d%h.length],stroke:m[d%m.length]}};!function(d){d.ACTIVE="active";d.AWAY="away";d.IDLE="idle"}(Qk||(Qk={}));var xm=function(){var d=document.createElement("canvas").getContext("2d");return d?(d.fillStyle="#f00",d.textBaseline="top",d.font="32px Arial",d.fillText("\ud83d\ude00",0,0),0!==d.getImageData(12,
12,1,1).data[0]):!1}(),dl=function(d,h,m,A,P,W,va,qa,Aa){void 0===Aa&&(Aa=!1);d.translate(W,va);d.rotate(qa);Aa&&d.fillRect(h-W,m-va,A,P);d.strokeRect(h-W,m-va,A,P);d.rotate(-qa);d.translate(-W,-va)},ym=function(d,h,m,A){d.beginPath();d.arc(h,m,A,0,2*Math.PI);d.fill();d.stroke()},Zm=function(d,h,m,A,P,W,va,qa){var Aa=void 0===qa?{}:qa;qa=Aa.renderScrollbars;qa=void 0===qa||qa;var La=Aa.renderSelection,Ga=void 0===La||La;La=Aa.renderOptimizations;var gb=void 0!==La&&La;Aa=Aa.renderGrid;var ib=void 0===
Aa||Aa;if(!W)return{atLeastOneVisibleElement:!1};var kb=W.getContext("2d");kb.scale(A,A);var Kb=W.width/A,Ib=W.height/A;(va.exportWithDarkMode&&(kb.filter=Na.Gi),"string"==typeof va.viewBackgroundColor)?(("transparent"===va.viewBackgroundColor||5===va.viewBackgroundColor.length||9===va.viewBackgroundColor.length||/(hsla|rgba)\(/.test(va.viewBackgroundColor))&&kb.clearRect(0,0,Kb,Ib),Aa=kb.fillStyle,kb.fillStyle=va.viewBackgroundColor,kb.fillRect(0,0,Kb,Ib),kb.fillStyle=Aa):kb.clearRect(0,0,Kb,Ib);
Aa=va.zoom.translation.x;La=va.zoom.translation.y;kb.translate(Aa,La);kb.scale(va.zoom.value,va.zoom.value);ib&&h.gridSize&&function(md,Fd,Ud,Ee,xh,Wh){var lj=md.strokeStyle;md.strokeStyle="rgba(0,0,0,0.1)";md.beginPath();for(var Ii=Ud;Ii<Ud+xh+2*Fd;Ii+=Fd)md.moveTo(Ii,Ee-Fd),md.lineTo(Ii,Ee+Wh+2*Fd);for(Ii=Ee;Ii<Ee+Wh+2*Fd;Ii+=Fd)md.moveTo(Ud-Fd,Ii),md.lineTo(Ud+xh+2*Fd,Ii);md.stroke();md.strokeStyle=lj}(kb,h.gridSize,-Math.ceil(Aa/va.zoom.value/h.gridSize)*h.gridSize+va.scrollX%h.gridSize,-Math.ceil(La/
va.zoom.value/h.gridSize)*h.gridSize+va.scrollY%h.gridSize,Kb/va.zoom.value,Ib/va.zoom.value);W=d.filter(function(md){var Fd={zoom:va.zoom,offsetLeft:h.offsetLeft,offsetTop:h.offsetTop,scrollX:va.scrollX,scrollY:va.scrollY},Ud=ti(md);md=Ud[0];var Ee=Ud[1],xh=Ud[2];Ud=Ud[3];var Wh=Kf({clientX:Fd.offsetLeft,clientY:Fd.offsetTop},Fd);Fd=Kf({clientX:Fd.offsetLeft+Kb,clientY:Fd.offsetTop+Ib},Fd);return Wh.x<=xh&&Wh.y<=Ud&&Fd.x>=md&&Fd.y>=Ee});(W.forEach(function(md){tl(md,P,kb,gb,va)}),h.editingLinearElement)&&
(ib=Nf.getElement(h.editingLinearElement.elementId))&&function(md,Fd,Ud,Ee){md.translate(Ud.scrollX,Ud.scrollY);var xh=md.strokeStyle,Wh=md.lineWidth;md.lineWidth=1/Ud.zoom.value;Nf.getPointsGlobalCoordinates(Ee).forEach(function(lj,Ii){var yl;md.strokeStyle="red";md.setLineDash([]);md.fillStyle=(null===(yl=Fd.editingLinearElement)||void 0===yl?void 0:yl.activePointIndex)===Ii?"rgba(255, 127, 127, 0.9)":"rgba(255, 255, 255, 0.9)";ym(md,lj[0],lj[1],Nf.POINT_HANDLE_SIZE/2/Ud.zoom.value)});md.setLineDash([]);
md.lineWidth=Wh;md.translate(-Ud.scrollX,-Ud.scrollY);md.strokeStyle=xh}(kb,h,va,ib);if(m&&tl(m,P,kb,gb,va),h.isBindingEnabled&&h.suggestedBindings.filter(function(md){return null!=md}).forEach(function(md){var Fd=kb.strokeStyle,Ud=kb.lineWidth,Ee=Array.isArray(md)?Li:Gl;kb.translate(va.scrollX,va.scrollY);Ee(kb,md);kb.strokeStyle=Fd;kb.lineWidth=Ud;kb.translate(-va.scrollX,-va.scrollY)}),Ga&&!h.multiElement&&!h.editingLinearElement){var mc=d.reduce(function(md,Fd){var Ud=[];if(h.selectedElementIds[Fd.id]&&
null==Hh(h,Fd)&&Ud.push(ne.Sn),va.remoteSelectedElementIds[Fd.id]&&Ud.push.apply(Ud,va.remoteSelectedElementIds[Fd.id].map(function(xh){return Ci(xh,h).background})),Ud.length){var Ee=zf(Fd);md.push({angle:Fd.angle,elementX1:Ee[0],elementY1:Ee[1],elementX2:Ee[2],elementY2:Ee[3],selectionColors:Ud})}return md},[]);m=function(md){md=Pj(d,md);md=pg(md);mc.push({angle:0,elementX1:md[0],elementX2:md[2],elementY1:md[1],elementY2:md[3],selectionColors:[ne.Sn]})};Ga=0;for(ib=sk(h);Ga<ib.length;Ga++)m(ib[Ga]);
h.editingGroupId&&m(h.editingGroupId);mc.forEach(function(md){var Fd=md.angle,Ud=md.elementX1,Ee=md.elementY1,xh=md.selectionColors,Wh=md.elementX2-Ud;md=md.elementY2-Ee;var lj=kb.getLineDash(),Ii=kb.lineWidth,yl=kb.lineDashOffset,jn=kb.strokeStyle,Rl=4/va.zoom.value,kn=8/va.zoom.value,Lm=4/va.zoom.value;kb.lineWidth=1/va.zoom.value;kb.translate(va.scrollX,va.scrollY);for(var Zn=xh.length,Mm=0;Mm<Zn;++Mm)kb.strokeStyle=xh[Mm],kb.setLineDash([kn,Lm+(kn+Lm)*(Zn-1)]),kb.lineDashOffset=(kn+Lm)*Mm,dl(kb,
Ud-Rl,Ee-Rl,Wh+2*Rl,md+2*Rl,Ud+Wh/2,Ee+md/2,Fd);kb.lineDashOffset=yl;kb.strokeStyle=jn;kb.lineWidth=Ii;kb.setLineDash(lj);kb.translate(-va.scrollX,-va.scrollY)});Ga=We(d,h);if(kb.translate(va.scrollX,va.scrollY),1===Ga.length)kb.fillStyle=ne.ix,m=cj(Ga[0],va.zoom,"mouse"),h.viewModeEnabled||kk(kb,va,m,Ga[0].angle);else if(1<Ga.length&&!h.isRotating){m=4/va.zoom.value;kb.fillStyle=ne.ix;var Sc=pg(Ga);Ga=Sc[0];ib=Sc[1];var Yc=Sc[2];Sc=Sc[3];var kd=kb.getLineDash();kb.setLineDash([2/va.zoom.value]);
var ke=kb.lineWidth;kb.lineWidth=1/va.zoom.value;dl(kb,Ga-m,ib-m,Yc-Ga+2*m,Sc-ib+2*m,(Ga+Yc)/2,(ib+Sc)/2,0);kb.lineWidth=ke;kb.setLineDash(kd);m=pk([Ga,ib,Yc,Sc],0,va.zoom,"mouse",ul);kk(kb,va,m,0)}kb.translate(-va.scrollX,-va.scrollY)}for(var ie in kb.scale(1/va.zoom.value,1/va.zoom.value),kb.translate(-Aa,-La),va.remotePointerViewportCoords){Aa=va.remotePointerViewportCoords[ie];Yc=Aa.x;Sc=Aa.y;Yc-=h.offsetLeft;Sc-=h.offsetTop;kd=0>Yc||Yc>Kb-9||0>Sc||Sc>Ib-14;Yc=Math.max(Yc,0);Yc=Math.min(Yc,Kb-
9);Sc=Math.max(Sc,0);Sc=Math.min(Sc,Ib-14);Aa=Ci(ie,h);La=Aa.background;m=Aa.stroke;Ga=kb.strokeStyle;ib=(Aa=kb.fillStyle,kb.globalAlpha);kb.strokeStyle=m;kb.fillStyle=La;ke=va.remotePointerUserStates[ie];(kd||ke===Qk.AWAY)&&(kb.globalAlpha=.48);va.remotePointerButton&&"down"===va.remotePointerButton[ie]&&(kb.beginPath(),kb.arc(Yc,Sc,15,0,2*Math.PI,!1),kb.lineWidth=3,kb.strokeStyle="#ffffff88",kb.stroke(),kb.closePath(),kb.beginPath(),kb.arc(Yc,Sc,15,0,2*Math.PI,!1),kb.lineWidth=1,kb.strokeStyle=
m,kb.stroke(),kb.closePath());kb.beginPath();kb.moveTo(Yc,Sc);kb.lineTo(Yc+1,Sc+14);kb.lineTo(Yc+4,Sc+9);kb.lineTo(Yc+9,Sc+10);kb.lineTo(Yc,Sc);kb.fill();kb.stroke();var De=va.remotePointerUsernames[ie],qe="";ke===Qk.AWAY?qe=xm?"⚫️":" (".concat(Qk.AWAY,")"):ke===Qk.IDLE?qe=xm?"\ud83d\udca4":" (".concat(Qk.IDLE,")"):ke===Qk.ACTIVE&&(qe=xm?"\ud83d\udfe2":"");ke="".concat(De?"".concat(De," "):"").concat(qe);!kd&&ke&&(Yc+=9,Sc+=14,kd=kb.measureText(ke),De=kd.actualBoundingBoxDescent+kd.actualBoundingBoxAscent,
kb.fillStyle=m,kb.fillRect(Yc-1,Sc-1,kd.width+8+2,De+8+2),kb.fillStyle=La,kb.fillRect(Yc,Sc,kd.width+8,De+8),kb.fillStyle=ne.ix,kb.fillText(ke,Yc+4,Sc+4+kd.actualBoundingBoxAscent));kb.strokeStyle=Ga;kb.fillStyle=Aa;kb.globalAlpha=ib;kb.closePath()}if(qa){var Re=function(md,Fd,Ud,Ee){var xh=Ee.scrollX,Wh=Ee.scrollY,lj=Ee.zoom;if(0===md.length)return{horizontal:null,vertical:null};Ee=pg(md);var Ii=Ee[0],yl=Ee[1];md=Ee[2];Ee=Ee[3];var jn=Fd/lj.value,Rl=Ud/lj.value,kn=Fd-jn,Lm=Ud-Rl;lj=parseInt(Lf("sat"));
var Zn=parseInt(Lf("sab")),Mm=parseInt(Lf("sal")),Sr=parseInt(Lf("sar")),Mt=ef.rtl;xh=kn/2-xh+Mm;Wh=Lm/2-Wh+lj;jn=xh+jn-Sr;Rl=Wh+Rl-Zn;Ii=Math.min(Ii,xh);yl=Math.min(yl,Wh);md=Math.max(md,jn);Ee=Math.max(Ee,Rl);return{horizontal:xh===Ii&&jn===md?null:{x:Math.max(Mm,4)+(xh-Ii)/(md-Ii)*Fd,y:Ud-6-Math.max(4,Zn),width:(jn-xh)/(md-Ii)*Fd-Math.max(8,Mm+Sr),height:6},vertical:Wh===yl&&Rl===Ee?null:{x:Mt?Math.max(Mm,4):Fd-6-Math.max(Sr,4),y:(Wh-yl)/(Ee-yl)*Ud+Math.max(lj,4),width:6,height:(Rl-Wh)/(Ee-yl)*
Ud-Math.max(8,lj+Zn)}}}(d,Kb,Ib,va);Aa=kb.fillStyle;Ga=kb.strokeStyle;kb.fillStyle="rgba(0,0,0,0.3)";kb.strokeStyle="rgba(255,255,255,0.8)";[Re.horizontal,Re.vertical].forEach(function(md){if(md){var Fd=md.x,Ud=md.y,Ee=md.width;md=md.height;kb.beginPath();kb.moveTo(Fd+3,Ud);kb.lineTo(Fd+Ee-3,Ud);kb.quadraticCurveTo(Fd+Ee,Ud,Fd+Ee,Ud+3);kb.lineTo(Fd+Ee,Ud+md-3);kb.quadraticCurveTo(Fd+Ee,Ud+md,Fd+Ee-3,Ud+md);kb.lineTo(Fd+3,Ud+md);kb.quadraticCurveTo(Fd,Ud+md,Fd,Ud+md-3);kb.lineTo(Fd,Ud+3);kb.quadraticCurveTo(Fd,
Ud,Fd+3,Ud);kb.closePath();kb.fill();kb.stroke()}});kb.fillStyle=Aa;kb.strokeStyle=Ga}return kb.scale(1/A,1/A),{atLeastOneVisibleElement:0<W.length,scrollBars:Re}},kk=function(d,h,m,A){Object.keys(m).forEach(function(P){var W=m[P];if(void 0!==W){var va=d.lineWidth;d.lineWidth=1/h.zoom.value;"rotation"===P?ym(d,W[0]+W[2]/2,W[1]+W[3]/2,W[2]/2):dl(d,W[0],W[1],W[2],W[3],W[0]+W[2]/2,W[1]+W[3]/2,A,!0);d.lineWidth=va}})},Gl=function(d,h){var m=zf(h),A=m[0],P=m[1],W=m[2]-A;m=m[3]-P;var va=Sj(h,W,m);d.strokeStyle=
"rgba(0,0,0,.05)";d.lineWidth=va-4;va=2+va/2;switch(h.type){case "rectangle":case "text":dl(d,A-va,P-va,W+2*va,m+2*va,A+W/2,P+m/2,h.angle);break;case "diamond":var qa=Math.hypot(W,m);!function(Aa,La,Ga,gb,ib,kb){Aa.translate(gb,ib);Aa.rotate(kb);Aa.beginPath();Aa.moveTo(0,Ga/2);Aa.lineTo(La/2,0);Aa.lineTo(0,-Ga/2);Aa.lineTo(-La/2,0);Aa.closePath();Aa.stroke();Aa.rotate(-kb);Aa.translate(-gb,-ib)}(d,W+va*qa/m*2,m+va*qa/W*2,A+W/2,P+m/2,h.angle);break;case "ellipse":!function(Aa,La,Ga,gb,ib,kb){Aa.beginPath();
Aa.ellipse(gb,ib,La/2,Ga/2,kb,0,2*Math.PI);Aa.stroke()}(d,W+2*va,m+2*va,A+W/2,P+m/2,h.angle)}},Li=function(d,h){var m=h[0],A=h[1];h=h[2];var P=Sj(h,h.width,h.height);d.strokeStyle="rgba(0,0,0,0)";d.fillStyle="rgba(0,0,0,.05)";("both"===A?[0,-1]:"start"===A?[0]:[-1]).forEach(function(W){W=Nf.getPointAtIndexGlobalCoordinates(m,W);ym(d,W[0],W[1],P)})},rj=function(d,h,m,A){A=void 0===A?{}:A;var P=A.offsetX,W=void 0===P?0:P;A=A.offsetY;var va=void 0===A?0:A;m&&d.forEach(function(qa){qa.isDeleted||function(Aa,
La,Ga,gb,ib){var kb=zf(Aa),Kb=kb[0],Ib=kb[1],mc=(kb[2]-Kb)/2-(Aa.x-Kb),Sc=(kb[3]-Ib)/2-(Aa.y-Ib),Yc=180*Aa.angle/Math.PI;kb=La.generator;switch(Aa.type){case "selection":throw Error("Selection rendering is not supported for SVG");case "rectangle":case "diamond":case "ellipse":Ik(Aa,kb);kb=La.draw(ni.get(Aa));1!=(ie=Aa.opacity/100)&&(kb.setAttribute("stroke-opacity","".concat(ie)),kb.setAttribute("fill-opacity","".concat(ie)));kb.setAttribute("transform","translate(".concat(gb||0," ").concat(ib||0,
") rotate(").concat(Yc," ").concat(mc," ").concat(Sc,")"));Ga.appendChild(kb);break;case "line":case "draw":case "arrow":Ik(Aa,kb);var kd=Ga.ownerDocument.createElementNS("http://www.w3.org/2000/svg","g"),ke=Aa.opacity/100;ni.get(Aa).forEach(function(Ud){Ud=La.draw(Ud);1!==ke&&(Ud.setAttribute("stroke-opacity","".concat(ke)),Ud.setAttribute("fill-opacity","".concat(ke)));Ud.setAttribute("transform","translate(".concat(gb||0," ").concat(ib||0,") rotate(").concat(Yc," ").concat(mc," ").concat(Sc,")"));
"line"!==Aa.type&&"draw"!==Aa.type||!mi(Aa.points)||"transparent"===Aa.backgroundColor||Ud.setAttribute("fill-rule","evenodd");kd.appendChild(Ud)});Ga.appendChild(kd);break;default:if(!og(Aa))throw Error("Unimplemented type ".concat(Aa.type));var ie=Aa.opacity/100;kb=Ga.ownerDocument.createElementNS("http://www.w3.org/2000/svg","g");1!==ie&&(kb.setAttribute("stroke-opacity","".concat(ie)),kb.setAttribute("fill-opacity","".concat(ie)));kb.setAttribute("transform","translate(".concat(gb||0," ").concat(ib||
0,") rotate(").concat(Yc," ").concat(mc," ").concat(Sc,")"));ie=Aa.text.replace(/\r\n?/g,"\n").split("\n");Kb=Aa.height/ie.length;Ib=Aa.height-Aa.baseline;for(var De="center"===Aa.textAlign?Aa.width/2:"right"===Aa.textAlign?Aa.width:0,qe=gl.test(Aa.text)?"rtl":"ltr",Re="center"===Aa.textAlign?"middle":"right"===Aa.textAlign||"rtl"===qe?"end":"start",md=0;md<ie.length;md++){var Fd=Ga.ownerDocument.createElementNS("http://www.w3.org/2000/svg","text");Fd.textContent=ie[md];Fd.setAttribute("x","".concat(De));
Fd.setAttribute("y","".concat((md+1)*Kb-Ib));Fd.setAttribute("font-family","".concat(Na.ut[Aa.fontFamily],", ").concat(Na._D));Fd.setAttribute("font-size","".concat(Aa.fontSize,"px"));Fd.setAttribute("fill",Aa.strokeColor);Fd.setAttribute("text-anchor",Re);Fd.setAttribute("style","white-space: pre;");Fd.setAttribute("direction",qe);kb.appendChild(Fd)}Ga.appendChild(kb)}}(qa,h,m,qa.x+W,qa.y+va)})},Fk=function(d,h){for(var m=0,A=h.length,P=d.length;m<A;m++,P++)d[P]=h[m];return d},km=function(d,h,m,
A){var P=m.exportBackground,W=m.exportPadding;W=void 0===W?10:W;var va=m.viewBackgroundColor,qa=m.scale,Aa=void 0===qa?1:qa;m=m.shouldAddWatermark;void 0===A&&(A=function(Ga,gb){var ib=document.createElement("canvas");return ib.width=Ga*Aa,ib.height=gb*Aa,{canvas:ib,scale:Aa}});d=Tn(d,m);var La=$m(d,W,m);m=La[0];qa=La[1];La=A(La[2],La[3]);A=La.canvas;La=La.scale;return Zm(d,h,null,void 0===La?Aa:La,Di.canvas(A),A,{viewBackgroundColor:P?va:null,exportWithDarkMode:h.exportWithDarkMode,scrollX:-m+W,
scrollY:-qa+W,zoom:kg().zoom,remotePointerViewportCoords:{},remoteSelectedElementIds:{},shouldCacheIgnoreZoom:!1,remotePointerUsernames:{},remotePointerUserStates:{}},{renderScrollbars:!1,renderSelection:!1,renderOptimizations:!1,renderGrid:!1}),A},Ih=function(d,h){var m=h.exportBackground,A=h.exportPadding;A=void 0===A?10:A;var P=h.viewBackgroundColor,W=h.exportWithDarkMode,va=h.scale;va=void 0===va?1:va;var qa=h.shouldAddWatermark;h=h.metadata;h=void 0===h?"":h;d=Tn(d,qa);var Aa=$m(d,A,qa);qa=Aa[0];
var La=Aa[1],Ga=Aa[2],gb=Aa[3];Aa=document.createElementNS("http://www.w3.org/2000/svg","svg");if(Aa.setAttribute("version","1.1"),Aa.setAttribute("xmlns","http://www.w3.org/2000/svg"),Aa.setAttribute("viewBox","0 0 ".concat(Ga," ").concat(gb)),Aa.setAttribute("width","".concat(Ga*va)),Aa.setAttribute("height","".concat(gb*va)),W&&Aa.setAttribute("filter",Na.Gi),Aa.innerHTML="\n  ".concat("\x3c!-- svg-source:excalidraw --\x3e","\n  ").concat(h,'\n  \x3cdefs\x3e\n    \x3cstyle\x3e\n      @font-face {\n        font-family: "Virgil";\n        src: url("https://excalidraw.com/Virgil.woff2");\n      }\n      @font-face {\n        font-family: "Cascadia";\n        src: url("https://excalidraw.com/Cascadia.woff2");\n      }\n    \x3c/style\x3e\n  \x3c/defs\x3e\n  '),
m&&P)m=Aa.ownerDocument.createElementNS("http://www.w3.org/2000/svg","rect"),m.setAttribute("x","0"),m.setAttribute("y","0"),m.setAttribute("width","".concat(Ga)),m.setAttribute("height","".concat(gb)),m.setAttribute("fill",P),Aa.appendChild(m);m=Di.svg(Aa);return rj(d,m,Aa,{offsetX:-qa+A,offsetY:-La+A}),Aa},Tn=function(d,h){var m=Fk([],d);h&&(h=pg(d),d=h[2],h=h[3],m=Fk([],m),d=hj({text:Jb("labels.madeWithExcalidraw"),fontSize:16,fontFamily:Na.rk,textAlign:"right",verticalAlign:Na.hs,x:d,y:h+16,strokeColor:ne.MA[5],
backgroundColor:"transparent",fillStyle:"hachure",strokeWidth:1,strokeStyle:"solid",roughness:1,opacity:100,strokeSharpness:"sharp"}),m=Fk(m,[d]));return m},$m=function(d,h,m){d=pg(d);var A=d[0],P=d[1];return[A,P,Math.abs(A-d[2])+2*h,Math.abs(P-d[3])+h+(m?0:h)]},li=function(d,h){for(var m=0,A=h.length,P=d.length;m<A;m++,P++)d[P]=h[m];return d},fn=function(d){return(d=/^[$€£¥₩]?([0-9,]+(\.[0-9]+)?)$/.exec(d))?parseFloat(d[1].replace(/,/g,"")):null},sm=function(d,h){return d.slice(1).every(function(m){return null!==
fn(m[h])})},Cn=function(d){var h=d[0].length;if(2<h)return{type:"NOT_SPREADSHEET",reason:"More than 2 columns"};if(1===h){if(!sm(d,0))return{type:"NOT_SPREADSHEET",reason:"Value is not numeric"};h=null===fn(d[0][0]);var m=(h?d.slice(1):d).map(function(W){return fn(W[0])});return 2>m.length?{type:"NOT_SPREADSHEET",reason:"Less than two rows"}:{type:"VALID_SPREADSHEET",spreadsheet:{title:h?d[0][0]:null,labels:null,values:m}}}var A=sm(d,0)?0:1;if(!sm(d,A))return{type:"NOT_SPREADSHEET",reason:"Value is not numeric"};
var P=(A+1)%2;m=(h=null===fn(d[0][A]))?d.slice(1):d;return 2>m.length?{type:"NOT_SPREADSHEET",reason:"Less than 2 rows"}:{type:"VALID_SPREADSHEET",spreadsheet:{title:h?d[0][A]:null,labels:m.map(function(W){return W[P]}),values:m.map(function(W){return fn(W[A])})}}},wn=uj.elementBackground.slice(2,uj.elementBackground.length),Mi={fillStyle:"hachure",fontFamily:Na.rk,fontSize:Na.n5,opacity:100,roughness:1,strokeColor:uj.elementStroke[0],strokeSharpness:"sharp",strokeStyle:"solid",strokeWidth:1,verticalAlign:"middle"},
Qn=function(d){return{chartWidth:44*d.values.length+12,chartHeight:280}},el=function(d,h,m,A,P,W){var va=Qn(d),qa=va.chartWidth,Aa=va.chartHeight;va=d.title?hj(df(df({backgroundColor:P,groupIds:[A]},Mi),{},{text:d.title,x:h+qa/2,y:m-256-24-Na.n5,strokeSharpness:"sharp",strokeStyle:"solid",textAlign:"center"})):null;W=W?Ll(df(df({backgroundColor:P,groupIds:[A]},Mi),{},{type:"rectangle",x:h,y:m-Aa,width:qa,height:Aa,strokeColor:uj.elementStroke[0],fillStyle:"solid",opacity:6})):null;return li(li(li(li(li([],
W?[W]:[]),va?[va]:[]),function(La,Ga,gb,ib,kb){var Kb;return(null===(Kb=La.labels)||void 0===Kb?void 0:Kb.map(function(Ib,mc){return hj(df(df({groupIds:[ib],backgroundColor:kb},Mi),{},{text:8<Ib.length?"".concat(Ib.slice(0,5),"..."):Ib,x:Ga+44*mc+24,y:gb+6,width:32,angle:5.87,fontSize:16,textAlign:"center",verticalAlign:"top"}))}))||[]}(d,h,m,A,P)),function(La,Ga,gb,ib,kb){var Kb=hj(df(df({groupIds:[ib],backgroundColor:kb},Mi),{},{x:Ga-12,y:gb-12,text:"0",textAlign:"right"}));return[Kb,hj(df(df({groupIds:[ib],
backgroundColor:kb},Mi),{},{x:Ga-12,y:gb-256-Kb.height/2,text:Math.max.apply(Math,La.values).toLocaleString(),textAlign:"right"}))]}(d,h,m,A,P)),function(La,Ga,gb,ib,kb){var Kb=Qn(La);La=Kb.chartWidth;Kb=Kb.chartHeight;return[Th(df(df({backgroundColor:kb,groupIds:[ib]},Mi),{},{type:"line",x:Ga,y:gb,startArrowhead:null,endArrowhead:null,width:La,points:[[0,0],[La,0]]})),Th(df(df({backgroundColor:kb,groupIds:[ib]},Mi),{},{type:"line",x:Ga,y:gb,startArrowhead:null,endArrowhead:null,height:Kb,points:[[0,
0],[0,-Kb]]})),Th(df(df({backgroundColor:kb,groupIds:[ib]},Mi),{},{type:"line",x:Ga,y:gb-256-12,startArrowhead:null,endArrowhead:null,strokeStyle:"dotted",width:La,opacity:50,points:[[0,0],[La,0]]}))]}(d,h,m,A,P))},Rn=function(d,h,m,A){return"line"===d?function(P,W,va){for(var qa=Math.max.apply(Math,P.values),Aa=gf(),La=wn[Math.floor(Math.random()*wn.length)],Ga=0,gb=[],ib=0,kb=P.values;ib<kb.length;ib++)gb.push([44*Ga,-kb[ib]/qa*256]),Ga++;Ga=Math.max.apply(Math,gb.map(function(Ib){return Ib[0]}));
ib=Math.max.apply(Math,gb.map(function(Ib){return Ib[1]}));kb=Math.min.apply(Math,gb.map(function(Ib){return Ib[0]}));var Kb=Math.min.apply(Math,gb.map(function(Ib){return Ib[1]}));gb=Th(df(df({backgroundColor:La,groupIds:[Aa]},Mi),{},{type:"line",x:W+12+16,y:va-12,startArrowhead:null,endArrowhead:null,height:ib-Kb,width:Ga-kb,strokeWidth:2,points:gb}));Ga=P.values.map(function(Ib,mc){mc=44*mc+6;Ib=-Ib/qa*256+6;return Ll(df(df({backgroundColor:La,groupIds:[Aa]},Mi),{},{fillStyle:"solid",strokeWidth:2,
type:"ellipse",x:W+mc+16,y:va+Ib-24,width:12,height:12}))});ib=P.values.map(function(Ib,mc){mc=44*mc+6;Ib=Ib/qa*256+18;return Th(df(df({backgroundColor:La,groupIds:[Aa]},Mi),{},{type:"line",x:W+mc+16+6,y:va-Ib,startArrowhead:null,endArrowhead:null,height:Ib,strokeStyle:"dotted",opacity:50,points:[[0,0],[0,Ib]]}))});return li(li(li(li([],el(P,W,va,Aa,La,"production"===Na.Vi.DEVELOPMENT)),[gb]),ib),Ga)}(h,m,A):function(P,W,va){var qa=Math.max.apply(Math,P.values),Aa=gf(),La=wn[Math.floor(Math.random()*
wn.length)],Ga=P.values.map(function(gb,ib){gb=gb/qa*256;return Ll(df(df({backgroundColor:La,groupIds:[Aa]},Mi),{},{type:"rectangle",x:W+44*ib+12,y:va-gb-12,width:32,height:gb}))});return li(li([],Ga),el(P,W,va,Aa,La,"production"===Na.Vi.DEVELOPMENT))}(h,m,A)},Sn=function(){var d=function(h,m){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,P){A.__proto__=P}||function(A,P){for(var W in P)Object.prototype.hasOwnProperty.call(P,W)&&(A[W]=P[W])})(h,m)};return function(h,m){function A(){this.constructor=
h}if("function"!=typeof m&&null!==m)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");d(h,m);h.prototype=null===m?Object.create(m):(A.prototype=m.prototype,new A)}}(),en=function(d){function h(m,A){void 0===m&&(m="Couldn't export canvas.");void 0===A&&(A="CANVAS_ERROR");var P=d.call(this)||this;return P.name=A,P.message=m,P}return Sn(h,d),h}(Error),hn=function(d,h){var m,A,P,W,va,qa,Aa,La;d={type:d.type,version:d.version||1,versionNonce:null!==(m=d.versionNonce)&&
void 0!==m?m:0,isDeleted:null!==(A=d.isDeleted)&&void 0!==A&&A,id:d.id||gf(),fillStyle:d.fillStyle||"hachure",strokeWidth:d.strokeWidth||1,strokeStyle:null!==(P=d.strokeStyle)&&void 0!==P?P:"solid",roughness:null!==(W=d.roughness)&&void 0!==W?W:1,opacity:null==d.opacity?100:d.opacity,angle:d.angle||0,x:d.x||0,y:d.y||0,strokeColor:d.strokeColor,backgroundColor:d.backgroundColor,width:d.width||0,height:d.height||0,seed:null!==(va=d.seed)&&void 0!==va?va:1,groupIds:null!==(qa=d.groupIds)&&void 0!==qa?
qa:[],strokeSharpness:null!==(Aa=d.strokeSharpness)&&void 0!==Aa?Aa:If(d.type)?"round":"sharp",boundElementIds:null!==(La=d.boundElementIds)&&void 0!==La?La:[]};return He(He(He({},d),ej(d)),h)},Gk=function(d){return(d||[]).reduce(function(h,m){if("selection"!==m.type&&!Gh(m)){a:{var A;switch(m.type){case "text":var P=m.fontSize,W=m.fontFamily;if("font"in m){P=m.font.split(" ");W=P[1];P=parseInt(P[0],10);b:{for(var va=0,qa=Object.entries(Na.ut);va<qa.length;va++){var Aa=qa[va],La=Aa[0];if(Aa[1].includes(W)){W=
parseInt(La);break b}}W=Na.rk}}m=hn(m,{fontSize:P,fontFamily:W,text:null!==(A=m.text)&&void 0!==A?A:"",baseline:m.baseline,textAlign:m.textAlign||Na.Hg,verticalAlign:m.verticalAlign||Na.hs});break a;case "draw":case "line":case "arrow":A=m.startArrowhead;A=void 0===A?null:A;P=m.endArrowhead;P=void 0===P?"arrow"===m.type?"arrow":null:P;m=hn(m,{startBinding:m.startBinding,endBinding:m.endBinding,points:!Array.isArray(m.points)||2>m.points.length?[[0,0],[m.width,m.height]]:m.points,lastCommittedPoint:null,
startArrowhead:A,endArrowhead:P});break a;case "ellipse":case "rectangle":case "diamond":m=hn(m,{});break a}m=void 0}m&&h.push(m)}return h},[])},an=function(d,h){d=d||{};for(var m=kg(),A={},P=0,W=Object.entries(m);P<W.length;P++){var va=W[P],qa=va[0];va=va[1];var Aa=d[qa],La=h?h[qa]:void 0;A[qa]=void 0!==Aa?Aa:void 0!==La?La:va}return He(He({},A),{},{offsetLeft:d.offsetLeft||0,offsetTop:d.offsetTop||0,zoom:"number"==typeof d.zoom?{value:d.zoom,translation:m.zoom.translation}:d.zoom||m.zoom})},xn=
function(d,h){return{elements:Gk(null==d?void 0:d.elements),appState:an(null==d?void 0:d.appState,h||null)}},Co=function(d,h){function m(Aa){return function(La){return function(Ga){if(A)throw new TypeError("Generator is already executing.");for(;qa;)try{if(A=1,P&&(W=2&Ga[0]?P.return:Ga[0]?P.throw||((W=P.return)&&W.call(P),0):P.next)&&!(W=W.call(P,Ga[1])).done)return W;switch(P=0,W&&(Ga=[2&Ga[0],W.value]),Ga[0]){case 0:case 1:W=Ga;break;case 4:return qa.label++,{value:Ga[1],done:!1};case 5:qa.label++;
P=Ga[1];Ga=[0];continue;case 7:Ga=qa.ops.pop();qa.trys.pop();continue;default:if(!(W=qa.trys,(W=0<W.length&&W[W.length-1])||6!==Ga[0]&&2!==Ga[0])){qa=0;continue}if(3===Ga[0]&&(!W||Ga[1]>W[0]&&Ga[1]<W[3]))qa.label=Ga[1];else if(6===Ga[0]&&qa.label<W[1])qa.label=W[1],W=Ga;else if(W&&qa.label<W[2])qa.label=W[2],qa.ops.push(Ga);else{W[2]&&qa.ops.pop();qa.trys.pop();continue}}Ga=h.call(d,qa)}catch(gb){Ga=[6,gb],P=0}finally{A=W=0}if(5&Ga[0])throw Ga[1];return{value:Ga[0]?Ga[1]:void 0,done:!0}}([Aa,La])}}
var A,P,W,va,qa={label:0,sent:function(){if(1&W[0])throw W[1];return W[1]},trys:[],ops:[]};return va={next:m(0),throw:m(1),return:m(2)},"function"==typeof Symbol&&(va[Symbol.iterator]=function(){return this}),va},Pi=function(d,h){for(var m=0,A=h.length,P=d.length;m<A;m++,P++)d[P]=h[m];return d},ih=function(){function d(){}return d.importLibrary=function(h){return tb()(function(){var m,A,P,W;return Co(this,function(va){switch(va.label){case 0:return[4,mp(h)];case 1:return(m=va.sent())&&m.library?(A=
function(qa,Aa){return!qa.find(function(La){return La.length===Aa.length&&La.every(function(Ga,gb){return Ga.id===Aa[gb].id&&Ga.versionNonce===Aa[gb].versionNonce})})},[4,d.loadLibrary()]):[2];case 2:return P=va.sent(),W=m.library.reduce(function(qa,Aa){Aa=Rd(Gk(Aa));return A(P,Aa)&&qa.push(Aa),qa},[]),d.saveLibrary(Pi(Pi([],P),W)),[2]}})})()},d}();ih.libraryCache=null;ih.resetLibrary=function(){ih.libraryCache=null;localStorage.removeItem(Na.I.LOCAL_STORAGE_LIBRARY)};ih.loadLibrary=function(){return new Promise(function(){var d=
tb()(function(h){var m,A;return Co(this,function(P){if(ih.libraryCache)return[2,h(JSON.parse(JSON.stringify(ih.libraryCache)))];try{if(!(m=localStorage.getItem(Na.I.LOCAL_STORAGE_LIBRARY)))return[2,h([])];A=JSON.parse(m).map(function(W){return Gk(W)});ih.libraryCache=JSON.parse(JSON.stringify(A));h(A)}catch(W){console.error(W),h([])}return[2]})});return function(h){return d.apply(this,arguments)}}())};ih.saveLibrary=function(d){var h=ih.libraryCache;try{var m=JSON.stringify(d);ih.libraryCache=JSON.parse(m);
localStorage.setItem(Na.I.LOCAL_STORAGE_LIBRARY,m)}catch(A){ih.libraryCache=h,console.error(A)}};var bm=function(d,h){function m(Aa){return function(La){return function(Ga){if(A)throw new TypeError("Generator is already executing.");for(;qa;)try{if(A=1,P&&(W=2&Ga[0]?P.return:Ga[0]?P.throw||((W=P.return)&&W.call(P),0):P.next)&&!(W=W.call(P,Ga[1])).done)return W;switch(P=0,W&&(Ga=[2&Ga[0],W.value]),Ga[0]){case 0:case 1:W=Ga;break;case 4:return qa.label++,{value:Ga[1],done:!1};case 5:qa.label++;P=Ga[1];
Ga=[0];continue;case 7:Ga=qa.ops.pop();qa.trys.pop();continue;default:if(!(W=qa.trys,(W=0<W.length&&W[W.length-1])||6!==Ga[0]&&2!==Ga[0])){qa=0;continue}if(3===Ga[0]&&(!W||Ga[1]>W[0]&&Ga[1]<W[3]))qa.label=Ga[1];else if(6===Ga[0]&&qa.label<W[1])qa.label=W[1],W=Ga;else if(W&&qa.label<W[2])qa.label=W[2],qa.ops.push(Ga);else{W[2]&&qa.ops.pop();qa.trys.pop();continue}}Ga=h.call(d,qa)}catch(gb){Ga=[6,gb],P=0}finally{A=W=0}if(5&Ga[0])throw Ga[1];return{value:Ga[0]?Ga[1]:void 0,done:!0}}([Aa,La])}}var A,
P,W,va,qa={label:0,sent:function(){if(1&W[0])throw W[1];return W[1]},trys:[],ops:[]};return va={next:m(0),throw:m(1),return:m(2)},"function"==typeof Symbol&&(va[Symbol.iterator]=function(){return this}),va},cm=function(d,h){return JSON.stringify({type:"excalidraw",version:2,source:window.location.origin,elements:yg(d),appState:cn(h,"export")},null,2)},Hl=function(){var d=tb()(function(h,m){var A;return bm(this,function(P){switch(P.label){case 0:return A=cm(h,m),[4,mh(new Blob([A],{type:"application/json"}),
{fileName:m.name,description:"Excalidraw file",extensions:[".excalidraw"]},m.fileHandle)];case 1:return[2,{fileHandle:P.sent()}]}})});return function(h,m){return d.apply(this,arguments)}}(),bn=function(){var d=tb()(function(h){var m;return bm(this,function(A){switch(A.label){case 0:return[4,Gg({description:"Excalidraw files",extensions:[".json",".excalidraw",".png",".svg"],mimeTypes:["application/json","image/png","image/svg+xml"]})];case 1:return m=A.sent(),[2,Dm(m,h)]}})});return function(h){return d.apply(this,
arguments)}}(),em=function(){var d=tb()(function(){var h,m;return bm(this,function(A){switch(A.label){case 0:return[4,ih.loadLibrary()];case 1:return h=A.sent(),m=JSON.stringify({type:"excalidrawlib",version:1,library:h},null,2),"library.excalidrawlib",[4,mh(new Blob([m],{type:Na.LO.excalidrawlib}),{fileName:"library.excalidrawlib",description:"Excalidraw library file",extensions:[".excalidrawlib"]})];case 2:return A.sent(),[2]}})});return function(){return d.apply(this,arguments)}}(),lp=function(){var d=
tb()(function(){var h;return bm(this,function(m){switch(m.label){case 0:return[4,Gg({description:"Excalidraw library files",extensions:[".json",".excalidrawlib"],mimeTypes:["application/json"]})];case 1:return h=m.sent(),ih.importLibrary(h),[2]}})});return function(){return d.apply(this,arguments)}}(),zm=function(d,h){function m(Aa){return function(La){return function(Ga){if(A)throw new TypeError("Generator is already executing.");for(;qa;)try{if(A=1,P&&(W=2&Ga[0]?P.return:Ga[0]?P.throw||((W=P.return)&&
W.call(P),0):P.next)&&!(W=W.call(P,Ga[1])).done)return W;switch(P=0,W&&(Ga=[2&Ga[0],W.value]),Ga[0]){case 0:case 1:W=Ga;break;case 4:return qa.label++,{value:Ga[1],done:!1};case 5:qa.label++;P=Ga[1];Ga=[0];continue;case 7:Ga=qa.ops.pop();qa.trys.pop();continue;default:if(!(W=qa.trys,(W=0<W.length&&W[W.length-1])||6!==Ga[0]&&2!==Ga[0])){qa=0;continue}if(3===Ga[0]&&(!W||Ga[1]>W[0]&&Ga[1]<W[3]))qa.label=Ga[1];else if(6===Ga[0]&&qa.label<W[1])qa.label=W[1],W=Ga;else if(W&&qa.label<W[2])qa.label=W[2],
qa.ops.push(Ga);else{W[2]&&qa.ops.pop();qa.trys.pop();continue}}Ga=h.call(d,qa)}catch(gb){Ga=[6,gb],P=0}finally{A=W=0}if(5&Ga[0])throw Ga[1];return{value:Ga[0]?Ga[1]:void 0,done:!0}}([Aa,La])}}var A,P,W,va,qa={label:0,sent:function(){if(1&W[0])throw W[1];return W[1]},trys:[],ops:[]};return va={next:m(0),throw:m(1),return:m(2)},"function"==typeof Symbol&&(va[Symbol.iterator]=function(){return this}),va},yn=function(){var d=tb()(function(h){var m;return zm(this,function(A){switch(A.label){case 0:if("image/png"!==
h.type)return[3,6];A.label=1;case 1:return A.trys.push([1,4,,5]),[4,Promise.all([g.e(736),g.e(9)]).then(g.bind(g,8527))];case 2:return[4,A.sent().decodePngMetadata(h)];case 3:return[2,A.sent()];case 4:throw"INVALID"===A.sent().message?Error(Jb("alerts.imageDoesNotContainScene")):Error(Jb("alerts.cannotRestoreFromImage"));case 5:return[3,15];case 6:return"text"in Blob?[4,h.text()]:[3,8];case 7:return m=A.sent(),[3,10];case 8:return[4,new Promise(function(P){var W=new FileReader;W.readAsText(h,"utf8");
W.onloadend=function(){W.readyState===FileReader.DONE&&P(W.result)}})];case 9:m=A.sent(),A.label=10;case 10:if("image/svg+xml"!==h.type)return[3,15];A.label=11;case 11:return A.trys.push([11,14,,15]),[4,Promise.all([g.e(736),g.e(9)]).then(g.bind(g,8527))];case 12:return[4,A.sent().decodeSvgMetadata({svg:m})];case 13:return[2,A.sent()];case 14:throw"INVALID"===A.sent().message?Error(Jb("alerts.imageDoesNotContainScene")):Error(Jb("alerts.cannotRestoreFromImage"));case 15:return[2,m]}})});return function(h){return d.apply(this,
arguments)}}(),Dm=function(){var d=tb()(function(h,m){var A,P;return zm(this,function(W){switch(W.label){case 0:return[4,yn(h)];case 1:A=W.sent();try{var va=P=JSON.parse(A);if("excalidraw"!==(null==va?void 0:va.type)||va.elements&&(!Array.isArray(va.elements)||va.appState&&"object"!=typeof va.appState))throw Error(Jb("alerts.couldNotLoadInvalidFile"));var qa=yg(P.elements||[]),Aa=null==m?void 0:m.appearance,La;if(La=h.handle){var Ga=["application/json",Na.LO.excalidraw],gb=Ga.includes;a:{if("string"==
typeof h)var ib=h;else{if(h.type){var kb=h.type;break a}ib=h.name||""}kb=/\.(excalidraw|json)$/.test(ib)?"application/json":/\.png$/.test(ib)?"image/png":/\.jpe?g$/.test(ib)?"image/jpeg":/\.svg$/.test(ib)?"image/svg+xml":""}La=gb.call(Ga,kb)}return[2,xn({elements:qa,appState:sb(sb({appearance:Aa,fileHandle:La?h.handle:null},cn(P.appState||{},"export")),m?ji(P.elements||[],m):{})},m)]}catch(Kb){throw console.error(Kb.message),Error(Jb("alerts.couldNotLoadInvalidFile"));}}})});return function(h,m){return d.apply(this,
arguments)}}(),mp=function(){var d=tb()(function(h){var m,A;return zm(this,function(P){switch(P.label){case 0:return[4,yn(h)];case 1:if(m=P.sent(),"excalidrawlib"!==(A=JSON.parse(m)).type)throw Error(Jb("alerts.couldNotLoadInvalidFile"));return[2,A]}})});return function(h){return d.apply(this,arguments)}}(),Am=function(){var d=tb()(function(h){return zm(this,function(m){return[2,new Promise(function(A,P){try{h.toBlob(function(W){if(!W)return P(new en(Jb("canvasError.canvasTooBig"),"CANVAS_POSSIBLY_TOO_BIG"));
A(W)})}catch(W){P(W)}})]})});return function(h){return d.apply(this,arguments)}}(),Kj=function(d,h){function m(Aa){return function(La){return function(Ga){if(A)throw new TypeError("Generator is already executing.");for(;qa;)try{if(A=1,P&&(W=2&Ga[0]?P.return:Ga[0]?P.throw||((W=P.return)&&W.call(P),0):P.next)&&!(W=W.call(P,Ga[1])).done)return W;switch(P=0,W&&(Ga=[2&Ga[0],W.value]),Ga[0]){case 0:case 1:W=Ga;break;case 4:return qa.label++,{value:Ga[1],done:!1};case 5:qa.label++;P=Ga[1];Ga=[0];continue;
case 7:Ga=qa.ops.pop();qa.trys.pop();continue;default:if(!(W=qa.trys,(W=0<W.length&&W[W.length-1])||6!==Ga[0]&&2!==Ga[0])){qa=0;continue}if(3===Ga[0]&&(!W||Ga[1]>W[0]&&Ga[1]<W[3]))qa.label=Ga[1];else if(6===Ga[0]&&qa.label<W[1])qa.label=W[1],W=Ga;else if(W&&qa.label<W[2])qa.label=W[2],qa.ops.push(Ga);else{W[2]&&qa.ops.pop();qa.trys.pop();continue}}Ga=h.call(d,qa)}catch(gb){Ga=[6,gb],P=0}finally{A=W=0}if(5&Ga[0])throw Ga[1];return{value:Ga[0]?Ga[1]:void 0,done:!0}}([Aa,La])}}var A,P,W,va,qa={label:0,
sent:function(){if(1&W[0])throw W[1];return W[1]},trys:[],ops:[]};return va={next:m(0),throw:m(1),return:m(2)},"function"==typeof Symbol&&(va[Symbol.iterator]=function(){return this}),va},Cm="",Bm=!1,Sh="clipboard"in navigator&&"readText"in navigator.clipboard,Lj="clipboard"in navigator&&"writeText"in navigator.clipboard,ok="clipboard"in navigator&&"write"in navigator.clipboard&&"ClipboardItem"in window&&"toBlob"in HTMLCanvasElement.prototype,nk=function(){var d=tb()(function(h,m){var A,P,W;return Kj(this,
function(va){switch(va.label){case 0:A={type:"excalidraw/elements",created:Date.now(),elements:We(h,m)},Cm=P=JSON.stringify(A),va.label=1;case 1:return va.trys.push([1,3,,4]),Bm=!1,[4,xb(P)];case 2:return va.sent(),[3,4];case 3:return W=va.sent(),Bm=!0,console.error(W),[3,4];case 4:return[2]}})});return function(h,m){return d.apply(this,arguments)}}(),I=function(){if(!Cm)return{};try{return JSON.parse(Cm)}catch(d){return console.error(d),{}}},Y=function(d){d=function(h){var m=h.trim().split("\n").map(function(P){return P.trim().split("\t")});
if(m.length&&2!==m[0].length&&(m=h.trim().split("\n").map(function(P){return P.trim().split(",")})),0===m.length)return{type:"NOT_SPREADSHEET",reason:"No values"};var A=m[0].length;if(!m.every(function(P){return P.length===A}))return{type:"NOT_SPREADSHEET",reason:"All rows don't have same number of columns"};h=Cn(m);return"VALID_SPREADSHEET"!==h.type&&(m=Cn(function(P){for(var W=[],va=0;va<P[0].length;va++){for(var qa=[],Aa=0;Aa<P.length;Aa++)qa.push(P[Aa][va]);W.push(qa)}return W}(m)),"VALID_SPREADSHEET"===
m.type)?m:h}(d);return"VALID_SPREADSHEET"===d.type?{spreadsheet:d.spreadsheet}:null},ya=function(){var d=tb()(function(h){var m,A,P;return Kj(this,function(W){switch(W.label){case 0:return W.trys.push([0,5,,6]),h?(A=null===(m=h.clipboardData)||void 0===m?void 0:m.getData("text/plain").trim(),[3,4]):[3,1];case 1:return(P=Sh)?[4,navigator.clipboard.readText()]:[3,3];case 2:P=W.sent(),W.label=3;case 3:A=P,W.label=4;case 4:return[2,A||""];case 5:return W.sent(),[2,""];case 6:return[2]}})});return function(h){return d.apply(this,
arguments)}}(),$a=function(){var d=tb()(function(h){var m,A,P,W;return Kj(this,function(va){switch(va.label){case 0:return[4,ya(h)];case 1:if(!(m=va.sent())||m.includes("\x3c!-- svg-source:excalidraw --\x3e"))return[2,I()];if(A=Y(m))return[2,A];P=I();try{return W=JSON.parse(m),"excalidraw/elements"===(null==(qa=W)?void 0:qa.type)&&(null==P||!P.created||P.created<W.created)?[2,{elements:W.elements}]:[2,P]}catch(Aa){return[2,Bm&&P.elements?P:{text:m}]}}var qa})});return function(h){return d.apply(this,
arguments)}}(),pb=function(){var d=tb()(function(h){var m;return Kj(this,function(A){switch(A.label){case 0:return[4,Am(h)];case 1:return m=A.sent(),[4,navigator.clipboard.write([new window.ClipboardItem({"image/png":m})])];case 2:return A.sent(),[2]}})});return function(h){return d.apply(this,arguments)}}(),xb=function(){var d=tb()(function(h){var m,A;return Kj(this,function(P){switch(P.label){case 0:if(m=!1,!Lj)return[3,4];P.label=1;case 1:return P.trys.push([1,3,,4]),[4,navigator.clipboard.writeText(h||
"")];case 2:return P.sent(),m=!0,[3,4];case 3:return A=P.sent(),console.error(A),[3,4];case 4:if(P=!m){var W=h||" ",va="rtl"===document.documentElement.getAttribute("dir");P=document.createElement("textarea");P.style.border="0";P.style.padding="0";P.style.margin="0";P.style.position="absolute";P.style[va?"right":"left"]="-9999px";P.style.top="".concat(window.pageYOffset||document.documentElement.scrollTop,"px");P.style.fontSize="12pt";P.setAttribute("readonly","");P.value=W;document.body.appendChild(P);
W=!1;try{P.select(),P.setSelectionRange(0,P.value.length),W=document.execCommand("copy")}catch(qa){console.error(qa)}P=!(P.remove(),W)}if(P)throw Error("couldn't copy");return[2]}})});return function(h){return d.apply(this,arguments)}}(),Vb=function(d,h){function m(Aa){return function(La){return function(Ga){if(A)throw new TypeError("Generator is already executing.");for(;qa;)try{if(A=1,P&&(W=2&Ga[0]?P.return:Ga[0]?P.throw||((W=P.return)&&W.call(P),0):P.next)&&!(W=W.call(P,Ga[1])).done)return W;switch(P=
0,W&&(Ga=[2&Ga[0],W.value]),Ga[0]){case 0:case 1:W=Ga;break;case 4:return qa.label++,{value:Ga[1],done:!1};case 5:qa.label++;P=Ga[1];Ga=[0];continue;case 7:Ga=qa.ops.pop();qa.trys.pop();continue;default:if(!(W=qa.trys,(W=0<W.length&&W[W.length-1])||6!==Ga[0]&&2!==Ga[0])){qa=0;continue}if(3===Ga[0]&&(!W||Ga[1]>W[0]&&Ga[1]<W[3]))qa.label=Ga[1];else if(6===Ga[0]&&qa.label<W[1])qa.label=W[1],W=Ga;else if(W&&qa.label<W[2])qa.label=W[2],qa.ops.push(Ga);else{W[2]&&qa.ops.pop();qa.trys.pop();continue}}Ga=
h.call(d,qa)}catch(gb){Ga=[6,gb],P=0}finally{A=W=0}if(5&Ga[0])throw Ga[1];return{value:Ga[0]?Ga[1]:void 0,done:!0}}([Aa,La])}}var A,P,W,va,qa={label:0,sent:function(){if(1&W[0])throw W[1];return W[1]},trys:[],ops:[]};return va={next:m(0),throw:m(1),return:m(2)},"function"==typeof Symbol&&(va[Symbol.iterator]=function(){return this}),va},kc=function(){var d=tb()(function(h,m,A,P,W){var va,qa,Aa,La,Ga,gb,ib,kb,Kb,Ib=W.exportBackground,mc=W.exportPadding,Sc=void 0===mc?10:mc,Yc=W.viewBackgroundColor,
kd=W.name;mc=W.scale;var ke=void 0===mc?1:mc,ie=W.shouldAddWatermark;return Vb(this,function(De){switch(De.label){case 0:if(0===m.length)throw Error(Jb("alerts.cannotExportEmptyCanvas"));return"svg"!==h&&"clipboard-svg"!==h?[3,7]:(qa=Ih,Aa=[m],La={exportBackground:Ib,exportWithDarkMode:A.exportWithDarkMode,viewBackgroundColor:Yc,exportPadding:Sc,scale:ke,shouldAddWatermark:ie},A.exportEmbedScene&&"svg"===h?[4,Promise.all([g.e(736),g.e(9)]).then(g.bind(g,8527))]:[3,3]);case 1:return[4,De.sent().encodeSvgMetadata({text:cm(m,
A)})];case 2:return Ga=De.sent(),[3,4];case 3:Ga=void 0,De.label=4;case 4:return va=qa.apply(void 0,Aa.concat([(La.metadata=Ga,La)])),"svg"!==h?[3,6]:[4,mh(new Blob([va.outerHTML],{type:"image/svg+xml"}),{fileName:"".concat(kd,".svg"),extensions:[".svg"]})];case 5:return De.sent(),[2];case 6:if("clipboard-svg"===h)return xb(va.outerHTML),[2];De.label=7;case 7:return(gb=km(m,A,{exportBackground:Ib,viewBackgroundColor:Yc,exportPadding:Sc,scale:ke,shouldAddWatermark:ie})).style.display="none",document.body.appendChild(gb),
"png"!==h?[3,13]:(ib="".concat(kd,".png"),[4,Am(gb)]);case 8:return kb=De.sent(),A.exportEmbedScene?[4,Promise.all([g.e(736),g.e(9)]).then(g.bind(g,8527))]:[3,11];case 9:return[4,De.sent().encodePngMetadata({blob:kb,metadata:cm(m,A)})];case 10:kb=De.sent(),De.label=11;case 11:return[4,mh(kb,{fileName:ib,extensions:[".png"]})];case 12:return De.sent(),[3,17];case 13:if("clipboard"!==h)return[3,17];De.label=14;case 14:return De.trys.push([14,16,,17]),[4,pb(gb)];case 15:return De.sent(),[3,17];case 16:if("CANVAS_POSSIBLY_TOO_BIG"===
(Kb=De.sent()).name)throw Kb;throw Error(Jb("alerts.couldNotCopyToClipboard"));case 17:return gb!==P&&gb.remove(),[2]}})});return function(h,m,A,P,W){return d.apply(this,arguments)}}(),xc=function(d,h){function m(Aa){return function(La){return function(Ga){if(A)throw new TypeError("Generator is already executing.");for(;qa;)try{if(A=1,P&&(W=2&Ga[0]?P.return:Ga[0]?P.throw||((W=P.return)&&W.call(P),0):P.next)&&!(W=W.call(P,Ga[1])).done)return W;switch(P=0,W&&(Ga=[2&Ga[0],W.value]),Ga[0]){case 0:case 1:W=
Ga;break;case 4:return qa.label++,{value:Ga[1],done:!1};case 5:qa.label++;P=Ga[1];Ga=[0];continue;case 7:Ga=qa.ops.pop();qa.trys.pop();continue;default:if(!(W=qa.trys,(W=0<W.length&&W[W.length-1])||6!==Ga[0]&&2!==Ga[0])){qa=0;continue}if(3===Ga[0]&&(!W||Ga[1]>W[0]&&Ga[1]<W[3]))qa.label=Ga[1];else if(6===Ga[0]&&qa.label<W[1])qa.label=W[1],W=Ga;else if(W&&qa.label<W[2])qa.label=W[2],qa.ops.push(Ga);else{W[2]&&qa.ops.pop();qa.trys.pop();continue}}Ga=h.call(d,qa)}catch(gb){Ga=[6,gb],P=0}finally{A=W=0}if(5&
Ga[0])throw Ga[1];return{value:Ga[0]?Ga[1]:void 0,done:!0}}([Aa,La])}}var A,P,W,va,qa={label:0,sent:function(){if(1&W[0])throw W[1];return W[1]},trys:[],ops:[]};return va={next:m(0),throw:m(1),return:m(2)},"function"==typeof Symbol&&(va[Symbol.iterator]=function(){return this}),va},Lc,fd,Cd;Wd({name:"changeProjectName",perform:function(d,h,m){return dh("change","title"),{appState:Ta(Ta({},h),{},{name:m}),commitToHistory:!1}},PanelComponent:function(d){var h=d.appState,m=d.updateData;return R().createElement(si,
{label:Jb("labels.fileTitle"),value:h.name||"Unnamed",onChange:function(A){return m(A)}})}});Wd({name:"changeExportBackground",perform:function(d,h,m){return{appState:Ta(Ta({},h),{},{exportBackground:m}),commitToHistory:!1}},PanelComponent:function(d){var h=d.appState,m=d.updateData;return R().createElement("label",null,R().createElement("input",{type:"checkbox",checked:h.exportBackground,onChange:function(A){return m(A.target.checked)}})," ",Jb("labels.withBackground"))}});Wd({name:"changeExportEmbedScene",
perform:function(d,h,m){return{appState:Ta(Ta({},h),{},{exportEmbedScene:m}),commitToHistory:!1}},PanelComponent:function(d){var h=d.appState,m=d.updateData;return R().createElement("label",{style:{display:"flex"}},R().createElement("input",{type:"checkbox",checked:h.exportEmbedScene,onChange:function(A){return m(A.target.checked)}})," ",Jb("labels.exportEmbedScene"),R().createElement(Ij,{label:Jb("labels.exportEmbedScene_details"),position:"above",long:!0},R().createElement("div",{className:"TooltipIcon"},
Zh)))}});Wd({name:"changeShouldAddWatermark",perform:function(d,h,m){return{appState:Ta(Ta({},h),{},{shouldAddWatermark:m}),commitToHistory:!1}},PanelComponent:function(d){var h=d.appState,m=d.updateData;return R().createElement("label",null,R().createElement("input",{type:"checkbox",checked:h.shouldAddWatermark,onChange:function(A){return m(A.target.checked)}})," ",Jb("labels.addWatermark"))}});Wd({name:"saveScene",perform:(Lc=tb()(function(d,h,m){var A,P,W;return xc(this,function(va){switch(va.label){case 0:A=
!!h.fileHandle,va.label=1;case 1:return va.trys.push([1,3,,4]),[4,Hl(d,h)];case 2:return P=va.sent().fileHandle,[2,{commitToHistory:!1,appState:Ta(Ta({},h),{},{fileHandle:P,toastMessage:A?P.name?Jb("toast.fileSavedToFilename").replace("{filename}",'"'.concat(P.name,'"')):Jb("toast.fileSaved"):null})}];case 3:return"AbortError"!==(null==(W=va.sent())?void 0:W.name)&&console.error(W),[2,{commitToHistory:!1}];case 4:return[2]}})}),function(d,h,m){return Lc.apply(this,arguments)}),keyTest:function(d){return"s"===
d.key&&d[xe]&&!d.shiftKey},PanelComponent:function(d){var h=d.updateData;return R().createElement(Te,{type:"button",icon:Vd,title:Jb("buttons.save"),"aria-label":Jb("buttons.save"),showAriaLabel:Ae(),onClick:function(){return h(null)}})}});Wd({name:"saveAsScene",perform:(fd=tb()(function(d,h,m){var A,P;return xc(this,function(W){switch(W.label){case 0:return W.trys.push([0,2,,3]),[4,Hl(d,Ta(Ta({},h),{},{fileHandle:null}))];case 1:return A=W.sent().fileHandle,[2,{commitToHistory:!1,appState:Ta(Ta({},
h),{},{fileHandle:A})}];case 2:return"AbortError"!==(null==(P=W.sent())?void 0:P.name)&&console.error(P),[2,{commitToHistory:!1}];case 3:return[2]}})}),function(d,h,m){return fd.apply(this,arguments)}),keyTest:function(d){return"s"===d.key&&d.shiftKey&&d[xe]},PanelComponent:function(d){var h=d.updateData;return R().createElement(Te,{type:"button",icon:al,title:Jb("buttons.saveAs"),"aria-label":Jb("buttons.saveAs"),showAriaLabel:Ae(),hidden:!("chooseFileSystemEntries"in window||"showOpenFilePicker"in
window),onClick:function(){return h(null)}})}});Wd({name:"loadScene",perform:(Cd=tb()(function(d,h){var m,A,P,W;return xc(this,function(va){switch(va.label){case 0:return va.trys.push([0,2,,3]),[4,bn(h)];case 1:return m=va.sent(),A=m.elements,P=m.appState,[2,{elements:A,appState:P,commitToHistory:!0}];case 2:return"AbortError"===(null==(W=va.sent())?void 0:W.name)?[2,!1]:[2,{elements:d,appState:Ta(Ta({},h),{},{errorMessage:W.message}),commitToHistory:!1}];case 3:return[2]}})}),function(d,h){return Cd.apply(this,
arguments)}),keyTest:function(d){return d[xe]&&"o"===d.key},PanelComponent:function(d){var h=d.updateData;d.appState;return R().createElement(Te,{type:"button",icon:hk,title:Jb("buttons.load"),"aria-label":Jb("buttons.load"),showAriaLabel:Ae(),onClick:h})}});Wd({name:"exportWithDarkMode",perform:function(d,h,m){return{appState:Ta(Ta({},h),{},{exportWithDarkMode:m}),commitToHistory:!1}},PanelComponent:function(d){var h=d.appState,m=d.updateData;return R().createElement("div",{style:{display:"flex",
justifyContent:"flex-end",marginTop:"-45px",marginBottom:"10px"}},R().createElement(yk,{value:h.exportWithDarkMode?"dark":"light",onChange:function(A){m("dark"===A)},title:Jb("labels.toggleExportColorScheme")}))}});var Qd="{}",ff=Wd({name:"copyStyles",perform:function(d,h){d=d.find(function(m){return h.selectedElementIds[m.id]});return d&&(Qd=JSON.stringify(d)),{appState:ob(ob({},h),{},{toastMessage:Jb("toast.copyStyles")}),commitToHistory:!1}},contextItemLabel:"labels.copyStyles",keyTest:function(d){return d[xe]&&
d.altKey&&"KeyC"===d.code}}),Ue=Wd({name:"pasteStyles",perform:function(d,h){var m=JSON.parse(Qd);return"text"!==(null==m?void 0:m.type)&&"diamond"!==(null==m?void 0:m.type)&&"rectangle"!==(null==m?void 0:m.type)&&"ellipse"!==(null==m?void 0:m.type)&&"arrow"!==(null==m?void 0:m.type)&&"draw"!==(null==m?void 0:m.type)&&"line"!==(null==m?void 0:m.type)?{elements:d,commitToHistory:!1}:{elements:d.map(function(A){return h.selectedElementIds[A.id]?(A=vg(A,{backgroundColor:null==m?void 0:m.backgroundColor,
strokeWidth:null==m?void 0:m.strokeWidth,strokeColor:null==m?void 0:m.strokeColor,strokeStyle:null==m?void 0:m.strokeStyle,fillStyle:null==m?void 0:m.fillStyle,opacity:null==m?void 0:m.opacity,roughness:null==m?void 0:m.roughness}),og(A)&&(pe(A,{fontSize:(null==m?void 0:m.fontSize)||Na.n5,fontFamily:(null==m?void 0:m.fontFamily)||Na.rk,textAlign:(null==m?void 0:m.textAlign)||Na.Hg}),th(A)),A):A}),commitToHistory:!0}},contextItemLabel:"labels.pasteStyles",keyTest:function(d){return d[xe]&&d.altKey&&
"KeyV"===d.code}}),di=function(d){return R().createElement("label",{title:"".concat(d.title," — ?"),className:"help-icon"},R().createElement("div",{onClick:d.onClick},Zh))};Wd({name:"toggleCanvasMenu",perform:function(d,h){return{appState:Zb(Zb({},h),{},{openMenu:"canvas"===h.openMenu?null:"canvas"}),commitToHistory:!1}},PanelComponent:function(d){var h=d.appState;d=d.updateData;return R().createElement(Te,{type:"button",icon:vd,"aria-label":Jb("buttons.menu"),onClick:d,selected:"canvas"===h.openMenu})}});
Wd({name:"toggleEditMenu",perform:function(d,h){return{appState:Zb(Zb({},h),{},{openMenu:"shape"===h.openMenu?null:"shape"}),commitToHistory:!1}},PanelComponent:function(d){var h=d.elements,m=d.appState;d=d.updateData;return R().createElement(Te,{visible:Uf(m,Rd(h)),type:"button",icon:Hj,"aria-label":Jb("buttons.edit"),onClick:d,selected:"shape"===m.openMenu})}});Wd({name:"toggleFullScreen",perform:function(){return Ug()||document.documentElement.requestFullscreen(),Ug()&&document.exitFullscreen(),
{commitToHistory:!1}},keyTest:function(d){return"KeyF"===d.code&&!d[xe]}});Wd({name:"toggleShortcuts",perform:function(d,h){return{appState:Zb(Zb({},h),{},{showHelpDialog:!h.showHelpDialog}),commitToHistory:!1}},PanelComponent:function(d){d=d.updateData;return R().createElement(di,{title:Jb("helpDialog.title"),onClick:d})},keyTest:function(d){return"?"===d.key}});var Jk=function(d,h){for(var m=0,A=h.length,P=d.length;m<A;m++,P++)d[P]=h[m];return d},Oj=function(d,h){d=We(Rd(d),h);return 2<=d.length&&
!function(m){if(2<=m.length)for(var A=function(qa){if(m.reduce(function(Aa,La){return Aa&&La.groupIds.includes(qa)},!0))return{value:!0}},P=0,W=m[0].groupIds;P<W.length;P++){var va=A(W[P]);if("object"==typeof va)return va.value}return!1}(d)},Sf=Wd({name:"group",perform:function(d,h){var m=We(Rd(d),h);if(2>m.length)return{appState:h,elements:d,commitToHistory:!1};var A=sk(h);if(1===A.length&&(A=new Set(Pj(d,A[0]).map(function(va){return va.id})),m=new Set(m.map(function(va){return va.id})),(new Set(Jk(Jk([],
Array.from(A)),Array.from(m)))).size===A.size))return{appState:h,elements:d,commitToHistory:!1};var P=gf();A=d.map(function(va){if(h.selectedElementIds[va.id]){var qa=h.editingGroupId;var Aa=qk([],va.groupIds);qa=qa?Aa.indexOf(qa):-1;Aa=(Aa.splice(-1<qa?qa:Aa.length,0,P),Aa);va=vg(va,{groupIds:Aa})}return va});d=Pj(A,P);var W=A.lastIndexOf(d[d.length-1]);m=A.slice(W+1);A=A.slice(0,W).filter(function(va){return!va.groupIds.includes(P)});d=Jk(Jk(Jk([],A),d),m);return{appState:rk(P,nc(nc({},h),{},{selectedGroupIds:{}}),
Rd(d)),elements:d,commitToHistory:!0}},contextItemLabel:"labels.group",contextItemPredicate:function(d,h){return Oj(d,h)},keyTest:function(d){return!d.shiftKey&&d[xe]&&"KeyG"===d.code},PanelComponent:function(d){var h=d.elements,m=d.appState,A=d.updateData;return R().createElement(Te,{hidden:!Oj(h,m),type:"button",icon:R().createElement(jf,{appearance:m.appearance}),onClick:function(){return A(null)},title:"".concat(Jb("labels.group")," — ").concat(Ed("CtrlOrCmd+G")),"aria-label":Jb("labels.group"),
visible:Yg(Rd(h),m)})}}),oi=Wd({name:"ungroup",perform:function(d,h){if(0===sk(h).length)return{appState:h,elements:d,commitToHistory:!1};d=d.map(function(m){var A=function(P,W){return P.filter(function(va){return!W[va]})}(m.groupIds,h.selectedGroupIds);return A.length===m.groupIds.length?m:vg(m,{groupIds:A})});return{appState:Je(nc(nc({},h),{},{selectedGroupIds:{}}),Rd(d)),elements:d,commitToHistory:!0}},keyTest:function(d){return d.shiftKey&&d[xe]&&"KeyG"===d.code},contextItemLabel:"labels.ungroup",
contextItemPredicate:function(d,h){return 0<sk(h).length},PanelComponent:function(d){var h=d.elements,m=d.appState,A=d.updateData;return R().createElement(Te,{type:"button",hidden:0===sk(m).length,icon:R().createElement(fi,{appearance:m.appearance}),onClick:function(){return A(null)},title:"".concat(Jb("labels.ungroup")," — ").concat(Ed("CtrlOrCmd+Shift+G")),"aria-label":Jb("labels.ungroup"),visible:Yg(Rd(h),m)})}}),wk=(g(1395),function(d){var h=d.children,m=d.color,A=d.border;d=d.onClick;return R().createElement("div",
{className:"Avatar",style:{background:m,border:"1px solid ".concat(A)},onClick:d},h)});Wd({name:"goToCollaborator",perform:function(d,h,m){return m?{appState:Mc(Mc(Mc({},h),vi({scenePoint:m,viewportDimensions:{width:h.width,height:h.height},zoom:h.zoom})),{},{openMenu:"canvas"===h.openMenu?null:h.openMenu}),commitToHistory:!1}:{appState:h,commitToHistory:!1}},PanelComponent:function(d){var h=d.appState,m=d.updateData;d=d.id;if(!d)return null;var A=h.collaborators.get(d);if(!A)return null;d=Ci(d,h);
h=d.background;d=d.stroke;var P=function(W){if(!W)return"?";W=W.trim().split(" ");return 2>W.length?W[0].substring(0,2).toUpperCase():(W[0][0]+W[W.length-1][0]).toUpperCase()}(A.username);return R().createElement(wk,{color:h,border:d,onClick:function(){return m(A.pointer)}},P)}});var Gm=function(d,h){for(var m=0,A=h.length,P=d.length;m<A;m++,P++)d[P]=h[m];return d},Ao=Wd({name:"addToLibrary",perform:function(d,h){var m=We(Rd(d),h);return ih.loadLibrary().then(function(A){ih.saveLibrary(Gm(Gm([],A),
[m.map(Qj)]))}),!1},contextItemLabel:"labels.addToLibrary"}),Bn=function(d,h){for(var m=0,A=h.length,P=d.length;m<A;m++,P++)d[P]=h[m];return d},Wn=function(d){var h=new Map;return d.forEach(function(m){var A=0===m.groupIds.length?m.id:m.groupIds[m.groupIds.length-1],P=h.get(A)||[];h.set(A,Bn(Bn([],P),[m]))}),Array.from(h.values())},rf=function(d,h,m){var A,P,W,va=m.axis;m=m.position;d=Nj(d);var qa="x"===va?["minX","maxX"]:["minY","maxY"],Aa=qa[0];qa=qa[1];return Mb(Mb({},{x:0,y:0}),{},"start"===m?
((A={})[va]=h[Aa]-d[Aa],A):"end"===m?((P={})[va]=h[qa]-d[qa],P):((W={})[va]=(h[Aa]+h[qa])/2-(d[Aa]+d[qa])/2,W))},Nj=function(d){d=pg(d);return{minX:d[0],minY:d[1],maxX:d[2],maxY:d[3]}},Uh=function(d,h){return 1<We(Rd(d),h).length},wi=function(d,h,m){h=function(P,W){var va=Wn(P),qa=Nj(P);return va.flatMap(function(Aa){var La=rf(Aa,qa,W);return Aa.map(function(Ga){return vg(Ga,{x:Ga.x+La.x,y:Ga.y+La.y})})})}(We(Rd(d),h),m);var A=Wj(h);return d.map(function(P){return A[P.id]||P})},gn=(Wd({name:"alignTop",
perform:function(d,h){return{appState:h,elements:wi(d,h,{position:"start",axis:"y"}),commitToHistory:!0}},keyTest:function(d){return d[xe]&&d.shiftKey&&"ArrowUp"===d.key},PanelComponent:function(d){var h=d.elements,m=d.appState,A=d.updateData;return R().createElement(Te,{hidden:!Uh(h,m),type:"button",icon:R().createElement(zg,{appearance:m.appearance}),onClick:function(){return A(null)},title:"".concat(Jb("labels.alignTop")," — ").concat(Ed("CtrlOrCmd+Shift+Up")),"aria-label":Jb("labels.alignTop"),
visible:Yg(Rd(h),m)})}}),Wd({name:"alignBottom",perform:function(d,h){return{appState:h,elements:wi(d,h,{position:"end",axis:"y"}),commitToHistory:!0}},keyTest:function(d){return d[xe]&&d.shiftKey&&"ArrowDown"===d.key},PanelComponent:function(d){var h=d.elements,m=d.appState,A=d.updateData;return R().createElement(Te,{hidden:!Uh(h,m),type:"button",icon:R().createElement(Tc,{appearance:m.appearance}),onClick:function(){return A(null)},title:"".concat(Jb("labels.alignBottom")," — ").concat(Ed("CtrlOrCmd+Shift+Down")),
"aria-label":Jb("labels.alignBottom"),visible:Yg(Rd(h),m)})}}),Wd({name:"alignLeft",perform:function(d,h){return{appState:h,elements:wi(d,h,{position:"start",axis:"x"}),commitToHistory:!0}},keyTest:function(d){return d[xe]&&d.shiftKey&&"ArrowLeft"===d.key},PanelComponent:function(d){var h=d.elements,m=d.appState,A=d.updateData;return R().createElement(Te,{hidden:!Uh(h,m),type:"button",icon:R().createElement(Ak,{appearance:m.appearance}),onClick:function(){return A(null)},title:"".concat(Jb("labels.alignLeft"),
" — ").concat(Ed("CtrlOrCmd+Shift+Left")),"aria-label":Jb("labels.alignLeft"),visible:Yg(Rd(h),m)})}}),Wd({name:"alignRight",perform:function(d,h){return{appState:h,elements:wi(d,h,{position:"end",axis:"x"}),commitToHistory:!0}},keyTest:function(d){return d[xe]&&d.shiftKey&&"ArrowRight"===d.key},PanelComponent:function(d){var h=d.elements,m=d.appState,A=d.updateData;return R().createElement(Te,{hidden:!Uh(h,m),type:"button",icon:R().createElement(Km,{appearance:m.appearance}),onClick:function(){return A(null)},
title:"".concat(Jb("labels.alignRight")," — ").concat(Ed("CtrlOrCmd+Shift+Right")),"aria-label":Jb("labels.alignRight"),visible:Yg(Rd(h),m)})}}),Wd({name:"alignVerticallyCentered",perform:function(d,h){return{appState:h,elements:wi(d,h,{position:"center",axis:"y"}),commitToHistory:!0}},PanelComponent:function(d){var h=d.elements,m=d.appState,A=d.updateData;return R().createElement(Te,{hidden:!Uh(h,m),type:"button",icon:R().createElement($h,{appearance:m.appearance}),onClick:function(){return A(null)},
title:Jb("labels.centerVertically"),"aria-label":Jb("labels.centerVertically"),visible:Yg(Rd(h),m)})}}),Wd({name:"alignHorizontallyCentered",perform:function(d,h){return{appState:h,elements:wi(d,h,{position:"center",axis:"x"}),commitToHistory:!0}},PanelComponent:function(d){var h=d.elements,m=d.appState,A=d.updateData;return R().createElement(Te,{hidden:!Uh(h,m),type:"button",icon:R().createElement(te,{appearance:m.appearance}),onClick:function(){return A(null)},title:Jb("labels.centerHorizontally"),
"aria-label":Jb("labels.centerHorizontally"),visible:Yg(Rd(h),m)})}}),function(d,h){for(var m=0,A=h.length,P=d.length;m<A;m++,P++)d[P]=h[m];return d}),Yp=function(d){var h=new Map;return d.forEach(function(m){var A=0===m.groupIds.length?m.id:m.groupIds[m.groupIds.length-1],P=h.get(A)||[];h.set(A,gn(gn([],P),[m]))}),Array.from(h.values())},fj=function(d){var h=pg(d);d=h[0];var m=h[1],A=h[2];h=h[3];return{minX:d,minY:m,maxX:A,maxY:h,width:A-d,height:h-m,midX:(d+A)/2,midY:(m+h)/2}},zo=function(d,h){return 1<
We(Rd(d),h).length},zn=function(d,h,m){h=function(P,W){var va="x"===W.axis?["minX","midX","maxX","width"]:["minY","midY","maxY","height"],qa=va[0],Aa=va[1],La=va[2],Ga=va[3],gb=fj(P);P=Yp(P).map(function(kd){return[kd,fj(kd)]}).sort(function(kd,ke){return kd[1][Aa]-ke[1][Aa]});for(var ib=va=0;ib<P.length;ib++)va+=P[ib][1][Ga];var kb=(gb[Ga]-va)/(P.length-1);if(0>kb){var Kb=P.findIndex(function(kd){return kd[1][qa]===gb[qa]}),Ib=P.findIndex(function(kd){return kd[1][La]===gb[La]}),mc=(P[Ib][1][Aa]-
P[Kb][1][Aa])/(P.length-1),Sc=P[Kb][1][Aa];return P.flatMap(function(kd,ke){var ie=kd[0];kd=kd[1];var De={x:0,y:0};return ke!==Kb&&ke!==Ib&&(Sc+=mc,De[W.axis]=Sc-kd[Aa]),ie.map(function(qe){return vg(qe,{x:qe.x+De.x,y:qe.y+De.y})})})}var Yc=gb[qa];return P.flatMap(function(kd){var ke=kd[0];kd=kd[1];var ie={x:0,y:0};return ie[W.axis]=Yc-kd[qa],Yc+=kb,Yc+=kd[Ga],ke.map(function(De){return vg(De,{x:De.x+ie.x,y:De.y+ie.y})})})}(We(Rd(d),h),m);var A=Wj(h);return d.map(function(P){return A[P.id]||P})},
Un=(Wd({name:"distributeHorizontally",perform:function(d,h){return{appState:h,elements:zn(d,h,{space:"between",axis:"x"}),commitToHistory:!0}},keyTest:function(d){return d.altKey&&"KeyH"===d.code},PanelComponent:function(d){var h=d.elements,m=d.appState,A=d.updateData;return R().createElement(Te,{hidden:!zo(h,m),type:"button",icon:R().createElement(Pf,{appearance:m.appearance}),onClick:function(){return A(null)},title:"".concat(Jb("labels.distributeHorizontally")," — ").concat(Ed("Alt+H")),"aria-label":Jb("labels.distributeHorizontally"),
visible:Yg(Rd(h),m)})}}),Wd({name:"distributeVertically",perform:function(d,h){return{appState:h,elements:zn(d,h,{space:"between",axis:"y"}),commitToHistory:!0}},keyTest:function(d){return d.altKey&&"KeyV"===d.code},PanelComponent:function(d){var h=d.elements,m=d.appState,A=d.updateData;return R().createElement(Te,{hidden:!zo(h,m),type:"button",icon:R().createElement(Ag,{appearance:m.appearance}),onClick:function(){return A(null)},title:"".concat(Jb("labels.distributeVertically")," — ").concat(Ed("Alt+V")),
"aria-label":Jb("labels.distributeVertically"),visible:Yg(Rd(h),m)})}}),function(d,h){function m(Aa){return function(La){return function(Ga){if(A)throw new TypeError("Generator is already executing.");for(;qa;)try{if(A=1,P&&(W=2&Ga[0]?P.return:Ga[0]?P.throw||((W=P.return)&&W.call(P),0):P.next)&&!(W=W.call(P,Ga[1])).done)return W;switch(P=0,W&&(Ga=[2&Ga[0],W.value]),Ga[0]){case 0:case 1:W=Ga;break;case 4:return qa.label++,{value:Ga[1],done:!1};case 5:qa.label++;P=Ga[1];Ga=[0];continue;case 7:Ga=qa.ops.pop();
qa.trys.pop();continue;default:if(!(W=qa.trys,(W=0<W.length&&W[W.length-1])||6!==Ga[0]&&2!==Ga[0])){qa=0;continue}if(3===Ga[0]&&(!W||Ga[1]>W[0]&&Ga[1]<W[3]))qa.label=Ga[1];else if(6===Ga[0]&&qa.label<W[1])qa.label=W[1],W=Ga;else if(W&&qa.label<W[2])qa.label=W[2],qa.ops.push(Ga);else{W[2]&&qa.ops.pop();qa.trys.pop();continue}}Ga=h.call(d,qa)}catch(gb){Ga=[6,gb],P=0}finally{A=W=0}if(5&Ga[0])throw Ga[1];return{value:Ga[0]?Ga[1]:void 0,done:!0}}([Aa,La])}}var A,P,W,va,qa={label:0,sent:function(){if(1&
W[0])throw W[1];return W[1]},trys:[],ops:[]};return va={next:m(0),throw:m(1),return:m(2)},"function"==typeof Symbol&&(va[Symbol.iterator]=function(){return this}),va}),dn=Wd({name:"copy",perform:function(d,h){return nk(Rd(d),h),{commitToHistory:!1}},contextItemLabel:"labels.copy"}),Xp=Wd({name:"cut",perform:function(d,h,m,A){return dn.perform(d,h,m,A),Ff.perform(d,h,m,A)},contextItemLabel:"labels.cut",keyTest:function(d){return d[xe]&&"KeyX"===d.code}}),qp=Wd({name:"copyAsSvg",perform:function(){var d=
tb()(function(h,m,A,P){var W,va;return Un(this,function(qa){switch(qa.label){case 0:if(!P.canvas)return[2,{commitToHistory:!1}];W=We(Rd(h),m);qa.label=1;case 1:return qa.trys.push([1,3,,4]),[4,kc("clipboard-svg",W.length?W:Rd(h),m,P.canvas,m)];case 2:return qa.sent(),[2,{commitToHistory:!1}];case 3:return va=qa.sent(),console.error(va),[2,{appState:Dd(Dd({},m),{},{errorMessage:va.message}),commitToHistory:!1}];case 4:return[2]}})});return function(h,m,A,P){return d.apply(this,arguments)}}(),contextItemLabel:"labels.copyAsSvg"}),
pp=Wd({name:"copyAsPng",perform:function(){var d=tb()(function(h,m,A,P){var W,va;return Un(this,function(qa){switch(qa.label){case 0:if(!P.canvas)return[2,{commitToHistory:!1}];W=We(Rd(h),m);qa.label=1;case 1:return qa.trys.push([1,3,,4]),[4,kc("clipboard",W.length?W:Rd(h),m,P.canvas,m)];case 2:return qa.sent(),[2,{appState:Dd(Dd({},m),{},{toastMessage:Jb("toast.copyToClipboardAsPng",{exportSelection:W.length?Jb("toast.selection"):Jb("toast.canvas"),exportColorScheme:m.exportWithDarkMode?Jb("buttons.darkMode"):
Jb("buttons.lightMode")})}),commitToHistory:!1}];case 3:return va=qa.sent(),console.error(va),[2,{appState:Dd(Dd({},m),{},{errorMessage:va.message}),commitToHistory:!1}];case 4:return[2]}})});return function(h,m,A,P){return d.apply(this,arguments)}}(),contextItemLabel:"labels.copyAsPng",keyTest:function(d){return"KeyC"===d.code&&d.altKey&&d.shiftKey}}),np=Wd({name:"gridMode",perform:function(d,h){return dh("view","mode","grid"),{appState:Vc(Vc({},h),{},{gridSize:this.checked(h)?null:Na.k}),commitToHistory:!1}},
checked:function(d){return null!==d.gridSize},contextItemLabel:"labels.showGrid",keyTest:function(d){return d[xe]&&"Quote"===d.code}}),Xd=Wd({name:"zenMode",perform:function(d,h){return dh("view","mode","zen"),{appState:rb(rb({},h),{},{zenModeEnabled:!this.checked(h)}),commitToHistory:!1}},checked:function(d){return d.zenModeEnabled},contextItemLabel:"buttons.zenMode",keyTest:function(d){return!d[xe]&&d.altKey&&"KeyZ"===d.code}}),Vn=Wd({name:"stats",perform:function(d,h){return{appState:Sb(Sb({},
h),{},{showStats:!this.checked(h)}),commitToHistory:!1}},checked:function(d){return d.showStats},contextItemLabel:"stats.title"}),op=function(d,h,m){if(!(h.multiElement||h.resizingElement||h.editingElement||h.draggingElement)){m=m();if(null===m)return{commitToHistory:!1};var A=Wj(d),P=m.elements,W=Wj(P);d=d.filter(function(va){return!W.hasOwnProperty(va.id)});P=P.map(function(va){return vg(A[va.id]||va,va)}).concat(d.map(function(va){return vg(va,{isDeleted:!0})}));return nj(P,d),{elements:P,appState:id(id({},
h),m.appState),commitToHistory:!1,syncHistory:!0}}return{commitToHistory:!1}},jm=function(){function d(h,m,A,P){var W=this;this.actions={};this.renderAction=function(va,qa){if(W.actions[va]&&"PanelComponent"in W.actions[va]){var Aa=W.actions[va];va=Aa.PanelComponent;return R().createElement(va,{elements:W.getElementsIncludingDeleted(),appState:W.getAppState(),updateData:function(La){W.updater(Aa.perform(W.getElementsIncludingDeleted(),W.getAppState(),La,W.app))},id:qa})}return null};this.updater=
function(va){if(!(va&&"then"in va))return h(va);va.then(function(qa){return h(qa)})};this.getAppState=m;this.getElementsIncludingDeleted=A;this.app=P}return d.prototype.registerAction=function(h){this.actions[h.name]=h},d.prototype.registerAll=function(h){var m=this;h.forEach(function(A){return m.registerAction(A)})},d.prototype.handleKeyDown=function(h){var m=this,A=Object.values(this.actions).sort(function(P,W){return(W.keyPriority||0)-(P.keyPriority||0)}).filter(function(P){return P.keyTest&&P.keyTest(h,
m.getAppState(),m.getElementsIncludingDeleted())});return 0!==A.length&&!(this.getAppState().viewModeEnabled&&!Object.values(Na.EH).includes(A[0].name))&&(h.preventDefault(),this.updater(A[0].perform(this.getElementsIncludingDeleted(),this.getAppState(),null,this.app)),!0)},d.prototype.executeAction=function(h){this.updater(h.perform(this.getElementsIncludingDeleted(),this.getAppState(),null,this.app))},d}(),Jm=function(d){d=Array.from(d.values());return{x:Yn(d,function(h){return h.x})/d.length,y:Yn(d,
function(h){return h.y})/d.length}},Xn=function(d){var h=d[0];d=d[1];return Math.hypot(h.x-d.x,h.y-d.y)},Yn=function(d,h){return d.reduce(function(m,A){return m+h(A)},0)},Bo,Zp=function(){function d(){var h=this;this.elementCache=new Map;this.recording=!0;this.stateHistory=[];this.redoStack=[];this.lastEntry=null;this.generateEntry=function(m,A){return h.dehydrateHistoryEntry({appState:{selectedElementIds:m.selectedElementIds,viewBackgroundColor:m.viewBackgroundColor,editingLinearElement:m.editingLinearElement,
editingGroupId:m.editingGroupId,name:m.name},elements:A.reduce(function(P,W){if(cg(W)&&m.multiElement&&m.multiElement.id===W.id){if(m.multiElement&&m.multiElement.id===W.id&&2>W.points.length)return P;P.push(be(be({},W),{},{points:W.lastCommittedPoint!==W.points[W.points.length-1]?W.points.slice(0,-1):W.points}))}else P.push(W);return P},[])})}}return d.prototype.hydrateHistoryEntry=function(h){var m=h.elements,A=this;return{appState:JSON.parse(h.appState),elements:m.map(function(P){var W,va=null===
(W=A.elementCache.get(P.id))||void 0===W?void 0:W.get(P.versionNonce);if(!va)throw Error("Element not found: ".concat(P.id,":").concat(P.versionNonce));return va})}},d.prototype.dehydrateHistoryEntry=function(h){var m=h.elements,A=this;return{appState:JSON.stringify(h.appState),elements:m.map(function(P){A.elementCache.has(P.id)||A.elementCache.set(P.id,new Map);var W=A.elementCache.get(P.id);return W.has(P.versionNonce)||W.set(P.versionNonce,Qj(P)),{id:P.id,versionNonce:P.versionNonce}})}},d.prototype.getSnapshotForTest=
function(){var h=this;return{recording:this.recording,stateHistory:this.stateHistory.map(function(m){return h.hydrateHistoryEntry(m)}),redoStack:this.redoStack.map(function(m){return h.hydrateHistoryEntry(m)})}},d.prototype.clear=function(){this.stateHistory.length=0;this.redoStack.length=0;this.lastEntry=null;this.elementCache.clear()},d.prototype.shouldCreateEntry=function(h){var m,A=this.lastEntry;if(!A||h.elements.length!==A.elements.length)return!0;for(var P=h.elements.length-1;-1<P;P--){var W=
h.elements[P],va=A.elements[P];if(!W||!va||W.id!==va.id||W.versionNonce!==va.versionNonce)return!0}for(m in h.appState){var qa,Aa;if(("editingLinearElement"!==m||(null===(qa=h.appState[m])||void 0===qa?void 0:qa.elementId)!==(null===(Aa=A.appState[m])||void 0===Aa?void 0:Aa.elementId))&&"selectedElementIds"!==m&&h.appState[m]!==A.appState[m])return!0}return!1},d.prototype.pushEntry=function(h,m){h=this.generateEntry(h,m);(m=this.hydrateHistoryEntry(h))&&this.shouldCreateEntry(m)&&(this.stateHistory.push(h),
this.lastEntry=m,this.clearRedoStack())},d.prototype.clearRedoStack=function(){this.redoStack.splice(0,this.redoStack.length)},d.prototype.redoOnce=function(){if(0===this.redoStack.length)return null;var h=this.redoStack.pop();return void 0!==h?(this.stateHistory.push(h),this.hydrateHistoryEntry(h)):null},d.prototype.undoOnce=function(){if(1===this.stateHistory.length)return null;var h=this.stateHistory.pop(),m=this.stateHistory[this.stateHistory.length-1];return void 0!==h?(this.redoStack.push(h),
this.hydrateHistoryEntry(m)):null},d.prototype.setCurrentState=function(h,m){this.lastEntry=this.hydrateHistoryEntry(this.generateEntry(h,m))},d.prototype.resumeRecording=function(){this.recording=!0},d.prototype.record=function(h,m){this.recording&&(this.pushEntry(h,m),this.recording=!1)},d}(),lm=[{icon:R().createElement("svg",{viewBox:"0 0 320 512",className:""},R().createElement("path",{d:"M302.189 329.126H196.105l55.831 135.993c3.889 9.428-.555 19.999-9.444 23.999l-49.165 21.427c-9.165 4-19.443-.571-23.332-9.714l-53.053-129.136-86.664 89.138C18.729 472.71 0 463.554 0 447.977V18.299C0 1.899 19.921-6.096 30.277 5.443l284.412 292.542c11.472 11.179 3.007 31.141-12.5 31.141z"})),
value:"selection",key:["v","s"]},{icon:R().createElement("svg",{viewBox:"0 0 448 512"},R().createElement("path",{d:"M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48z"})),value:"rectangle",key:"r"},{icon:R().createElement("svg",{viewBox:"0 0 223.646 223.646"},R().createElement("path",{d:"M111.823 0L16.622 111.823 111.823 223.646 207.025 111.823z"})),value:"diamond",key:"d"},{icon:R().createElement("svg",{viewBox:"0 0 512 512"},R().createElement("path",
{d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z"})),value:"ellipse",key:"e"},{icon:R().createElement("svg",{viewBox:"0 0 448 512",className:"rtl-mirror"},R().createElement("path",{d:"M313.941 216H12c-6.627 0-12 5.373-12 12v56c0 6.627 5.373 12 12 12h301.941v46.059c0 21.382 25.851 32.09 40.971 16.971l86.059-86.059c9.373-9.373 9.373-24.569 0-33.941l-86.059-86.059c-15.119-15.119-40.971-4.411-40.971 16.971V216z"})),value:"arrow",key:"a"},{icon:R().createElement("svg",{viewBox:"0 0 6 6"},
R().createElement("line",{x1:"0",y1:"3",x2:"6",y2:"3",stroke:"currentColor",strokeLinecap:"round"})),value:"line",key:["p","l"]},{icon:R().createElement("svg",{viewBox:"0 0 512 512"},R().createElement("path",{fill:"currentColor",d:"M290.74 93.24l128.02 128.02-277.99 277.99-114.14 12.6C11.35 513.54-1.56 500.62.14 485.34l12.7-114.22 277.9-277.88zm207.2-19.06l-60.11-60.11c-18.75-18.75-49.16-18.75-67.91 0l-56.55 56.55 128.02 128.02 56.55-56.55c18.75-18.76 18.75-49.16 0-67.91z"})),value:"draw",key:"x"},
{icon:R().createElement("svg",{viewBox:"0 0 448 512"},R().createElement("path",{d:"M432 416h-23.41L277.88 53.69A32 32 0 0 0 247.58 32h-47.16a32 32 0 0 0-30.3 21.69L39.41 416H16a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h128a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16h-19.58l23.3-64h152.56l23.3 64H304a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h128a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zM176.85 272L224 142.51 271.15 272z"})),value:"text",key:"t"}],yo=(g(4518),{cut:[Ed("CtrlOrCmd+X")],copy:[Ed("CtrlOrCmd+C")],
paste:[Ed("CtrlOrCmd+V")],copyStyles:[Ed("CtrlOrCmd+Alt+C")],pasteStyles:[Ed("CtrlOrCmd+Alt+V")],selectAll:[Ed("CtrlOrCmd+A")],deleteSelectedElements:[Ed("Del")],duplicateSelection:[Ed("CtrlOrCmd+D"),Ed("Alt+".concat(Jb("helpDialog.drag")))],sendBackward:[Ed("CtrlOrCmd+[")],bringForward:[Ed("CtrlOrCmd+]")],sendToBack:[Ed(ui?"CtrlOrCmd+Alt+[":"CtrlOrCmd+Shift+[")],bringToFront:[Ed(ui?"CtrlOrCmd+Alt+]":"CtrlOrCmd+Shift+]")],copyAsPng:[Ed("Shift+Alt+C")],copyAsSvg:[],group:[Ed("CtrlOrCmd+G")],ungroup:[Ed("CtrlOrCmd+Shift+G")],
gridMode:[Ed("CtrlOrCmd+'")],zenMode:[Ed("Alt+Z")],stats:[],addToLibrary:[],viewMode:[Ed("Alt+R")]}),Wp=function(d){var h,m=d.options,A=d.onCloseRequest,P=d.top,W=d.left,va=d.actionManager,qa=d.appState;d=!(null===(h=document.querySelector(".excalidraw"))||void 0===h||!h.classList.contains("Appearance_dark"));return R().createElement("div",{className:zc("excalidraw",{"Appearance_dark Appearance_dark-background-none":d})},R().createElement(db,{onCloseRequest:A,top:P,left:W,fitInViewport:!0},R().createElement("ul",
{className:"context-menu",onContextMenu:function(Aa){return Aa.preventDefault()}},m.map(function(Aa,La){var Ga;if("separator"===Aa)return R().createElement("hr",{key:La,className:"context-menu-option-separator"});var gb,ib=Aa.name,kb=Aa.contextItemLabel?Jb(Aa.contextItemLabel):"";return R().createElement("li",{key:La,"data-testid":ib,onClick:A},R().createElement("button",{className:zc("context-menu-option",{dangerous:"deleteSelectedElements"===ib,checkmark:null===(Ga=Aa.checked)||void 0===Ga?void 0:
Ga.call(Aa,qa)}),onClick:function(){return va.executeAction(Aa)}},R().createElement("div",{className:"context-menu-option__label"},kb),R().createElement("kbd",{className:"context-menu-option__shortcut"},ib?(gb=yo[ib])&&0<gb.length?gb[0]:"":"")))}))))},xo=function(){if(Bo)return Bo;var d=document.createElement("div");return document.body.appendChild(d),Bo=d},Hm=function(){(0,ag.unmountComponentAtNode)(xo())};const An=function(d){var h=[];d.options.forEach(function(m){m&&h.push(m)});h.length&&(0,ag.render)(R().createElement(Wp,
{top:d.top,left:d.left,options:h,onCloseRequest:Hm,actionManager:d.actionManager,appState:d.appState}),xo())};g(1575);const Mk=function(d){var h=d.children,m=d.gap,A=d.align,P=d.justifyContent,W=d.className;d=d.style;return R().createElement("div",{className:zc("Stack Stack_horizontal",W),style:Jc({"--gap":m,alignItems:A,justifyContent:P},d)},h)},Nk=function(d){var h=d.children,m=d.gap,A=d.align,P=d.justifyContent;d=d.className;return R().createElement("div",{className:zc("Stack Stack_vertical",d),
style:{"--gap":m,justifyItems:A,justifyContent:P}},h)};var Zq=function(d){var h=d.appState,m=d.renderAction,A=d.elementType;d=Bj(Rd(d.elements),h);h=!!h.editingElement;var P=Ae(),W="rtl"===document.documentElement.getAttribute("dir"),va=Xj(A)||d.some(function(Aa){return Xj(Aa.type)&&(La=Aa.backgroundColor,Ga=5===La.length&&"0"===La.substr(4,1),gb=9===La.length&&"00"===La.substr(7,2),!(Ga||gb||La===uj.elementBackground[0]));var La,Ga,gb}),qa=Xj(A)||d.some(function(Aa){return Xj(Aa.type)});return R().createElement("div",
{className:"panelColumn"},m("changeStrokeColor"),qa&&m("changeBackgroundColor"),va&&m("changeFillStyle"),(nf(A)||d.some(function(Aa){return nf(Aa.type)}))&&R().createElement(R().Fragment,null,m("changeStrokeWidth"),m("changeStrokeStyle"),m("changeSloppiness")),($k(A)||d.some(function(Aa){return $k(Aa.type)}))&&R().createElement(R().Fragment,null,m("changeSharpness")),("text"===A||d.some(function(Aa){return"text"===Aa.type}))&&R().createElement(R().Fragment,null,m("changeFontSize"),m("changeFontFamily"),
m("changeTextAlign")),("arrow"===A||d.some(function(Aa){return"arrow"===Aa.type}))&&R().createElement(R().Fragment,null,m("changeArrowhead")),m("changeOpacity"),R().createElement("fieldset",null,R().createElement("legend",null,Jb("labels.layers")),R().createElement("div",{className:"buttonList"},m("sendToBack"),m("sendBackward"),m("bringToFront"),m("bringForward"))),1<d.length&&R().createElement("fieldset",null,R().createElement("legend",null,Jb("labels.align")),R().createElement("div",{className:"buttonList"},
W?R().createElement(R().Fragment,null,m("alignRight"),m("alignHorizontallyCentered"),m("alignLeft")):R().createElement(R().Fragment,null,m("alignLeft"),m("alignHorizontallyCentered"),m("alignRight")),2<d.length&&m("distributeHorizontally"),R().createElement("div",{className:"iconRow"},m("alignTop"),m("alignVerticallyCentered"),m("alignBottom"),2<d.length&&m("distributeVertically")))),!P&&!h&&0<d.length&&R().createElement("fieldset",null,R().createElement("legend",null,Jb("labels.actions")),R().createElement("div",
{className:"buttonList"},m("duplicateSelection"),m("deleteSelectedElements"),m("group"),m("ungroup"))))},Qr=R().createElement("svg",{viewBox:"0 0 512 512"},R().createElement("path",{d:"M296 32h192c13.255 0 24 10.745 24 24v160c0 13.255-10.745 24-24 24H296c-13.255 0-24-10.745-24-24V56c0-13.255 10.745-24 24-24zm-80 0H24C10.745 32 0 42.745 0 56v160c0 13.255 10.745 24 24 24h192c13.255 0 24-10.745 24-24V56c0-13.255-10.745-24-24-24zM0 296v160c0 13.255 10.745 24 24 24h192c13.255 0 24-10.745 24-24V296c0-13.255-10.745-24-24-24H24c-13.255 0-24 10.745-24 24zm296 184h192c13.255 0 24-10.745 24-24V296c0-13.255-10.745-24-24-24H296c-13.255 0-24 10.745-24 24v160c0 13.255 10.745 24 24 24z"})),
Vp=function(d){var h=d.canvas,m=d.elementType,A=d.setAppState,P=d.isLibraryOpen;return R().createElement(R().Fragment,null,lm.map(function(W,va){var qa=W.value,Aa=W.icon,La=W.key;W=Jb("toolBar.".concat(qa));La="".concat(vj("string"==typeof La?La:La[0])," ").concat(Jb("helpDialog.or")," ").concat(va+1);return R().createElement(Te,{className:"Shape",key:qa,type:"radio",icon:Aa,checked:m===qa,name:"editor-current-shape",title:"".concat(vj(W)," — ").concat(La),keyBindingLabel:"".concat(va+1),"aria-label":vj(W),
"aria-keyshortcuts":La,"data-testid":qa,onChange:function(){A({elementType:qa,multiElement:null,selectedElementIds:{}});ug(h,qa);A({})}})}),R().createElement(Te,{className:"Shape ToolIcon_type_button__library",type:"button",icon:Qr,name:"editor-library",keyBindingLabel:"9","aria-keyshortcuts":"9",title:"".concat(vj(Jb("toolBar.library"))," — 9"),"aria-label":vj(Jb("toolBar.library")),onClick:function(){A({isLibraryOpen:!P})}}))},Pr=function(d){var h=d.renderAction;d=d.zoom;return R().createElement(Nk,
{gap:1},R().createElement(Mk,{gap:1,align:"center"},h("zoomIn"),h("zoomOut"),h("resetZoom"),R().createElement("div",{style:{marginInlineStart:4}},(100*d.value).toFixed(0),"%")))},Yq=function(d){var h=d.appState,m=d.setAppState;d=d.actionManager;return R().createElement("div",{style:{display:"flex"}},d.renderAction("changeViewBackgroundColor"),R().createElement("div",{style:{marginInlineStart:"0.25rem"}},R().createElement(yk,{value:h.appearance,onChange:function(A){m({appearance:A})}})))};g(3211);
const $q=function(d){var h=d.isCollaborating,m=d.collaboratorCount;d=d.onClick;return R().createElement(R().Fragment,null,R().createElement(Te,{className:zc("CollabButton",{"is-collaborating":h}),onClick:d,icon:cl,type:"button",title:Jb("labels.liveCollaboration"),"aria-label":Jb("labels.liveCollaboration"),showAriaLabel:Ae()},0<m&&R().createElement("div",{className:"CollabButton-collaborators"},m)))};g(3040);g(7428);var Rk=R().forwardRef(function(d,h){var m=d.children,A=d.padding,P=d.className;d=
d.style;return R().createElement("div",{className:zc("Island",P),style:lb({"--padding":A},d),ref:h},m)}),Rr=(g(205),function(d){var h=rp();return h?(0,ag.createPortal)(R().createElement("div",{className:zc("Modal",d.className),role:"dialog","aria-modal":"true",onKeyDown:function(m){"Escape"===m.key&&(m.nativeEvent.stopImmediatePropagation(),d.onCloseRequest())},"aria-labelledby":d.labelledBy},R().createElement("div",{className:"Modal__background",onClick:d.onCloseRequest}),R().createElement("div",
{className:"Modal__content",style:{"--max-width":"".concat(d.maxWidth,"px")}},d.children)),h):null}),rp=function(){var d=(0,Z.useState)(null),h=d[0],m=d[1];return(0,Z.useLayoutEffect)(function(){var A,P=!(null===(A=document.querySelector(".excalidraw"))||void 0===A||!A.classList.contains("Appearance_dark")),W=document.createElement("div");return W.classList.add("excalidraw","excalidraw-modal-container"),P&&(W.classList.add("Appearance_dark"),W.classList.add("Appearance_dark-background-none")),document.body.appendChild(W),
m(W),function(){document.body.removeChild(W)}},[]),h},x=function(d){var h=function(){var P=(0,Z.useState)(null),W=P[1];return[P[0],(0,Z.useCallback)(function(va){return W(va)},[])]}(),m=h[0];h=h[1];(0,Z.useEffect)(function(){if(m){var P=A(m);0<P.length&&!1!==d.autofocus&&(P[1]||P[0]).focus();var W=function(va){if("Tab"===va.key){var qa=A(m),Aa=document.activeElement,La=qa.findIndex(function(Ga){return Ga===Aa});0===La&&va.shiftKey?(qa[qa.length-1].focus(),va.preventDefault()):La!==qa.length-1||va.shiftKey||
(qa[0].focus(),va.preventDefault())}};return m.addEventListener("keydown",W),function(){return m.removeEventListener("keydown",W)}}},[m,d.autofocus]);var A=function(P){return(P=P.querySelectorAll("button, a, input, select, textarea, div[tabindex]"))?Array.from(P):[]};return R().createElement(Rr,{className:zc("Dialog",d.className),labelledBy:"dialog-title",maxWidth:d.small?550:800,onCloseRequest:d.onCloseRequest},R().createElement(Rk,{ref:h},R().createElement("h2",{id:"dialog-title",className:"Dialog__title"},
R().createElement("span",{className:"Dialog__titleContent"},d.title),R().createElement("button",{className:"Modal__close",onClick:d.onCloseRequest,"aria-label":Jb("buttons.close")},Ae()?Bi:ik)),R().createElement("div",{className:"Dialog__content"},d.children)))},L=function(d){var h=d.message,m=d.onClose,A=(0,Z.useState)(!!h);d=A[0];var P=A[1];A=R().useCallback(function(){P(!1);m&&m()},[m]);return R().createElement(R().Fragment,null,d&&R().createElement(x,{small:!0,onCloseRequest:A,title:Jb("errorDialog.title")},
R().createElement("div",null,h.split("\n").map(function(W){return R().createElement(R().Fragment,null,W,R().createElement("br",null))}))))},ca=(g(8623),[1,2,3]),Ea=ca.includes(devicePixelRatio)?devicePixelRatio:1,Xa="filter"in document.createElement("canvas").getContext("2d"),mb=function(){return R().createElement("div",null,R().createElement("h3",null,Jb("canvasError.cannotShowPreview")),R().createElement("p",null,R().createElement("span",null,Jb("canvasError.canvasTooBig"))),R().createElement("em",
null,"(",Jb("canvasError.canvasTooBigTip"),")"))},wb=function(d,h){(0,ag.unmountComponentAtNode)(h);h.innerHTML="";d instanceof HTMLCanvasElement?h.appendChild(d):(0,ag.render)(R().createElement(mb,null),h)},Lb=function(d){var h=d.elements,m=d.appState,A=d.exportPadding,P=void 0===A?10:A;A=d.actionManager;var W=d.onExportToPng,va=d.onExportToSvg,qa=d.onExportToClipboard,Aa=d.onExportToBackend,La=Yg(h,m);d=(0,Z.useState)(Ea);var Ga=d[0],gb=d[1];d=(0,Z.useState)(La);var ib=d[0],kb=d[1],Kb=(0,Z.useRef)(null),
Ib=m.exportBackground,mc=m.viewBackgroundColor,Sc=m.shouldAddWatermark,Yc=ib?We(h,m):h;return(0,Z.useEffect)(function(){kb(La)},[La]),(0,Z.useEffect)(function(){var kd=Kb.current;if(kd)try{var ke=km(Yc,m,{exportBackground:Ib,viewBackgroundColor:mc,exportPadding:P,scale:Ga,shouldAddWatermark:Sc});Am(ke).then(function(){wb(ke,kd)}).catch(function(ie){console.error(ie);wb(new en,kd)})}catch(ie){console.error(ie),wb(new en,kd)}},[m,Yc,Ib,P,mc,Ga,Sc]),R().createElement("div",{className:"ExportDialog"},
R().createElement("div",{className:"ExportDialog__preview",ref:Kb}),Xa&&A.renderAction("exportWithDarkMode"),R().createElement(Nk,{gap:2,align:"center"},R().createElement("div",{className:"ExportDialog__actions"},R().createElement(Mk,{gap:2},R().createElement(Te,{type:"button",label:"PNG",title:Jb("buttons.exportToPng"),"aria-label":Jb("buttons.exportToPng"),onClick:function(){return W(Yc,Ga)}}),R().createElement(Te,{type:"button",label:"SVG",title:Jb("buttons.exportToSvg"),"aria-label":Jb("buttons.exportToSvg"),
onClick:function(){return va(Yc,Ga)}}),ok&&R().createElement(Te,{type:"button",icon:bl,title:Jb("buttons.copyPngToClipboard"),"aria-label":Jb("buttons.copyPngToClipboard"),onClick:function(){return qa(Yc,Ga)}}),Aa&&R().createElement(Te,{type:"button",icon:gk,title:Jb("buttons.getShareableLink"),"aria-label":Jb("buttons.getShareableLink"),onClick:function(){return Aa(Yc)}})),R().createElement("div",{className:"ExportDialog__name"},A.renderAction("changeProjectName")),R().createElement(Mk,{gap:2},ca.map(function(kd){var ke=
function(De,qe,Re,md){De=Tn(De,Re);qe=$m(De,qe,Re).map(function(Fd){return Math.trunc(Fd*md)});return[qe[2],qe[3]]}(Yc,P,Sc,kd),ie=ke[0];ke=ke[1];ie="".concat(Jb("buttons.scale")," ").concat(kd,"x (").concat(ie,"x").concat(ke,")");return R().createElement(Te,{key:kd,size:"s",type:"radio",icon:"".concat(kd,"x"),name:"export-canvas-scale",title:ie,"aria-label":ie,id:"export-canvas-scale",checked:kd===Ga,onChange:function(){return gb(kd)}})}))),A.renderAction("changeExportBackground"),La&&R().createElement("div",
null,R().createElement("label",null,R().createElement("input",{type:"checkbox",checked:ib,onChange:function(kd){return kb(kd.currentTarget.checked)}})," ",Jb("labels.onlySelected"))),A.renderAction("changeExportEmbedScene"),A.renderAction("changeShouldAddWatermark")))},lc=function(d){var h=d.elements,m=d.appState,A=d.exportPadding;A=void 0===A?10:A;var P=d.actionManager,W=d.onExportToPng,va=d.onExportToSvg,qa=d.onExportToClipboard;d=d.onExportToBackend;var Aa=(0,Z.useState)(!1),La=Aa[0],Ga=Aa[1],
gb=(0,Z.useRef)(null);Aa=R().useCallback(function(){var ib;Ga(!1);null===(ib=gb.current)||void 0===ib||ib.focus()},[]);return R().createElement(R().Fragment,null,R().createElement(Te,{onClick:function(){Ga(!0)},icon:Ai,type:"button","aria-label":Jb("buttons.export"),showAriaLabel:Ae(),title:Jb("buttons.export"),ref:gb}),La&&R().createElement(x,{onCloseRequest:Aa,title:Jb("buttons.export")},R().createElement(Lb,{elements:h,appState:m,exportPadding:A,actionManager:P,onExportToPng:W,onExportToSvg:va,
onExportToClipboard:qa,onExportToBackend:d,onCloseRequest:Aa})))},Pc=(g(4193),function(d){var h=d.children,m=d.side;d=d.className;return R().createElement("div",{className:zc("FixedSideContainer","FixedSideContainer_side_".concat(m),d)},h)}),Zd=R().memo(function(d){d=d.appearance;return R().createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"40",height:"40",viewBox:"0 0 250 250",className:"github-corner rtl-mirror"},R().createElement("a",{href:"https://github.com/excalidraw/excalidraw",
target:"_blank",rel:"noopener noreferrer","aria-label":"GitHub repository"},R().createElement("path",{d:"M0 0l115 115h15l12 27 108 108V0z",fill:"light"===d?ne.MA[6]:ne.MA[8]}),R().createElement("path",{className:"octo-arm",d:"M128 109c-15-9-9-19-9-19 3-7 2-11 2-11-1-7 3-2 3-2 4 5 2 11 2 11-3 10 5 15 9 16",style:{transformOrigin:"130px 106px"},fill:"light"===d?ne.ix:ne.Sn}),R().createElement("path",{className:"octo-body",d:"M115 115s4 2 5 0l14-14c3-2 6-3 8-3-8-11-15-24 2-41 5-5 10-7 16-7 1-2 3-7 12-11 0 0 5 3 7 16 4 2 8 5 12 9s7 8 9 12c14 3 17 7 17 7-4 8-9 11-11 11 0 6-2 11-7 16-16 16-30 10-41 2 0 3-1 7-5 11l-12 11c-1 1 1 5 1 5z",
fill:"light"===d?ne.ix:ne.Sn})))}),pf=(g(9705),function(d){return(d=function(h){var m=h.appState,A=h.elements,P=m.elementType;h=m.isResizing;var W=m.isRotating,va=m.lastPointerDownWith,qa=null!==m.multiElement;if("arrow"===P||"line"===P)return Jb(qa?"hints.linearElementMulti":"hints.linearElement");if("draw"===P)return Jb("hints.freeDraw");if("text"===P)return Jb("hints.text");A=We(A,m);return h&&"mouse"===va&&1===A.length?(m=A[0],cg(m)&&2===m.points.length?Jb("hints.lockAngle"):Jb("hints.resize")):
W&&"mouse"===va?Jb("hints.rotate"):1===A.length&&cg(A[0])?m.editingLinearElement?m.editingLinearElement.activePointIndex?Jb("hints.lineEditor_pointSelected"):Jb("hints.lineEditor_nothingSelected"):Jb("hints.lineEditor_info"):null}({appState:d.appState,elements:d.elements}))?(d=Ed(d),R().createElement("div",{className:"HintViewer"},R().createElement("span",null,d))):null}),qd=(g(8465),g(8680),R().createElement("svg",{viewBox:"0 0 1792 1792"},R().createElement("path",{fill:"currentColor",d:"M1600 736v192q0 40-28 68t-68 28h-416v416q0 40-28 68t-68 28h-192q-40 0-68-28t-28-68v-416h-416q-40 0-68-28t-28-68v-192q0-40 28-68t68-28h416v-416q0-40 28-68t68-28h192q40 0 68 28t28 68v416h416q40 0 68 28t28 68z"}))),
ve=function(d){var h=d.elements,m=d.pendingElements,A=d.onRemoveFromLibrary;d=d.onClick;var P=(0,Z.useRef)(null);(0,Z.useEffect)(function(){var La=h||m;if(La){var Ga=Ih(La,{exportBackground:!1,viewBackgroundColor:ne.ix,shouldAddWatermark:!1});La=0;for(var gb=P.current.children;La<gb.length;La++){var ib=gb[La];"svg"===ib.tagName&&P.current.removeChild(ib)}P.current.appendChild(Ga);var kb=P.current;return function(){kb.removeChild(Ga)}}},[h,m]);var W=(0,Z.useState)(!1),va=W[0],qa=W[1];W=Ae();var Aa=
(va||W)&&m&&R().createElement("div",{className:"library-unit__adder"},qd);return R().createElement("div",{className:zc("library-unit",{"library-unit__active":h||m}),onMouseEnter:function(){return qa(!0)},onMouseLeave:function(){return qa(!1)}},R().createElement("div",{className:zc("library-unit__dragger",{"library-unit__pulse":!!m}),ref:P,draggable:!!h,onClick:h||m?d:void 0,onDragStart:function(La){qa(!1);La.dataTransfer.setData(Na.LO.excalidrawlib,JSON.stringify(h))}}),Aa,h&&(va||W)&&R().createElement("button",
{className:"library-unit__removeFromLibrary","aria-label":Jb("labels.removeFromLibrary"),onClick:A},ik))},qf=R().createElement("svg",{width:"1792",height:"1792",viewBox:"0 0 1792 1792",xmlns:"http://www.w3.org/2000/svg"},R().createElement("path",{d:"M640 768h512v-192q0-106-75-181t-181-75-181 75-75 181v192zm832 96v576q0 40-28 68t-68 28h-960q-40 0-68-28t-28-68v-576q0-40 28-68t68-28h32v-192q0-184 132-316t316-132 316 132 132 316v192h32q40 0 68 28t28 68z"})),af=R().createElement("svg",{width:"1792",height:"1792",
viewBox:"0 0 1792 1792",xmlns:"http://www.w3.org/2000/svg",className:"unlocked-icon rtl-mirror"},R().createElement("path",{d:"M1728 576v256q0 26-19 45t-45 19h-64q-26 0-45-19t-19-45v-256q0-106-75-181t-181-75-181 75-75 181v192h96q40 0 68 28t28 68v576q0 40-28 68t-68 28h-960q-40 0-68-28t-28-68v-576q0-40 28-68t68-28h672v-192q0-185 131.5-316.5t316.5-131.5 316.5 131.5 131.5 316.5z"})),Fc=function(d){return R().createElement("label",{className:zc("ToolIcon ToolIcon__lock ToolIcon_type_floating zen-mode-visibility",
"ToolIcon_size_".concat(d.size||"m"),{"zen-mode-visibility--hidden":d.zenModeEnabled}),title:"".concat(d.title," — Q")},R().createElement("input",{className:"ToolIcon_type_checkbox",type:"checkbox",name:d.name,id:d.id,onChange:d.onChange,checked:d.checked,"aria-label":d.title}),R().createElement("div",{className:"ToolIcon__icon"},d.checked?qf:af))},qc=function(d){var h=d.heading,m=d.children;d=Lk()(d,["heading","children"]);var A=R().createElement("h2",{className:"visually-hidden",id:"".concat(h,
"-title")},Jb("headings.".concat(h)));return R().createElement("section",xd()({},d,{"aria-labelledby":"".concat(h,"-title")}),"function"==typeof m?m(A):R().createElement(R().Fragment,null,A,m))},Ac=(g(3142),function(d){var h=d.children,m=d.className;d=d.mobile;return R().createElement("div",{className:zc("UserList",m,{UserList_mobile:d})},h)}),jd=function(d){var h=d.appState,m=d.elements,A=d.libraryMenu,P=d.actionManager,W=d.exportButton,va=d.setAppState,qa=d.onCollabButtonClick,Aa=d.onLockToggle,
La=d.canvas,Ga=d.isCollaborating,gb=d.renderCustomFooter;d=d.viewModeEnabled;return R().createElement(R().Fragment,null,!d&&R().createElement(Pc,{side:"top",className:"App-top-bar"},R().createElement(qc,{heading:"shapes"},function(ib){return R().createElement(Nk,{gap:4,align:"center"},R().createElement(Mk,{gap:1},R().createElement(Rk,{padding:1},ib,R().createElement(Mk,{gap:1},R().createElement(Vp,{canvas:La,elementType:h.elementType,setAppState:va,isLibraryOpen:h.isLibraryOpen}))),R().createElement(Fc,
{checked:h.elementLocked,onChange:Aa,title:Jb("toolBar.lock")})),A)}),R().createElement(pf,{appState:h,elements:m})),R().createElement("div",{className:"App-bottom-bar",style:{marginBottom:14,marginLeft:14,marginRight:14}},R().createElement(Rk,{padding:0},"canvas"===h.openMenu?R().createElement(qc,{className:"App-mobile-menu",heading:"canvasActions"},R().createElement("div",{className:"panelColumn"},R().createElement(Nk,{gap:4},d?R().createElement(R().Fragment,null,P.renderAction("saveScene"),P.renderAction("saveAsScene"),
W):R().createElement(R().Fragment,null,P.renderAction("loadScene"),P.renderAction("saveScene"),P.renderAction("saveAsScene"),W,P.renderAction("clearCanvas"),qa&&R().createElement($q,{isCollaborating:Ga,collaboratorCount:h.collaborators.size,onClick:qa}),R().createElement(Yq,{actionManager:P,appState:h,setAppState:va})),null==gb?void 0:gb(!0),0<h.collaborators.size&&R().createElement("fieldset",null,R().createElement("legend",null,Jb("labels.collaborators")),R().createElement(Ac,{mobile:!0},Array.from(h.collaborators).filter(function(ib){ib[0];
return 0!==Object.keys(ib[1]).length}).map(function(ib){var kb=ib[0];ib[1];return R().createElement(R().Fragment,{key:kb},P.renderAction("goToCollaborator",kb))})))))):"shape"===h.openMenu&&!d&&Uf(h,m)?R().createElement(qc,{className:"App-mobile-menu",heading:"selectedShapeActions"},R().createElement(Zq,{appState:h,elements:m,renderAction:P.renderAction,elementType:h.elementType})):null,R().createElement("footer",{className:"App-toolbar"},d?R().createElement("div",{className:"App-toolbar-content"},
P.renderAction("toggleCanvasMenu")):R().createElement("div",{className:"App-toolbar-content"},P.renderAction("toggleCanvasMenu"),P.renderAction("toggleEditMenu"),P.renderAction("undo"),P.renderAction("redo"),P.renderAction(h.multiElement?"finalize":"duplicateSelection"),P.renderAction("deleteSelectedElements")),h.scrolledOutside&&!h.openMenu&&R().createElement("button",{className:"scroll-back-to-content",onClick:function(){va(function(ib){for(var kb=1;kb<arguments.length;kb++){var Kb=null!=arguments[kb]?
arguments[kb]:{};kb%2?ge(Object(Kb),!0).forEach(function(Ib){Be()(ib,Ib,Kb[Ib])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ib,Object.getOwnPropertyDescriptors(Kb)):ge(Object(Kb)).forEach(function(Ib){Object.defineProperty(ib,Ib,Object.getOwnPropertyDescriptor(Kb,Ib))})}return ib}({},ji(m,h)))}},Jb("buttons.scrollBackToContent"))))))},od=(g(8416),function(d){var h=(0,Z.useRef)(null),m=(0,Z.useState)(null),A=m[0],P=m[1];return(0,Z.useLayoutEffect)(function(){if(d.spreadsheet){var W=
Rn(d.chartType,d.spreadsheet,0,0);P(W);var va=Ih(W,{exportBackground:!1,viewBackgroundColor:ne.ix,shouldAddWatermark:!1}),qa=h.current;return qa.appendChild(va),d.selected&&qa.parentNode.focus(),function(){qa.removeChild(va)}}},[d.spreadsheet,d.chartType,d.selected]),R().createElement("button",{className:"ChartPreview",onClick:function(){A&&d.onClick(d.chartType,A)}},R().createElement("div",{ref:h}))}),uf=function(d){var h=d.setAppState,m=d.appState,A=d.onClose,P=d.onInsertChart;d=R().useCallback(function(){A&&
A()},[A]);var W=function(va,qa){P(qa);dh("magic","chart",va);h({currentChartType:va,pasteDialog:{shown:!1,data:null}})};return R().createElement(x,{small:!0,onCloseRequest:d,title:Jb("labels.pasteCharts"),className:"PasteChartDialog",autofocus:!1},R().createElement("div",{className:"container"},R().createElement(od,{chartType:"bar",spreadsheet:m.pasteDialog.data,selected:"bar"===m.currentChartType,onClick:W}),R().createElement(od,{chartType:"line",spreadsheet:m.pasteDialog.data,selected:"line"===
m.currentChartType,onClick:W})))},le=(g(341),function(){return R().createElement("div",{className:"HelpDialog--header"},R().createElement("a",{className:"HelpDialog--btn",href:"https://github.com/excalidraw/excalidraw#documentation",target:"_blank",rel:"noopener noreferrer"},Jb("helpDialog.documentation")),R().createElement("a",{className:"HelpDialog--btn",href:"https://blog.excalidraw.com",target:"_blank",rel:"noopener noreferrer"},Jb("helpDialog.blog")),R().createElement("a",{className:"HelpDialog--btn",
href:"https://github.com/excalidraw/excalidraw/issues",target:"_blank",rel:"noopener noreferrer"},Jb("helpDialog.github")))}),vf=function(d){return R().createElement(R().Fragment,null,R().createElement("h3",null,d.title),d.children)},$f=function(d){return R().createElement("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"space-between"}},d.children)},Df=function(d){return R().createElement("div",{style:{width:"49%"}},d.children)},gm=function(d){return R().createElement("div",
{className:"HelpDialog--island"},R().createElement("h3",{className:"HelpDialog--island-title"},d.caption),d.children)},kf=function(d){return R().createElement("div",{className:"HelpDialog--shortcut"},R().createElement("div",{style:{display:"flex",margin:"0",padding:"4px 8px",alignItems:"center"}},R().createElement("div",{style:{lineHeight:1.4}},d.label),R().createElement("div",{style:{display:"flex",flex:"0 0 auto",justifyContent:"flex-end",marginInlineStart:"auto",minWidth:"30%"}},d.shortcuts.map(function(h,
m){return R().createElement(R().Fragment,{key:m},R().createElement(Tt,null,h),d.isOr&&m!==d.shortcuts.length-1&&Jb("helpDialog.or"))}))))};kf.defaultProps={isOr:!0};var Tt=function(d){return R().createElement("kbd",xd()({className:"HelpDialog--key"},d))},Ut=function(d){var h=d.onClose;d=R().useCallback(function(){h&&h()},[h]);return R().createElement(R().Fragment,null,R().createElement(x,{onCloseRequest:d,title:Jb("helpDialog.title"),className:"HelpDialog"},R().createElement(le,null),R().createElement(vf,
{title:Jb("helpDialog.shortcuts")},R().createElement($f,null,R().createElement(Df,null,R().createElement(gm,{caption:Jb("helpDialog.shapes")},R().createElement(kf,{label:Jb("toolBar.selection"),shortcuts:["V","1"]}),R().createElement(kf,{label:Jb("toolBar.rectangle"),shortcuts:["R","2"]}),R().createElement(kf,{label:Jb("toolBar.diamond"),shortcuts:["D","3"]}),R().createElement(kf,{label:Jb("toolBar.ellipse"),shortcuts:["E","4"]}),R().createElement(kf,{label:Jb("toolBar.arrow"),shortcuts:["A","5"]}),
R().createElement(kf,{label:Jb("toolBar.line"),shortcuts:["P","6"]}),R().createElement(kf,{label:Jb("toolBar.draw"),shortcuts:["Shift+P","7"]}),R().createElement(kf,{label:Jb("toolBar.text"),shortcuts:["T","8"]}),R().createElement(kf,{label:Jb("helpDialog.textNewLine"),shortcuts:[Ed("Enter"),Ed("Shift+Enter")]}),R().createElement(kf,{label:Jb("helpDialog.textFinish"),shortcuts:[Ed("Esc"),Ed("CtrlOrCmd+Enter")]}),R().createElement(kf,{label:Jb("helpDialog.curvedArrow"),shortcuts:["A",Jb("helpDialog.click"),
Jb("helpDialog.click"),Jb("helpDialog.click")],isOr:!1}),R().createElement(kf,{label:Jb("helpDialog.curvedLine"),shortcuts:["L",Jb("helpDialog.click"),Jb("helpDialog.click"),Jb("helpDialog.click")],isOr:!1}),R().createElement(kf,{label:Jb("toolBar.lock"),shortcuts:["Q"]}),R().createElement(kf,{label:Jb("helpDialog.preventBinding"),shortcuts:[Ed("CtrlOrCmd")]})),R().createElement(gm,{caption:Jb("helpDialog.view")},R().createElement(kf,{label:Jb("buttons.zoomIn"),shortcuts:[Ed("CtrlOrCmd++")]}),R().createElement(kf,
{label:Jb("buttons.zoomOut"),shortcuts:[Ed("CtrlOrCmd+-")]}),R().createElement(kf,{label:Jb("buttons.resetZoom"),shortcuts:[Ed("CtrlOrCmd+0")]}),R().createElement(kf,{label:Jb("helpDialog.zoomToFit"),shortcuts:["Shift+1"]}),R().createElement(kf,{label:Jb("helpDialog.zoomToSelection"),shortcuts:["Shift+2"]}),R().createElement(kf,{label:Jb("buttons.fullScreen"),shortcuts:["F"]}),R().createElement(kf,{label:Jb("buttons.zenMode"),shortcuts:[Ed("Alt+Z")]}),R().createElement(kf,{label:Jb("labels.showGrid"),
shortcuts:[Ed("CtrlOrCmd+'")]}),R().createElement(kf,{label:Jb("labels.viewMode"),shortcuts:[Ed("Alt+R")]}))),R().createElement(Df,null,R().createElement(gm,{caption:Jb("helpDialog.editor")},R().createElement(kf,{label:Jb("labels.selectAll"),shortcuts:[Ed("CtrlOrCmd+A")]}),R().createElement(kf,{label:Jb("labels.multiSelect"),shortcuts:[Ed("Shift+".concat(Jb("helpDialog.click")))]}),R().createElement(kf,{label:Jb("labels.moveCanvas"),shortcuts:[Ed("Space+".concat(Jb("helpDialog.drag"))),Ed("Wheel+".concat(Jb("helpDialog.drag")))],
isOr:!0}),R().createElement(kf,{label:Jb("labels.cut"),shortcuts:[Ed("CtrlOrCmd+X")]}),R().createElement(kf,{label:Jb("labels.copy"),shortcuts:[Ed("CtrlOrCmd+C")]}),R().createElement(kf,{label:Jb("labels.paste"),shortcuts:[Ed("CtrlOrCmd+V")]}),R().createElement(kf,{label:Jb("labels.copyAsPng"),shortcuts:[Ed("Shift+Alt+C")]}),R().createElement(kf,{label:Jb("labels.copyStyles"),shortcuts:[Ed("CtrlOrCmd+Alt+C")]}),R().createElement(kf,{label:Jb("labels.pasteStyles"),shortcuts:[Ed("CtrlOrCmd+Alt+V")]}),
R().createElement(kf,{label:Jb("labels.delete"),shortcuts:[Ed("Del")]}),R().createElement(kf,{label:Jb("labels.sendToBack"),shortcuts:[Ed(ui?"CtrlOrCmd+Alt+[":"CtrlOrCmd+Shift+[")]}),R().createElement(kf,{label:Jb("labels.bringToFront"),shortcuts:[Ed(ui?"CtrlOrCmd+Alt+]":"CtrlOrCmd+Shift+]")]}),R().createElement(kf,{label:Jb("labels.sendBackward"),shortcuts:[Ed("CtrlOrCmd+[")]}),R().createElement(kf,{label:Jb("labels.bringForward"),shortcuts:[Ed("CtrlOrCmd+]")]}),R().createElement(kf,{label:Jb("labels.alignTop"),
shortcuts:[Ed("CtrlOrCmd+Shift+Up")]}),R().createElement(kf,{label:Jb("labels.alignBottom"),shortcuts:[Ed("CtrlOrCmd+Shift+Down")]}),R().createElement(kf,{label:Jb("labels.alignLeft"),shortcuts:[Ed("CtrlOrCmd+Shift+Left")]}),R().createElement(kf,{label:Jb("labels.alignRight"),shortcuts:[Ed("CtrlOrCmd+Shift+Right")]}),R().createElement(kf,{label:Jb("labels.duplicateSelection"),shortcuts:[Ed("CtrlOrCmd+D"),Ed("Alt+".concat(Jb("helpDialog.drag")))]}),R().createElement(kf,{label:Jb("buttons.undo"),shortcuts:[Ed("CtrlOrCmd+Z")]}),
R().createElement(kf,{label:Jb("buttons.redo"),shortcuts:ai?[Ed("CtrlOrCmd+Y"),Ed("CtrlOrCmd+Shift+Z")]:[Ed("CtrlOrCmd+Shift+Z")]}),R().createElement(kf,{label:Jb("labels.group"),shortcuts:[Ed("CtrlOrCmd+G")]}),R().createElement(kf,{label:Jb("labels.ungroup"),shortcuts:[Ed("CtrlOrCmd+Shift+G")]})))))))},Xr=function(d,h){function m(Aa){return function(La){return function(Ga){if(A)throw new TypeError("Generator is already executing.");for(;qa;)try{if(A=1,P&&(W=2&Ga[0]?P.return:Ga[0]?P.throw||((W=P.return)&&
W.call(P),0):P.next)&&!(W=W.call(P,Ga[1])).done)return W;switch(P=0,W&&(Ga=[2&Ga[0],W.value]),Ga[0]){case 0:case 1:W=Ga;break;case 4:return qa.label++,{value:Ga[1],done:!1};case 5:qa.label++;P=Ga[1];Ga=[0];continue;case 7:Ga=qa.ops.pop();qa.trys.pop();continue;default:if(!(W=qa.trys,(W=0<W.length&&W[W.length-1])||6!==Ga[0]&&2!==Ga[0])){qa=0;continue}if(3===Ga[0]&&(!W||Ga[1]>W[0]&&Ga[1]<W[3]))qa.label=Ga[1];else if(6===Ga[0]&&qa.label<W[1])qa.label=W[1],W=Ga;else if(W&&qa.label<W[2])qa.label=W[2],
qa.ops.push(Ga);else{W[2]&&qa.ops.pop();qa.trys.pop();continue}}Ga=h.call(d,qa)}catch(gb){Ga=[6,gb],P=0}finally{A=W=0}if(5&Ga[0])throw Ga[1];return{value:Ga[0]?Ga[1]:void 0,done:!0}}([Aa,La])}}var A,P,W,va,qa={label:0,sent:function(){if(1&W[0])throw W[1];return W[1]},trys:[],ops:[]};return va={next:m(0),throw:m(1),return:m(2)},"function"==typeof Symbol&&(va[Symbol.iterator]=function(){return this}),va},Js=function(d,h){for(var m=0,A=h.length,P=d.length;m<A;m++,P++)d[P]=h[m];return d},Vt=function(d){var h=
d.library,m=d.onRemoveFromLibrary,A=d.onAddToLibrary,P=d.onInsertShape,W=d.pendingElements,va=d.setAppState,qa=d.setLibraryItems;d=Ae()?4:6;var Aa=Math.max(1,Math.ceil((h.length+(0<W.length?1:0))/d)),La=[],Ga=!1;La.push(R().createElement("div",{className:"layer-ui__library-header"},R().createElement(Te,{key:"import",type:"button",title:Jb("buttons.load"),"aria-label":Jb("buttons.load"),icon:hk,onClick:function(){lp().then(function(){va({isLibraryOpen:!1})}).catch(Eh).catch(function(mc){va({errorMessage:mc.message})})}}),
R().createElement(Te,{key:"export",type:"button",title:Jb("buttons.export"),"aria-label":Jb("buttons.export"),icon:Ai,onClick:function(){em().catch(Eh).catch(function(mc){va({errorMessage:mc.message})})}}),R().createElement(Te,{key:"reset",type:"button",title:Jb("buttons.resetLibrary"),"aria-label":Jb("buttons.resetLibrary"),icon:Ki,onClick:function(){window.confirm(Jb("alerts.resetLibrary"))&&(ih.resetLibrary(),qa([]))}}),R().createElement("a",{href:"https://libraries.excalidraw.com",target:"_excalidraw_libraries"},
Jb("labels.libraries"))));for(var gb=0;gb<Aa;gb++){for(var ib=d*gb,kb=[],Kb=0;Kb<d;Kb++){var Ib=0<W.length&&!Ga&&ib+Kb>=h.length;Ga=Ga||Ib;kb.push(R().createElement(Nk,{key:Kb},R().createElement(ve,{elements:h[ib+Kb],pendingElements:Ib?W:void 0,onRemoveFromLibrary:m.bind(null,ib+Kb),onClick:Ib?A.bind(null,W):P.bind(null,h[ib+Kb])})))}La.push(R().createElement(Mk,{align:"center",gap:1,key:gb},kb))}return R().createElement(Nk,{align:"start",gap:1,className:"layer-ui__library-items"},La)},Wt=function(d){var h=
d.onClickOutside,m=d.onInsertShape,A=d.pendingElements,P=d.onAddToLibrary;d=d.setAppState;var W=(0,Z.useRef)(null);!function(kb,Kb){(0,Z.useEffect)(function(){var Ib=function(mc){kb.current&&(mc.target instanceof Element&&(kb.current.contains(mc.target)||!document.body.contains(mc.target))||Kb(mc))};return document.addEventListener("pointerdown",Ib,!1),function(){document.removeEventListener("pointerdown",Ib)}},[kb,Kb])}(W,function(kb){kb.target.closest(".ToolIcon_type_button__library")||h(kb)});
var va=(0,Z.useState)([]),qa=va[0],Aa=va[1],La=(0,Z.useState)("preloading");va=La[0];var Ga=La[1],gb=(0,Z.useRef)(null);(0,Z.useEffect)(function(){return Promise.race([new Promise(function(kb){gb.current=setTimeout(function(){kb("loading")},100)}),ih.loadLibrary().then(function(kb){Aa(kb);Ga("ready")})]).then(function(kb){"loading"===kb&&Ga("loading")}),function(){clearTimeout(gb.current)}},[]);La=(0,Z.useCallback)(function(){var kb=tb()(function(Kb){var Ib,mc;return Xr(this,function(Sc){switch(Sc.label){case 0:return[4,
ih.loadLibrary()];case 1:return Ib=Sc.sent(),mc=Ib.filter(function(Yc,kd){return kd!==Kb}),ih.saveLibrary(mc),Aa(mc),[2]}})});return function(Kb){return kb.apply(this,arguments)}}(),[]);var ib=(0,Z.useCallback)(function(){var kb=tb()(function(Kb){var Ib,mc;return Xr(this,function(Sc){switch(Sc.label){case 0:return[4,ih.loadLibrary()];case 1:return Ib=Sc.sent(),mc=Js(Js([],Ib),[Kb]),P(),ih.saveLibrary(mc),Aa(mc),[2]}})});return function(Kb){return kb.apply(this,arguments)}}(),[P]);return"preloading"===
va?null:R().createElement(Rk,{padding:1,ref:W,className:"layer-ui__library"},"loading"===va?R().createElement("div",{className:"layer-ui__library-message"},Jb("labels.libraryLoadingMessage")):R().createElement(Vt,{library:qa,onRemoveFromLibrary:La,onAddToLibrary:ib,onInsertShape:m,pendingElements:A,setAppState:d,setLibraryItems:Aa}))};const Xt=R().memo(function(d){var h,m=d.actionManager,A=d.appState,P=d.setAppState,W=d.canvas,va=d.elements,qa=d.onCollabButtonClick,Aa=d.onLockToggle,La=d.onInsertElements,
Ga=d.zenModeEnabled,gb=d.showExitZenModeBtn,ib=d.toggleZenMode,kb=d.isCollaborating,Kb=d.onExportToBackend,Ib=d.renderCustomFooter;d=d.viewModeEnabled;var mc=Ae(),Sc=function(){var ie=function(De){return function(){var qe=tb()(function(Re,md){return Xr(this,function(Fd){switch(Fd.label){case 0:return W?[4,kc(De,Re,A,W,{exportBackground:A.exportBackground,name:A.name,viewBackgroundColor:A.viewBackgroundColor,scale:md,shouldAddWatermark:A.shouldAddWatermark}).catch(Eh).catch(function(Ud){console.error(Ud);
P({errorMessage:Ud.message})})]:[3,2];case 1:Fd.sent(),Fd.label=2;case 2:return[2]}})});return function(Re,md){return qe.apply(this,arguments)}}()};return R().createElement(lc,{elements:va,appState:A,actionManager:m,onExportToPng:ie("png"),onExportToSvg:ie("svg"),onExportToClipboard:ie("clipboard"),onExportToBackend:Kb?function(De){Kb&&Kb(De,A,W)}:void 0})},Yc=(0,Z.useCallback)(function(ie){P({isLibraryOpen:!1})},[P]),kd=(0,Z.useCallback)(function(){P({selectedElementIds:{},selectedGroupIds:{}})},
[P]),ke=A.isLibraryOpen?R().createElement(Wt,{pendingElements:We(va,A),onClickOutside:Yc,onInsertShape:La,onAddToLibrary:kd,setAppState:P}):null;La=R().createElement(R().Fragment,null,A.isLoading&&R().createElement(Vf,null),A.errorMessage&&R().createElement(L,{message:A.errorMessage,onClose:function(){return P({errorMessage:null})}}),A.showHelpDialog&&R().createElement(Ut,{onClose:function(){return P({showHelpDialog:!1})}}),A.pasteDialog.shown&&R().createElement(uf,{setAppState:P,appState:A,onInsertChart:La,
onClose:function(){return P({pasteDialog:{shown:!1,data:null}})}}));return mc?R().createElement(R().Fragment,null,La,R().createElement(jd,{appState:A,elements:va,actionManager:m,libraryMenu:ke,exportButton:Sc(),setAppState:P,onCollabButtonClick:qa,onLockToggle:Aa,canvas:W,isCollaborating:kb,renderCustomFooter:Ib,viewModeEnabled:d})):R().createElement("div",{className:zc("layer-ui__wrapper",{"disable-pointerEvents":A.draggingElement||A.resizingElement||A.editingElement&&!og(A.editingElement)})},La,
(h=Uf(A,va),R().createElement(Pc,{side:"top"},R().createElement("div",{className:"App-menu App-menu_top"},R().createElement(Nk,{gap:4,className:zc({"disable-pointerEvents":Ga})},d?R().createElement(qc,{heading:"canvasActions",className:zc("zen-mode-transition",{"transition-left":Ga})},R().createElement(Rk,{padding:2,style:{zIndex:1}},R().createElement(Nk,{gap:4},R().createElement(Mk,{gap:1,justifyContent:"space-between"},m.renderAction("saveScene"),m.renderAction("saveAsScene"),Sc())))):R().createElement(qc,
{heading:"canvasActions",className:zc("zen-mode-transition",{"transition-left":Ga})},R().createElement(Rk,{padding:2,style:{zIndex:1}},R().createElement(Nk,{gap:4},R().createElement(Mk,{gap:1,justifyContent:"space-between"},m.renderAction("loadScene"),m.renderAction("saveScene"),m.renderAction("saveAsScene"),Sc(),m.renderAction("clearCanvas"),qa&&R().createElement($q,{isCollaborating:kb,collaboratorCount:A.collaborators.size,onClick:qa})),R().createElement(Yq,{actionManager:m,appState:A,setAppState:P})))),
h&&R().createElement(qc,{heading:"selectedShapeActions",className:zc("zen-mode-transition",{"transition-left":Ga})},R().createElement(Rk,{className:Na.$C.SHAPE_ACTIONS_MENU,padding:2,style:{maxHeight:"".concat(A.height-200,"px")}},R().createElement(Zq,{appState:A,elements:va,renderAction:m.renderAction,elementType:A.elementType})))),!d&&R().createElement(qc,{heading:"shapes"},function(ie){return R().createElement(Nk,{gap:4,align:"start"},R().createElement(Mk,{gap:1},R().createElement(Rk,{padding:1,
className:zc({"zen-mode":Ga})},R().createElement(pf,{appState:A,elements:va}),ie,R().createElement(Mk,{gap:1},R().createElement(Vp,{canvas:W,elementType:A.elementType,setAppState:P,isLibraryOpen:A.isLibraryOpen}))),R().createElement(Fc,{zenModeEnabled:Ga,checked:A.elementLocked,onChange:Aa,title:Jb("toolBar.lock")})),ke)}),R().createElement(Ac,{className:zc("zen-mode-transition",{"transition-right":Ga})},0<A.collaborators.size&&Array.from(A.collaborators).filter(function(ie){ie[0];return 0!==Object.keys(ie[1]).length}).map(function(ie){var De=
ie[0];ie=ie[1];return R().createElement(Ij,{label:ie.username||"Unknown user",key:De},m.renderAction("goToCollaborator",De))}))))),R().createElement("div",{className:zc("App-menu App-menu_bottom zen-mode-transition",{"App-menu_bottom--transition-left":Ga})},R().createElement(Nk,{gap:2},R().createElement(qc,{heading:"canvasActions"},R().createElement(Rk,{padding:1},R().createElement(Pr,{renderAction:m.renderAction,zoom:A.zoom})),R().createElement("a",{className:zc("encrypted-icon tooltip zen-mode-visibility",
{"zen-mode-visibility--hidden":Ga}),href:"https://blog.excalidraw.com/end-to-end-encryption/",target:"_blank",rel:"noopener noreferrer"},R().createElement(Ij,{label:Jb("encrypted.tooltip"),position:"above",long:!0},Ah))))),R().createElement("aside",{className:zc("layer-ui__wrapper__github-corner zen-mode-transition",{"transition-right":Ga})},R().createElement(Zd,{appearance:A.appearance})),R().createElement("footer",{role:"contentinfo",className:"layer-ui__wrapper__footer"},R().createElement("div",
{className:zc("zen-mode-transition",{"transition-right disable-pointerEvents":Ga})},null==Ib?void 0:Ib(!1),m.renderAction("toggleShortcuts")),R().createElement("button",{className:zc("disable-zen-mode",{"disable-zen-mode--visible":gb}),onClick:ib},Jb("buttons.exitZenMode"))),A.scrolledOutside&&R().createElement("button",{className:"scroll-back-to-content",onClick:function(){P(function(ie){for(var De=1;De<arguments.length;De++){var qe=null!=arguments[De]?arguments[De]:{};De%2?Oe(Object(qe),!0).forEach(function(Re){Be()(ie,
Re,qe[Re])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ie,Object.getOwnPropertyDescriptors(qe)):Oe(Object(qe)).forEach(function(Re){Object.defineProperty(ie,Re,Object.getOwnPropertyDescriptor(qe,Re))})}return ie}({},ji(va,A)))}},Jb("buttons.scrollBackToContent")))},function(d,h){var m=function(W){W.suggestedBindings;W.startBoundElement;return Lk()(W,["suggestedBindings","startBoundElement"])},A=m(d.appState),P=m(h.appState);m=Object.keys(A);return d.renderCustomFooter===h.renderCustomFooter&&
d.langCode===h.langCode&&d.elements===h.elements&&m.every(function(W){return A[W]===P[W]})});var Ks=function(){try{var d=localStorage.getItem("excalidraw");return d?JSON.stringify(d).length:0}catch(h){return console.error(h),0}},Yt=(g(7287),function(d,h){function m(Aa){return function(La){return function(Ga){if(A)throw new TypeError("Generator is already executing.");for(;qa;)try{if(A=1,P&&(W=2&Ga[0]?P.return:Ga[0]?P.throw||((W=P.return)&&W.call(P),0):P.next)&&!(W=W.call(P,Ga[1])).done)return W;switch(P=
0,W&&(Ga=[2&Ga[0],W.value]),Ga[0]){case 0:case 1:W=Ga;break;case 4:return qa.label++,{value:Ga[1],done:!1};case 5:qa.label++;P=Ga[1];Ga=[0];continue;case 7:Ga=qa.ops.pop();qa.trys.pop();continue;default:if(!(W=qa.trys,(W=0<W.length&&W[W.length-1])||6!==Ga[0]&&2!==Ga[0])){qa=0;continue}if(3===Ga[0]&&(!W||Ga[1]>W[0]&&Ga[1]<W[3]))qa.label=Ga[1];else if(6===Ga[0]&&qa.label<W[1])qa.label=W[1],W=Ga;else if(W&&qa.label<W[2])qa.label=W[2],qa.ops.push(Ga);else{W[2]&&qa.ops.pop();qa.trys.pop();continue}}Ga=
h.call(d,qa)}catch(gb){Ga=[6,gb],P=0}finally{A=W=0}if(5&Ga[0])throw Ga[1];return{value:Ga[0]?Ga[1]:void 0,done:!0}}([Aa,La])}}var A,P,W,va,qa={label:0,sent:function(){if(1&W[0])throw W[1];return W[1]},trys:[],ops:[]};return va={next:m(0),throw:m(1),return:m(2)},"function"==typeof Symbol&&(va[Symbol.iterator]=function(){return this}),va}),Ls=bj(function(d){var h=Ks();try{var m=localStorage.getItem("excalidraw-state"),A=localStorage.getItem("excalidraw-collab"),P=localStorage.getItem(Na.I.LOCAL_STORAGE_LIBRARY);
var W=(m?JSON.stringify(m).length:0)+(A?JSON.stringify(A).length:0)+(P?JSON.stringify(P).length:0)+Ks()}catch(va){W=(console.error(va),0)}d({scene:h,total:W})},500),Zt=function(d){var h=Ae(),m=(0,Z.useState)({scene:0,total:0}),A=m[0],P=m[1];(0,Z.useEffect)(function(){Ls(function(La){P(La)})});(0,Z.useEffect)(function(){return function(){return Ls.cancel()}},[]);m=pg(d.elements);var W=Bj(d.elements,d.appState),va=pg(W);if(h&&d.appState.openMenu)return null;var qa,Aa;h=ci();return h!==Na.eQ?(Aa=h.slice(0,
16).replace("T"," "),qa=h.slice(21)):Aa=Jb("stats.versionNotAvailable"),R().createElement("div",{className:"Stats"},R().createElement(Rk,{padding:2},R().createElement("div",{className:"close",onClick:d.onClose},ik),R().createElement("h3",null,Jb("stats.title")),R().createElement("table",null,R().createElement("tbody",null,R().createElement("tr",null,R().createElement("th",{colSpan:2},Jb("stats.scene"))),R().createElement("tr",null,R().createElement("td",null,Jb("stats.elements")),R().createElement("td",
null,d.elements.length)),R().createElement("tr",null,R().createElement("td",null,Jb("stats.width")),R().createElement("td",null,Math.round(m[2])-Math.round(m[0]))),R().createElement("tr",null,R().createElement("td",null,Jb("stats.height")),R().createElement("td",null,Math.round(m[3])-Math.round(m[1]))),R().createElement("tr",null,R().createElement("th",{colSpan:2},Jb("stats.storage"))),R().createElement("tr",null,R().createElement("td",null,Jb("stats.scene")),R().createElement("td",null,Fh(A.scene,
1))),R().createElement("tr",null,R().createElement("td",null,Jb("stats.total")),R().createElement("td",null,Fh(A.total,1))),1===W.length&&R().createElement("tr",null,R().createElement("th",{colSpan:2},Jb("stats.element"))),1<W.length&&R().createElement(R().Fragment,null,R().createElement("tr",null,R().createElement("th",{colSpan:2},Jb("stats.selected"))),R().createElement("tr",null,R().createElement("td",null,Jb("stats.elements")),R().createElement("td",null,W.length))),0<W.length&&R().createElement(R().Fragment,
null,R().createElement("tr",null,R().createElement("td",null,"x"),R().createElement("td",null,Math.round(1===W.length?W[0].x:va[0]))),R().createElement("tr",null,R().createElement("td",null,"y"),R().createElement("td",null,Math.round(1===W.length?W[0].y:va[1]))),R().createElement("tr",null,R().createElement("td",null,Jb("stats.width")),R().createElement("td",null,Math.round(1===W.length?W[0].width:va[2]-va[0]))),R().createElement("tr",null,R().createElement("td",null,Jb("stats.height")),R().createElement("td",
null,Math.round(1===W.length?W[0].height:va[3]-va[1])))),1===W.length&&R().createElement("tr",null,R().createElement("td",null,Jb("stats.angle")),R().createElement("td",null,"".concat(Math.round(180*W[0].angle/Math.PI),"°"))),R().createElement("tr",null,R().createElement("th",{colSpan:2},Jb("stats.version"))),R().createElement("tr",null,R().createElement("td",{colSpan:2,style:{textAlign:"center",cursor:"pointer"},onClick:tb()(function(){return Yt(this,function(La){switch(La.label){case 0:return La.trys.push([0,
2,,3]),[4,xb(ci())];case 1:return La.sent(),d.setAppState({toastMessage:Jb("toast.copyToClipboard")}),[3,3];case 2:return La.sent(),[3,3];case 3:return[2]}})}),title:Jb("stats.versionCopy")},Aa,R().createElement("br",null),qa))))))},St=(g(5849),function(d){var h=d.message,m=d.clearToast,A=(0,Z.useRef)(0),P=(0,Z.useCallback)(function(){return A.current=window.setTimeout(function(){return m()},Na.Lg)},[m]);return(0,Z.useEffect)(function(){return P(),function(){return clearTimeout(A.current)}},[P,h]),
R().createElement("div",{className:"Toast",onMouseEnter:function(){return clearTimeout(null==A?void 0:A.current)},onMouseLeave:P},R().createElement("p",{className:"Toast__message"},h))}),Is=Wd({name:"viewMode",perform:function(d,h){return dh("view","mode","view"),{appState:cc(cc({},h),{},{viewModeEnabled:!this.checked(h),selectedElementIds:{}}),commitToHistory:!1}},checked:function(d){return d.viewModeEnabled},contextItemLabel:"labels.viewMode",keyTest:function(d){return!d[xe]&&d.altKey&&"KeyR"===
d.code}}),Rt=function(){var d=function(h,m){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,P){A.__proto__=P}||function(A,P){for(var W in P)Object.prototype.hasOwnProperty.call(P,W)&&(A[W]=P[W])})(h,m)};return function(h,m){function A(){this.constructor=h}if("function"!=typeof m&&null!==m)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");d(h,m);h.prototype=null===m?Object.create(m):(A.prototype=m.prototype,new A)}}(),Do=function(d,h){function m(Aa){return function(La){return function(Ga){if(A)throw new TypeError("Generator is already executing.");
for(;qa;)try{if(A=1,P&&(W=2&Ga[0]?P.return:Ga[0]?P.throw||((W=P.return)&&W.call(P),0):P.next)&&!(W=W.call(P,Ga[1])).done)return W;switch(P=0,W&&(Ga=[2&Ga[0],W.value]),Ga[0]){case 0:case 1:W=Ga;break;case 4:return qa.label++,{value:Ga[1],done:!1};case 5:qa.label++;P=Ga[1];Ga=[0];continue;case 7:Ga=qa.ops.pop();qa.trys.pop();continue;default:if(!(W=qa.trys,(W=0<W.length&&W[W.length-1])||6!==Ga[0]&&2!==Ga[0])){qa=0;continue}if(3===Ga[0]&&(!W||Ga[1]>W[0]&&Ga[1]<W[3]))qa.label=Ga[1];else if(6===Ga[0]&&
qa.label<W[1])qa.label=W[1],W=Ga;else if(W&&qa.label<W[2])qa.label=W[2],qa.ops.push(Ga);else{W[2]&&qa.ops.pop();qa.trys.pop();continue}}Ga=h.call(d,qa)}catch(gb){Ga=[6,gb],P=0}finally{A=W=0}if(5&Ga[0])throw Ga[1];return{value:Ga[0]?Ga[1]:void 0,done:!0}}([Aa,La])}}var A,P,W,va,qa={label:0,sent:function(){if(1&W[0])throw W[1];return W[1]},trys:[],ops:[]};return va={next:m(0),throw:m(1),return:m(2)},"function"==typeof Symbol&&(va[Symbol.iterator]=function(){return this}),va},Wg=function(d,h){for(var m=
0,A=h.length,P=d.length;m<A;m++,P++)d[P]=h[m];return d},ak=new Zp,bq=!1,Vr=0,tp=0,up=0,Eo=!1,aq=!1,Ur=!1,Wr={horizontal:null,vertical:null},ho=0,$p=!1,$n=null,jl=new Map,vp=null,br=null,sp=null,Tr=function(d){function h(m){var A=this;var P=A=d.call(this,m)||this;Pt.call(A);var W,va,qa,Aa=kg(),La=m.width,Ga=void 0===La?window.innerWidth:La;La=m.height;var gb=void 0===La?window.innerHeight:La,ib=m.offsetLeft,kb=m.offsetTop;La=m.excalidrawRef;var Kb=m.viewModeEnabled;Kb=void 0!==Kb&&Kb;var Ib=m.zenModeEnabled;
Ib=void 0!==Ib&&Ib;m=m.gridModeEnabled;m=void 0!==m&&m;if(A.state=Sa(Sa(Sa({},Aa),{},{isLoading:!0,width:Ga,height:gb},A.getCanvasOffsets({offsetLeft:ib,offsetTop:kb})),{},{viewModeEnabled:Kb,zenModeEnabled:Ib,gridSize:m?Na.k:null}),La){var mc;Aa="current"in La&&(null===(mc=La.current)||void 0===mc?void 0:mc.readyPromise)||((qa=new Promise(function(Sc,Yc){W=Sc;va=Yc})).resolve=W,qa.reject=va,qa);qa={ready:!0,readyPromise:Aa,updateScene:A.updateScene,resetScene:A.resetScene,getSceneElementsIncludingDeleted:A.getSceneElementsIncludingDeleted,
history:{clear:A.resetHistory},setScrollToCenter:A.setScrollToCenter,getSceneElements:A.getSceneElements,getAppState:function(){return P.state}};"function"==typeof La?La(qa):La.current=qa;Aa.resolve(qa)}return A.scene=new ch,A.actionManager=new jm(A.syncActionResult,function(){return P.state},function(){return P.scene.getElementsIncludingDeleted()},A),A.actionManager.registerAll(Pk),A.actionManager.registerAction({name:"undo",perform:function(Sc,Yc){return op(Sc,Yc,function(){return ak.undoOnce()})},
keyTest:function(Sc){return Sc[xe]&&"z"===Sc.key.toLowerCase()&&!Sc.shiftKey},PanelComponent:function(Sc){Sc=Sc.updateData;return R().createElement(Te,{type:"button",icon:Qf,"aria-label":Jb("buttons.undo"),onClick:Sc})},commitToHistory:function(){return!1}}),A.actionManager.registerAction(function(Sc){return{name:"redo",perform:function(Yc,kd){return op(Yc,kd,function(){return Sc.redoOnce()})},keyTest:function(Yc){return Yc[xe]&&Yc.shiftKey&&"z"===Yc.key.toLowerCase()||ai&&Yc.ctrlKey&&!Yc.shiftKey&&
"y"===Yc.key},PanelComponent:function(Yc){Yc=Yc.updateData;return R().createElement(Te,{type:"button",icon:hg,"aria-label":Jb("buttons.redo"),onClick:Yc})},commitToHistory:function(){return!1}}}(ak)),A}return Rt(h,d),h.prototype.renderCanvas=function(){var m=window.devicePixelRatio,A=this.state,P=A.width,W=A.height,va=P*m;m*=W;return A.viewModeEnabled?R().createElement("canvas",{id:"canvas",style:{width:P,height:W,cursor:"grabbing"},width:va,height:m,ref:this.handleCanvasRef,onContextMenu:this.handleCanvasContextMenu,
onPointerMove:this.handleCanvasPointerMove,onPointerUp:this.removePointer,onPointerCancel:this.removePointer,onTouchMove:this.handleTouchMove,onPointerDown:this.handleCanvasPointerDown},Jb("labels.drawingCanvas")):R().createElement("canvas",{id:"canvas",style:{width:P,height:W},width:va,height:m,ref:this.handleCanvasRef,onContextMenu:this.handleCanvasContextMenu,onPointerDown:this.handleCanvasPointerDown,onDoubleClick:this.handleCanvasDoubleClick,onPointerMove:this.handleCanvasPointerMove,onPointerUp:this.removePointer,
onPointerCancel:this.removePointer,onTouchMove:this.handleTouchMove,onDrop:this.handleCanvasOnDrop},Jb("labels.drawingCanvas"))},h.prototype.render=function(){var m,A=this,P=this.state,W=P.zenModeEnabled,va=P.width,qa=P.height;P=P.viewModeEnabled;var Aa=this.props,La=Aa.onCollabButtonClick,Ga=Aa.onExportToBackend;Aa=Aa.renderFooter;var gb=va/2,ib=qa/2;return R().createElement("div",{className:zc("excalidraw",{"excalidraw--view-mode":P}),ref:this.excalidrawContainerRef,style:{width:va,height:qa}},
R().createElement(Xt,{canvas:this.canvas,appState:this.state,setAppState:this.setAppState,actionManager:this.actionManager,elements:this.scene.getElements(),onCollabButtonClick:La,onLockToggle:this.toggleLock,onInsertElements:function(kb){return A.addElementsFromPasteOrLibrary(kb,gb,ib)},zenModeEnabled:W,toggleZenMode:this.toggleZenMode,langCode:ef.code,isCollaborating:this.props.isCollaborating||!1,onExportToBackend:Ga,renderCustomFooter:Aa,viewModeEnabled:P,showExitZenModeBtn:void 0===(null===(m=
this.props)||void 0===m?void 0:m.zenModeEnabled)&&W}),R().createElement("div",{className:"excalidraw-textEditorContainer"}),this.state.showStats&&R().createElement(Zt,{appState:this.state,setAppState:this.setAppState,elements:this.scene.getElements(),onClose:this.toggleStats}),null!==this.state.toastMessage&&R().createElement(St,{message:this.state.toastMessage,clearToast:this.clearToast}),R().createElement("main",null,this.renderCanvas()))},h.prototype.componentDidMount=function(){var m=this;return tb()(function(){return Do(this,
function(A){return"production"!==Na.Vi.TEST&&"production"!==Na.Vi.DEVELOPMENT||(m.setState.bind(m),Object.defineProperties(window.h,{state:{configurable:!0,get:function(){return m.state}},setState:{configurable:!0,value:function(){for(var P=[],W=0;W<arguments.length;W++)P[W]=arguments[W];return m.setState.apply(m,P)}},app:{configurable:!0,value:m}})),m.scene.addCallback(m.onSceneUpdated),m.addEventListeners(),"number"==typeof m.props.offsetLeft&&"number"==typeof m.props.offsetTop?m.initializeScene():
m.setState(m.getCanvasOffsets(m.props),function(){m.initializeScene()}),[2]})})()},h.prototype.componentWillUnmount=function(){this.unmounted=!0;this.removeEventListeners();this.scene.destroy();clearTimeout(ho);ho=0},h.prototype.removeEventListeners=function(){document.removeEventListener(Na.Ks.COPY,this.onCopy);document.removeEventListener(Na.Ks.PASTE,this.pasteFromClipboard);document.removeEventListener(Na.Ks.CUT,this.onCut);document.removeEventListener(Na.Ks.KEYDOWN,this.onKeyDown,!1);document.removeEventListener(Na.Ks.MOUSE_MOVE,
this.updateCurrentCursorPosition,!1);document.removeEventListener(Na.Ks.KEYUP,this.onKeyUp);window.removeEventListener(Na.Ks.RESIZE,this.onResize,!1);window.removeEventListener(Na.Ks.UNLOAD,this.onUnload,!1);window.removeEventListener(Na.Ks.BLUR,this.onBlur,!1);window.removeEventListener(Na.Ks.DRAG_OVER,this.disableEvent,!1);window.removeEventListener(Na.Ks.DROP,this.disableEvent,!1);document.removeEventListener(Na.Ks.GESTURE_START,this.onGestureStart,!1);document.removeEventListener(Na.Ks.GESTURE_CHANGE,
this.onGestureChange,!1);document.removeEventListener(Na.Ks.GESTURE_END,this.onGestureEnd,!1)},h.prototype.addEventListeners=function(){var m,A;this.removeEventListeners();document.addEventListener(Na.Ks.COPY,this.onCopy);document.addEventListener(Na.Ks.KEYDOWN,this.onKeyDown,!1);document.addEventListener(Na.Ks.KEYUP,this.onKeyUp,{passive:!0});document.addEventListener(Na.Ks.MOUSE_MOVE,this.updateCurrentCursorPosition);null===(m=document.fonts)||void 0===m||null===(A=m.addEventListener)||void 0===
A||A.call(m,"loadingdone",this.onFontLoaded);document.addEventListener(Na.Ks.GESTURE_START,this.onGestureStart,!1);document.addEventListener(Na.Ks.GESTURE_CHANGE,this.onGestureChange,!1);document.addEventListener(Na.Ks.GESTURE_END,this.onGestureEnd,!1);this.state.viewModeEnabled||(document.addEventListener(Na.Ks.PASTE,this.pasteFromClipboard),document.addEventListener(Na.Ks.CUT,this.onCut),document.addEventListener(Na.Ks.SCROLL,this.onScroll),window.addEventListener(Na.Ks.RESIZE,this.onResize,!1),
window.addEventListener(Na.Ks.UNLOAD,this.onUnload,!1),window.addEventListener(Na.Ks.BLUR,this.onBlur,!1),window.addEventListener(Na.Ks.DRAG_OVER,this.disableEvent,!1),window.addEventListener(Na.Ks.DROP,this.disableEvent,!1))},h.prototype.componentDidUpdate=function(m,A){var P,W,va,qa,Aa=this;(m.langCode!==this.props.langCode&&this.updateLanguage(),m.width!==this.props.width||m.height!==this.props.height||"number"==typeof this.props.offsetLeft&&m.offsetLeft!==this.props.offsetLeft||"number"==typeof this.props.offsetTop&&
m.offsetTop!==this.props.offsetTop)&&this.setState(Sa({width:null!==(va=this.props.width)&&void 0!==va?va:window.innerWidth,height:null!==(qa=this.props.height)&&void 0!==qa?qa:window.innerHeight},this.getCanvasOffsets(this.props)));m.viewModeEnabled!==this.props.viewModeEnabled&&this.setState({viewModeEnabled:!!this.props.viewModeEnabled},this.addEventListeners);A.viewModeEnabled!==this.state.viewModeEnabled&&this.addEventListeners();m.zenModeEnabled!==this.props.zenModeEnabled&&this.setState({zenModeEnabled:!!this.props.zenModeEnabled});
m.gridModeEnabled!==this.props.gridModeEnabled&&this.setState({gridSize:this.props.gridModeEnabled?Na.k:null});null===(P=document.querySelector(".excalidraw"))||void 0===P||P.classList.toggle("Appearance_dark","dark"===this.state.appearance);this.state.editingLinearElement&&!this.state.selectedElementIds[this.state.editingLinearElement.elementId]&&setTimeout(function(){Aa.actionManager.executeAction(Of)});m=A.multiElement;A.elementType!==this.state.elementType&&null!=m&&this.state.isBindingEnabled&&
Qh(m)&&Ok(m,this.state,this.scene,Oi(Nf.getPointAtIndexGlobalCoordinates(m,-1)));var La={},Ga={},gb={},ib={},kb={};this.state.collaborators.forEach(function(mc,Sc){if(mc.selectedElementIds)for(var Yc=0,kd=Object.keys(mc.selectedElementIds);Yc<kd.length;Yc++){var ke=kd[Yc];ke in gb||(gb[ke]=[]);gb[ke].push(Sc)}mc.pointer&&(mc.username&&(ib[Sc]=mc.username),mc.userState&&(kb[Sc]=mc.userState),Ga[Sc]=hh({sceneX:mc.pointer.x,sceneY:mc.pointer.y},Aa.state),La[Sc]=mc.button)});A=this.scene.getElements();
P=Zm(A.filter(function(mc){return!Aa.state.editingElement||"text"!==Aa.state.editingElement.type||mc.id!==Aa.state.editingElement.id}),this.state,this.state.selectionElement,window.devicePixelRatio,this.rc,this.canvas,{scrollX:this.state.scrollX,scrollY:this.state.scrollY,viewBackgroundColor:this.state.viewBackgroundColor,zoom:this.state.zoom,remotePointerViewportCoords:Ga,remotePointerButton:La,remoteSelectedElementIds:gb,remotePointerUsernames:ib,remotePointerUserStates:kb,shouldCacheIgnoreZoom:this.state.shouldCacheIgnoreZoom},
{renderOptimizations:!0,renderScrollbars:!ig().matches});m=P.atLeastOneVisibleElement;(P=P.scrollBars)&&(Wr=P);var Kb,Ib;A="text"!==(null===(W=this.state.editingElement)||void 0===W?void 0:W.type)&&!m&&0<A.length;(this.state.scrolledOutside!==A&&this.setState({scrolledOutside:A}),ak.record(this.state,this.scene.getElementsIncludingDeleted()),this.state.isLoading)||null===(Kb=(Ib=this.props).onChange)||void 0===Kb||Kb.call(Ib,this.scene.getElementsIncludingDeleted(),this.state)},h.resetTapTwice=function(){bq=
!1},h.prototype.addTextFromPaste=function(m){var A,P=Kf({clientX:tp,clientY:up},this.state);m=hj({x:P.x,y:P.y,strokeColor:this.state.currentItemStrokeColor,backgroundColor:this.state.currentItemBackgroundColor,fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,opacity:this.state.currentItemOpacity,strokeSharpness:this.state.currentItemStrokeSharpness,text:m,fontSize:this.state.currentItemFontSize,
fontFamily:this.state.currentItemFontFamily,textAlign:this.state.currentItemTextAlign,verticalAlign:Na.hs});this.scene.replaceAllElements(Wg(Wg([],this.scene.getElementsIncludingDeleted()),[m]));this.setState({selectedElementIds:(A={},A[m.id]=!0,A)});ak.resumeRecording()},h.prototype.selectShapeTool=function(m){var A;Eo||ug(this.canvas,m);(A=document.activeElement)instanceof HTMLElement&&A.className.includes("ToolIcon")&&document.activeElement.blur();If(m)||this.setState({suggestedBindings:[]});"selection"!==
m?this.setState({elementType:m,selectedElementIds:{},selectedGroupIds:{},editingGroupId:null}):this.setState({elementType:m})},h.prototype.handleTextWysiwyg=function(m,A){A=A.isExistingElement;var P=void 0!==A&&A,W=this,va=function(qa,Aa){void 0===Aa&&(Aa=!1);W.scene.replaceAllElements(Wg([],W.scene.getElementsIncludingDeleted().map(function(La){if(La.id===m.id&&og(La)){var Ga=Aa;Ga={text:qa,isDeleted:null!=Ga?Ga:La.isDeleted};var gb=wj(qa,dg(La));var ib=gb.width;var kb=gb.height;gb=gb.baseline;var Kb=
La.textAlign;var Ib=La.verticalAlign;if("center"===Kb&&"middle"===Ib)Kb=wj(La.text,dg(La)),Ib=Ri(La,{width:ib-Kb.width,height:kb-Kb.height}),Kb=La.x-Ib.x,Ib=La.y-Ib.y;else{var mc=zf(La);Ib=mc[0];var Sc=mc[1],Yc=mc[2];mc=mc[3];var kd=Rf(La,ib,kb);Kb=(Ib=lk({s:!0,e:"center"===Kb||"left"===Kb,w:"center"===Kb||"right"===Kb},La.x,La.y,La.angle,(Ib-kd[0])/2,(Sc-kd[1])/2,(Yc-kd[2])/2,(mc-kd[3])/2))[0];Ib=Ib[1]}ib={width:ib,height:kb,x:Number.isFinite(Kb)?Kb:La.x,y:Number.isFinite(Ib)?Ib:La.y,baseline:gb};
La=vg(La,Ca(Ga,ib))}return La})))};!function(qa){var Aa=qa.id,La=qa.appState,Ga=qa.onChange,gb=qa.onSubmit,ib=qa.getViewportCoords,kb=qa.element;qa=qa.canvas;var Kb=function(){var qe,Re=null===(qe=ch.getScene(kb))||void 0===qe?void 0:qe.getElement(Aa);if(Re&&og(Re)){qe=ib(Re.x,Re.y);var md=qe[0],Fd=qe[1];qe=Re.textAlign;var Ud=Re.angle;Ib.value=Re.text;var Ee=Re.text.replace(/\r\n?/g,"\n").split("\n"),xh=Re.height/Ee.length;Ee=(La.offsetLeft+La.width-md-8)/La.zoom.value-Number(getComputedStyle(document.querySelector(".excalidraw").parentNode).marginRight.slice(0,
-2));var Wh=Object,lj=Wh.assign,Ii=Ib.style,yl=dg(Re);xh="".concat(xh,"px");var jn="".concat(Re.width,"px"),Rl="".concat(Re.height,"px");md="".concat(md,"px");Fd="".concat(Fd,"px");var kn=Re.width;var Lm=La.zoom,Zn=180*Ud/Math.PI;Ud=(kn-2*La.offsetLeft)*(Lm.value-1)/2;var Mm=(Re.height-2*La.offsetTop)*(Lm.value-1)/2;kn=(kn>Ee&&1!==Lm.value&&(Ud=Ee/2*(Lm.value-1)),"translate(".concat(Ud,"px, ").concat(Mm,"px) scale(").concat(Lm.value,") rotate(").concat(Zn,"deg)"));lj.call(Wh,Ii,{font:yl,lineHeight:xh,
width:jn,height:Rl,left:md,top:Fd,transform:kn,textAlign:qe,color:Re.strokeColor,opacity:Re.opacity/100,filter:"var(--appearance-filter)",maxWidth:"".concat(Ee,"px")})}},Ib=document.createElement("textarea");Ib.dir="auto";Ib.tabIndex=0;Ib.dataset.type="wysiwyg";Ib.wrap="off";Object.assign(Ib.style,{position:"absolute",display:"inline-block",minHeight:"1em",backfaceVisibility:"hidden",margin:0,padding:0,border:0,outline:0,resize:"none",background:"transparent",overflow:"hidden",whiteSpace:"pre",zIndex:"var(--zIndex-wysiwyg)"});
Kb();Ga&&(Ib.oninput=function(){Ga(Ek(Ib.value))});Ib.onkeydown=function(qe){"Escape"===qe.key?(qe.preventDefault(),Sc()):"Enter"===qe.key&&qe[xe]?(qe.preventDefault(),qe.isComposing||229===qe.keyCode)||Sc():"Enter"!==qe.key||qe.altKey||qe.stopPropagation()};var mc=function(qe){qe.preventDefault();qe.stopPropagation()},Sc=function(){gb(Ek(Ib.value));ie||(ie=!0,Ib.onblur=null,Ib.oninput=null,Ib.onkeydown=null,De&&De.disconnect(),window.removeEventListener("resize",Kb),window.removeEventListener("wheel",
mc,!0),window.removeEventListener("pointerdown",kd),window.removeEventListener("pointerup",Yc),window.removeEventListener("blur",Sc),ke(),Ib.remove())},Yc=function(){window.removeEventListener("pointerup",Yc);setTimeout(function(){Ib.onblur=Sc;Ib.focus()})},kd=function(qe){qe.target instanceof HTMLElement&&qe.target.closest(".".concat(Na.$C.SHAPE_ACTIONS_MENU))&&!ah(qe.target)&&(Ib.onblur=null,window.addEventListener("pointerup",Yc),window.addEventListener("blur",Sc))},ke=ch.getScene(kb).addCallback(function(){Kb();
Ib.focus()}),ie=!1;Ib.onblur=Sc;var De=null;qa&&"ResizeObserver"in window?(De=new window.ResizeObserver(function(){Kb()})).observe(qa):window.addEventListener("resize",Kb);window.addEventListener("pointerdown",kd);window.addEventListener("wheel",mc,{passive:!1,capture:!0});document.querySelector(".excalidraw-textEditorContainer").appendChild(Ib);Ib.focus();Ib.select()}({id:m.id,appState:this.state,canvas:this.canvas,getViewportCoords:function(qa,Aa){qa=hh({sceneX:qa,sceneY:Aa},W.state);return[qa.x-
W.state.offsetLeft,qa.y-W.state.offsetTop]},onChange:se(function(qa){va(qa);!m.isDeleted&&Vh(m)}),onSubmit:se(function(qa){var Aa=!qa.trim();va(qa,Aa);Aa?nj(W.scene.getElements(),[m]):W.setState(function(La){var Ga;return{selectedElementIds:Sa(Sa({},La.selectedElementIds),{},(Ga={},Ga[m.id]=!0,Ga))}});Aa&&!P||ak.resumeRecording();W.setState({draggingElement:null,editingElement:null});W.state.elementLocked&&ug(W.canvas,W.state.elementType)}),element:m});this.setState({selectedElementIds:{},selectedGroupIds:{},
editingGroupId:null});va(m.text)},h.prototype.getTextElementAtPosition=function(m,A){return(m=this.getElementAtPosition(m,A))&&og(m)&&!m.isDeleted?m:null},h.prototype.getElementAtPosition=function(m,A){var P=this.getElementsAtPosition(m,A);if(1<P.length){var W=P[P.length-1];return xk(W,this.state,m,A)?P[P.length-2]:W}return 1===P.length?P[0]:null},h.prototype.getElementsAtPosition=function(m,A){var P,W,va=this;return P=this.scene.getElements(),W=function(qa){var Aa=va.state,La=10/Aa.zoom.value,Ga=
[m,A];return Aa.selectedElementIds[qa.id]?om(qa,Ga,La):Tj(qa,Aa,Ga)},P.filter(function(qa){return!qa.isDeleted&&W(qa)})},h.prototype.maybeCleanupAfterMissingPointerUp=function(m){null!==$n&&$n(m)},h.prototype.updateGestureOnPointerDown=function(m){jl.set(m.pointerId,{x:m.clientX,y:m.clientY});2===jl.size&&(vp=Jm(jl),sp=this.state.zoom.value,br=Xn(Array.from(jl.values())))},h.prototype.initialPointerDownState=function(m){var A=Kf(m,this.state),P=We(this.scene.getElements(),this.state),W=pg(P),va=W[0],
qa=W[1],Aa=W[2];W=W[3];return{origin:A,originInGrid:Oi(nh(A.x,A.y,this.state.gridSize)),scrollbars:ql(Wr,m.clientX-this.state.offsetLeft,m.clientY-this.state.offsetTop),lastCoords:Sa({},A),originalElements:this.scene.getElements().reduce(function(La,Ga){return La.set(Ga.id,Qj(Ga)),La},new Map),resize:{handleType:!1,isResizing:!1,offset:{x:0,y:0},arrowDirection:"origin",center:{x:(Aa+va)/2,y:(W+qa)/2}},hit:{element:null,allHitElements:[],wasAddedToSelection:!1,hasBeenDuplicated:!1,hasHitCommonBoundingBoxOfSelectedElements:this.isHittingCommonBoundingBoxOfSelectedElements(A,
P)},drag:{hasOccurred:!1,offset:null},eventListeners:{onMove:null,onUp:null,onKeyUp:null,onKeyDown:null}}},h.prototype.handleDraggingScrollBar=function(m,A){var P=this;if(!A.scrollbars.isOverEither||this.state.multiElement)return!1;Ur=!0;A.lastCoords.x=m.clientX;A.lastCoords.y=m.clientY;var W=se(function(qa){qa.target instanceof HTMLElement&&P.handlePointerMoveOverScrollbars(qa,A)}),va=se(function(){Ur=!1;ug(P.canvas,P.state.elementType);$n=null;P.setState({cursorButton:"up"});P.savePointer(m.clientX,
m.clientY,"up");window.removeEventListener(Na.Ks.POINTER_MOVE,W);window.removeEventListener(Na.Ks.POINTER_UP,va)});return $n=va,window.addEventListener(Na.Ks.POINTER_MOVE,W),window.addEventListener(Na.Ks.POINTER_UP,va),!0},h.prototype.isASelectedElement=function(m){return null!=m&&this.state.selectedElementIds[m.id]},h.prototype.isHittingCommonBoundingBoxOfSelectedElements=function(m,A){if(2>A.length)return!1;var P=10/this.state.zoom.value;A=pg(A);var W=A[1],va=A[2],qa=A[3];return m.x>A[0]-P&&m.x<
va+P&&m.y>W-P&&m.y<qa+P},h.prototype.onKeyDownFromPointerDownHandler=function(m){var A=this;return se(function(P){A.maybeHandleResize(m,P)||A.maybeDragNewGenericElement(m,P)})},h.prototype.onKeyUpFromPointerDownHandler=function(m){var A=this;return se(function(P){"Alt"===P.key&&P.preventDefault();A.maybeHandleResize(m,P)||A.maybeDragNewGenericElement(m,P)})},h.prototype.onPointerMoveFromPointerDownHandler=function(m){var A=this;return se(function(P){if(null===m.drag.offset&&(m.drag.offset=Oi(function(Yc,
kd,ke){Yc=pg(Yc);return[kd-Yc[0],ke-Yc[1]]}(We(A.scene.getElements(),A.state),m.origin.x,m.origin.y))),P.target instanceof HTMLElement&&!A.handlePointerMoveOverScrollbars(P,m)){var W=Kf(P,A.state),va=nh(W.x,W.y,A.state.gridSize),qa=va[0];va=va[1];if(m.drag.hasOccurred||"arrow"!==A.state.elementType&&"line"!==A.state.elementType||!(Math.hypot(m.origin.x-W.x,m.origin.y-W.y)<Na.f)){if(m.resize.isResizing&&(m.lastCoords.x=W.x,m.lastCoords.y=W.y,A.maybeHandleResize(m,P)))return!0;if(A.state.editingLinearElement&&
Nf.handlePointDragging(A.state,function(Yc){return A.setState(Yc)},W.x,W.y,function(Yc,kd){A.maybeSuggestBindingForLinearElementAtCursor(Yc,kd,W)}))return m.lastCoords.x=W.x,void(m.lastCoords.y=W.y);if(m.hit.allHitElements.some(function(Yc){return A.isASelectedElement(Yc)})||m.hit.hasHitCommonBoundingBoxOfSelectedElements){m.drag.hasOccurred=!0;var Aa=We(A.scene.getElements(),A.state);if(0<Aa.length){qa=nh(W.x-m.drag.offset.x,W.y-m.drag.offset.y,A.state.gridSize);var La=qa[0];qa=qa[1];va=[Math.abs(W.x-
m.origin.x),Math.abs(W.y-m.origin.y)];if(function(Yc,kd,ke,ie,De,qe,Re,md){void 0===qe&&(qe=!1);void 0===Re&&(Re=0);void 0===md&&(md=0);De=pg(kd);var Fd=ke-De[0],Ud=ie-De[1];kd.forEach(function(Ee){if(qe){var xh=qe&&Re<md;var Wh=qe&&Re>md;var lj=Yc.originalElements.get(Ee.id);xh=xh&&lj?lj.x:Ee.x+Fd;Wh=Wh&&lj?lj.y:Ee.y+Ud}else xh=Ee.x+Fd,Wh=Ee.y+Ud;pe(Ee,{x:xh,y:Wh});Vh(Ee,{simultaneouslyUpdated:kd})})}(m,Aa,La,qa,A.scene,P.shiftKey,va[0],va[1]),A.maybeSuggestBindingForAll(Aa),P.altKey&&!m.hit.hasBeenDuplicated){m.hit.hasBeenDuplicated=
!0;Aa=[];P=[];var Ga=new Map;va=new Map;for(var gb=m.hit.element,ib=0,kb=A.scene.getElementsIncludingDeleted();ib<kb.length;ib++){var Kb=kb[ib];if(A.state.selectedElementIds[Kb.id]||Kb.id===(null==gb?void 0:gb.id)&&m.hit.wasAddedToSelection){var Ib=Hi(A.state.editingGroupId,Ga,Kb),mc=nh(m.origin.x-m.drag.offset.x,m.origin.y-m.drag.offset.y,A.state.gridSize);pe(Ib,{x:Ib.x+(mc[0]-La),y:Ib.y+(mc[1]-qa)});Aa.push(Ib);P.push(Kb);va.set(Kb.id,Ib.id)}else Aa.push(Kb)}La=Wg(Wg([],Aa),P);tj(La,P,va,"duplicatesServeAsOld");
A.scene.replaceAllElements(La)}return}}if(Aa=A.state.draggingElement)if(cg(Aa)?(m.drag.hasOccurred=!0,Ga=Aa.points,ib=gb=void 0,"draw"===Aa.type?(gb=W.x-Aa.x,ib=W.y-Aa.y):(gb=qa-Aa.x,ib=va-Aa.y),P.shiftKey&&2===Ga.length&&(gb=(La=lg(A.state.elementType,gb,ib)).width,ib=La.height),1===Ga.length?pe(Aa,{points:Wg(Wg([],Ga),[[gb,ib]])}):1<Ga.length&&("draw"===Aa.type?pe(Aa,{points:O(Wg(Wg([],Ga),[[gb,ib]]),.7/A.state.zoom.value)}):pe(Aa,{points:Wg(Wg([],Ga.slice(0,-1)),[[gb,ib]])})),Qh(Aa)&&A.maybeSuggestBindingForLinearElementAtCursor(Aa,
"end",W,A.state.startBoundElement)):(m.lastCoords.x=W.x,m.lastCoords.y=W.y,A.maybeDragNewGenericElement(m,P)),"selection"===A.state.elementType){La=A.scene.getElements();!P.shiftKey&&Yg(La,A.state)&&A.setState({selectedElementIds:{},selectedGroupIds:{},editingGroupId:null});var Sc=function(Yc,kd){kd=zf(kd);var ke=kd[0],ie=kd[1],De=kd[2],qe=kd[3];return Yc.filter(function(Re){var md=ti(Re),Fd=md[0],Ud=md[1],Ee=md[2];md=md[3];return"selection"!==Re.type&&ke<=Fd&&ie<=Ud&&De>=Ee&&qe>=md})}(La,Aa);A.setState(function(Yc){return Je(Sa(Sa({},
Yc),{},{selectedElementIds:Sa(Sa({},Yc.selectedElementIds),Sc.reduce(function(kd,ke){return kd[ke.id]=!0,kd},{}))}),A.scene.getElements())})}}}})},h.prototype.handlePointerMoveOverScrollbars=function(m,A){return A.scrollbars.isOverHorizontal?(m=m.clientX,this.setState({scrollX:this.state.scrollX-(m-A.lastCoords.x)/this.state.zoom.value}),A.lastCoords.x=m,!0):A.scrollbars.isOverVertical?(m=m.clientY,this.setState({scrollY:this.state.scrollY-(m-A.lastCoords.y)/this.state.zoom.value}),A.lastCoords.y=
m,!0):!1},h.prototype.onPointerUpFromPointerDownHandler=function(m){var A=this;return se(function(P){var W=A.state,va=W.draggingElement,qa=W.resizingElement,Aa=W.multiElement,La=W.elementType,Ga=W.elementLocked,gb=W.isResizing;W=W.isRotating;if(A.setState({isResizing:!1,isRotating:!1,resizingElement:null,selectionElement:null,cursorButton:"up",editingElement:Aa||og(A.state.editingElement)?A.state.editingElement:null}),A.savePointer(P.clientX,P.clientY,"up"),A.state.editingLinearElement){var ib=Nf.handlePointerUp(P,
A.state.editingLinearElement,A.state);ib!==A.state.editingLinearElement&&A.setState({editingLinearElement:ib,suggestedBindings:[]})}if($n=null,window.removeEventListener(Na.Ks.POINTER_MOVE,m.eventListeners.onMove),window.removeEventListener(Na.Ks.POINTER_UP,m.eventListeners.onUp),window.removeEventListener(Na.Ks.KEYDOWN,m.eventListeners.onKeyDown),window.removeEventListener(Na.Ks.KEYUP,m.eventListeners.onKeyUp),"draw"!==(null==va?void 0:va.type))if(cg(va))1<va.points.length&&ak.resumeRecording(),
P=Kf(P,A.state),m.drag.hasOccurred||!va||Aa?m.drag.hasOccurred&&!Aa&&(A.state.isBindingEnabled&&Qh(va)&&Ok(va,A.state,A.scene,P),A.setState({suggestedBindings:[],startBoundElement:null}),Ga||"draw"===La?A.setState(function(Ib){var mc;return{draggingElement:null,selectedElementIds:Sa(Sa({},Ib.selectedElementIds),{},(mc={},mc[A.state.draggingElement.id]=!0,mc))}}):(bi(A.canvas),A.setState(function(Ib){var mc;return{draggingElement:null,elementType:"selection",selectedElementIds:Sa(Sa({},Ib.selectedElementIds),
{},(mc={},mc[A.state.draggingElement.id]=!0,mc))}}))):(pe(va,{points:Wg(Wg([],va.points),[[P.x-va.x,P.y-va.y]])}),A.setState({multiElement:va,editingElement:A.state.draggingElement}));else{if("selection"!==La&&va&&Gh(va))return A.scene.replaceAllElements(A.scene.getElementsIncludingDeleted().slice(0,-1)),void A.setState({draggingElement:null});va&&pe(va,ej(va));qa&&ak.resumeRecording();qa&&Gh(qa)&&A.scene.replaceAllElements(A.scene.getElementsIncludingDeleted().filter(function(Ib){return Ib.id!==
qa.id}));var kb=m.hit.element;if(kb&&!m.drag.hasOccurred&&!m.hit.wasAddedToSelection)if(P.shiftKey)if(A.state.selectedElementIds[kb.id])if(null!=Hh(A.state,kb)){var Kb=kb.groupIds.flatMap(function(Ib){return Pj(A.scene.getElements(),Ib)}).map(function(Ib){var mc;return(mc={})[Ib.id]=!1,mc}).reduce(function(Ib,mc){return Sa(Sa({},Ib),mc)},{});A.setState(function(Ib){return{selectedGroupIds:Sa(Sa({},Ib.selectedElementIds),kb.groupIds.map(function(mc){var Sc;return(Sc={})[mc]=!1,Sc}).reduce(function(mc,
Sc){return Sa(Sa({},mc),Sc)},{})),selectedElementIds:Sa(Sa({},Ib.selectedElementIds),Kb)}})}else A.setState(function(Ib){var mc;return{selectedElementIds:Sa(Sa({},Ib.selectedElementIds),{},(mc={},mc[kb.id]=!1,mc))}});else A.setState(function(Ib){var mc;return{selectedElementIds:Sa(Sa({},Ib.selectedElementIds),{},(mc={},mc[kb.id]=!0,mc))}});else A.setState(function(Ib){var mc;return Sa({},Je(Sa(Sa({},Ib),{},{selectedElementIds:(mc={},mc[kb.id]=!0,mc)}),A.scene.getElements()))});A.state.editingLinearElement||
m.drag.hasOccurred||A.state.isResizing||!(kb&&xk(kb,A.state,m.origin.x,m.origin.y)||!kb&&m.hit.hasHitCommonBoundingBoxOfSelectedElements)?(!Ga&&"draw"!==La&&va&&A.setState(function(Ib){var mc;return{selectedElementIds:Sa(Sa({},Ib.selectedElementIds),{},(mc={},mc[va.id]=!0,mc))}}),("selection"!==La||Yg(A.scene.getElements(),A.state))&&ak.resumeRecording(),(m.drag.hasOccurred||gb||W)&&(A.state.isBindingEnabled?Dg:Tg)(We(A.scene.getElements(),A.state)),Ga||"draw"===La?A.setState({draggingElement:null,
suggestedBindings:[]}):(bi(A.canvas),A.setState({draggingElement:null,suggestedBindings:[],elementType:"selection"}))):A.setState({selectedElementIds:{},selectedGroupIds:{},editingGroupId:null})}else A.actionManager.executeAction(Of)})},h.prototype.maybeSuggestBindingForAll=function(m){var A;m=(A=new Set(m.map(function(P){return P.id})),m.flatMap(function(P){return Qh(P)?$l(P).filter(function(W){return!A.has(W.id)}):Ei(P)?wh(P).filter(function(W){return!A.has(W[0].id)}):[]}));this.setState({suggestedBindings:m})},
h.prototype.clearSelection=function(m){this.setState(function(A){return{selectedElementIds:{},selectedGroupIds:{},editingGroupId:A.editingGroupId&&null!=m&&m.groupIds.includes(A.editingGroupId)?A.editingGroupId:null}});this.setState({selectedElementIds:{},previousSelectedElementIds:this.state.selectedElementIds})},h.prototype.getTextWysiwygSnappedToCenterPosition=function(m,A,P,W,va){if(va=function(qa,Aa,La){for(var Ga=null,gb=qa.length-1;0<=gb;--gb)if(!qa[gb].isDeleted){var ib=zf(qa[gb]),kb=ib[1],
Kb=ib[2],Ib=ib[3];if(ib[0]<Aa&&Aa<Kb&&kb<La&&La<Ib){Ga=qa[gb];break}}return Ga}(this.scene.getElementsIncludingDeleted().filter(function(qa){return!og(qa)}),m,A))if(W=va.x+va.width/2,va=va.y+va.height/2,Math.hypot(m-W,A-va)<Na.wZ)return m=hh({sceneX:W,sceneY:va},P),{viewportX:m.x,viewportY:m.y,elementCenterX:W,elementCenterY:va}},h.prototype.getCanvasOffsets=function(m){var A,P;return"number"==typeof(null==m?void 0:m.offsetLeft)&&"number"==typeof(null==m?void 0:m.offsetTop)?{offsetLeft:m.offsetLeft,
offsetTop:m.offsetTop}:null!==(A=this.excalidrawContainerRef)&&void 0!==A&&null!==(P=A.current)&&void 0!==P&&P.parentElement?(P=this.excalidrawContainerRef.current.parentElement.getBoundingClientRect(),A=P.left,P=P.top,{offsetLeft:"number"==typeof(null==m?void 0:m.offsetLeft)?m.offsetLeft:A,offsetTop:"number"==typeof(null==m?void 0:m.offsetTop)?m.offsetTop:P}):{offsetLeft:"number"==typeof(null==m?void 0:m.offsetLeft)?m.offsetLeft:0,offsetTop:"number"==typeof(null==m?void 0:m.offsetTop)?m.offsetTop:
0}},h.prototype.updateLanguage=function(){var m=this;return tb()(function(){var A;return Do(this,function(P){switch(P.label){case 0:return A=Uc.find(function(W){return W.code===m.props.langCode})||Id,[4,Pe(A)];case 1:return P.sent(),m.setAppState({}),[2]}})})()},h}(R().Component);Tr.defaultProps={width:window.innerWidth,height:window.innerHeight};var Pt=function(){var d=this;this.rc=this.canvas=null;this.unmounted=!1;this.excalidrawContainerRef=R().createRef();this.getSceneElementsIncludingDeleted=
function(){return d.scene.getElementsIncludingDeleted()};this.getSceneElements=function(){return d.scene.getElements()};this.syncActionResult=se(function(h){if(!d.unmounted&&!1!==h){var m=null;if(h.elements&&(h.elements.forEach(function(La){var Ga;(null===(Ga=d.state.editingElement)||void 0===Ga?void 0:Ga.id)===La.id&&d.state.editingElement!==La&&!La.isDeleted&&(m=La)}),d.scene.replaceAllElements(h.elements),h.commitToHistory&&ak.resumeRecording()),h.appState||m){var A,P,W;h.commitToHistory&&ak.resumeRecording();
var va=(null==h||null===(A=h.appState)||void 0===A?void 0:A.viewModeEnabled)||!1,qa=(null==h||null===(P=h.appState)||void 0===P?void 0:P.zenModeEnabled)||!1,Aa=(null==h||null===(W=h.appState)||void 0===W?void 0:W.gridSize)||null;void 0!==d.props.viewModeEnabled&&(va=d.props.viewModeEnabled);void 0!==d.props.zenModeEnabled&&(qa=d.props.zenModeEnabled);void 0!==d.props.gridModeEnabled&&(Aa=d.props.gridModeEnabled?Na.k:null);d.setState(function(La){var Ga;return Object.assign(h.appState||{},{editingElement:m||
(null===(Ga=h.appState)||void 0===Ga?void 0:Ga.editingElement)||null,width:La.width,height:La.height,offsetTop:La.offsetTop,offsetLeft:La.offsetLeft,viewModeEnabled:va,zenModeEnabled:qa,gridSize:Aa})},function(){h.syncHistory&&ak.setCurrentState(d.state,d.scene.getElementsIncludingDeleted())})}}});this.onBlur=se(function(){Eo=!1;d.setState({isBindingEnabled:!0})});this.onUnload=function(){d.onBlur()};this.disableEvent=function(h){h.preventDefault()};this.onFontLoaded=function(){d.scene.getElementsIncludingDeleted().forEach(function(h){og(h)&&
ni.delete(h)});d.onSceneUpdated()};this.importLibraryFromUrl=function(){var h=tb()(function(m){var A,P,W,va,qa;return Do(this,function(Aa){switch(Aa.label){case 0:window.history.replaceState({},Na.iC,window.location.origin),Aa.label=1;case 1:return Aa.trys.push([1,7,,8]),[4,fetch(m)];case 2:return[4,Aa.sent().blob()];case 3:return A=Aa.sent(),va=(W=JSON).parse,[4,A.text()];case 4:Aa=P=va.apply(W,[Aa.sent()]);if("object"!=typeof Aa||!Aa||"excalidrawlib"!==Aa.type||1!==Aa.version)throw Error();return window.confirm(Jb("alerts.confirmAddLibrary",
{numShapes:P.library.length}))?[4,ih.importLibrary(A)]:[3,6];case 5:Aa.sent(),d.setState({isLibraryOpen:!0}),Aa.label=6;case 6:return[3,8];case 7:return qa=Aa.sent(),window.alert(Jb("alerts.errorLoadingLibrary")),console.error(qa),[3,8];case 8:return[2]}})});return function(m){return h.apply(this,arguments)}}();this.resetHistory=function(){ak.clear()};this.resetScene=se(function(h){d.scene.replaceAllElements([]);d.setState(function(m){return Sa(Sa({},kg()),{},{isLoading:(null==h||!h.resetLoadingState)&&
m.isLoading,appearance:d.state.appearance})});d.resetHistory()});this.initializeScene=tb()(function(){var h,m,A,P,W;return Do(this,function(va){switch(va.label){case 0:"launchQueue"in window&&"LaunchParams"in window&&window.launchQueue.setConsumer(function(){var qa=tb()(function(Aa){var La,Ga;return Do(this,function(gb){switch(gb.label){case 0:return Aa.files.length?[4,(La=Aa.files[0]).getFile()]:[2];case 1:return(Ga=gb.sent()).handle=La,Dm(Ga,d.state).then(function(ib){return d.syncActionResult({elements:ib.elements,
appState:Sa(Sa({},ib.appState||d.state),{},{isLoading:!1}),commitToHistory:!0})}).catch(function(ib){d.setState({isLoading:!1,errorMessage:ib.message})}),[2]}})});return function(Aa){return qa.apply(this,arguments)}}()),d.state.isLoading||d.setState({isLoading:!0}),m=null,va.label=1;case 1:return va.trys.push([1,3,,4]),[4,d.props.initialData];case 2:return m=va.sent()||null,[3,4];case 3:return A=va.sent(),console.error(A),[3,4];case 4:return(P=xn(m,null)).appState=Sa(Sa({},P.appState),{},{isLoading:!1}),
null!==(h=m)&&void 0!==h&&h.scrollToCenter&&(P.appState=Sa(Sa({},P.appState),ji(P.elements,Sa(Sa({},P.appState),{},{width:d.state.width,height:d.state.height,offsetTop:d.state.offsetTop,offsetLeft:d.state.offsetLeft})))),d.resetHistory(),d.syncActionResult(Sa(Sa({},P),{},{commitToHistory:!0})),(W=(new URLSearchParams(window.location.search)).get("addLibrary"))?[4,d.importLibraryFromUrl(W)]:[3,6];case 5:va.sent(),va.label=6;case 6:return[2]}})});this.onResize=se(function(){d.scene.getElementsIncludingDeleted().forEach(function(h){return ni.delete(h)});
d.setState({})});this.onScroll=bj(function(){var h=d.getCanvasOffsets(),m=h.offsetTop,A=h.offsetLeft;d.setState(function(P){return P.offsetLeft===A&&P.offsetTop===m?null:{offsetTop:m,offsetLeft:A}})},Na.HM);this.onCut=se(function(h){ah(h.target)||(d.cutAll(),h.preventDefault())});this.onCopy=se(function(h){var m=document.getSelection();null!=m&&m.anchorNode&&!d.excalidrawContainerRef.current.contains(m.anchorNode)||ah(h.target)||(d.copyAll(),h.preventDefault())});this.cutAll=function(){d.copyAll();
d.actionManager.executeAction(Ff)};this.copyAll=function(){nk(d.scene.getElements(),d.state)};this.onTapStart=function(h){if(!bq)return bq=!0,clearTimeout(Vr),void(Vr=window.setTimeout(Tr.resetTapTwice,Na.Gj));if(bq&&1===h.touches.length){var m=h.touches[0];d.handleCanvasDoubleClick({clientX:m.clientX,clientY:m.clientY});bq=!1;clearTimeout(Vr)}h.preventDefault();2===h.touches.length&&d.setState({selectedElementIds:{}})};this.onTapEnd=function(h){h.preventDefault();0<h.touches.length&&d.setState({previousSelectedElementIds:{},
selectedElementIds:d.state.previousSelectedElementIds})};this.pasteFromClipboard=se(function(){var h=tb()(function(m){var A,P,W;return Do(this,function(va){switch(va.label){case 0:return A=document.activeElement,P=document.elementFromPoint(tp,up),!m||P instanceof HTMLCanvasElement&&!ah(A)?[4,$a(m)]:[2];case 1:return(W=va.sent()).errorMessage?d.setState({errorMessage:W.errorMessage}):W.spreadsheet?d.setState({pasteDialog:{data:W.spreadsheet,shown:!0}}):W.elements?d.addElementsFromPasteOrLibrary(W.elements):
W.text&&d.addTextFromPaste(W.text),d.selectShapeTool("selection"),null==m||m.preventDefault(),[2]}})});return function(m){return h.apply(this,arguments)}}());this.addElementsFromPasteOrLibrary=function(h,m,A){void 0===m&&(m=tp);void 0===A&&(A=up);var P=pg(h),W=P[0],va=P[1],qa=Math.abs(W-P[2])/2;P=Math.abs(va-P[3])/2;m=Kf({clientX:m,clientY:A},d.state);qa=m.x-qa;P=m.y-P;var Aa=new Map;qa=nh(qa,P,d.state.gridSize);var La=qa[0],Ga=qa[1],gb=new Map;qa=h.map(function(ib){var kb=Hi(d.state.editingGroupId,
Aa,ib,{x:ib.x+La-W,y:ib.y+Ga-va});return gb.set(ib.id,kb.id),kb});P=Wg(Wg([],d.scene.getElementsIncludingDeleted()),qa);tj(P,h,gb);d.scene.replaceAllElements(P);ak.resumeRecording();d.setState(Je(Sa(Sa({},d.state),{},{isLibraryOpen:!1,selectedElementIds:qa.reduce(function(ib,kb){return ib[kb.id]=!0,ib},{}),selectedGroupIds:{}}),d.scene.getElements()))};this.setAppState=function(h){d.setState(h)};this.removePointer=function(h){"touch"===h.pointerType&&ho&&(clearTimeout(ho),ho=0,$p=!1);jl.delete(h.pointerId)};
this.toggleLock=function(){d.setState(function(h){return{elementLocked:!h.elementLocked,elementType:h.elementLocked?"selection":h.elementType}})};this.toggleZenMode=function(){d.actionManager.executeAction(Xd)};this.toggleStats=function(){d.state.showStats||dh("dialog","stats");d.actionManager.executeAction(Vn)};this.setScrollToCenter=function(h){d.setState(Sa({},ji(Rd(h),d.state,d.canvas)))};this.clearToast=function(){d.setState({toastMessage:null})};this.updateScene=se(function(h){var m;h.commitToHistory&&
ak.resumeRecording();null!==(m=h.appState)&&void 0!==m&&m.viewBackgroundColor&&d.setState({viewBackgroundColor:h.appState.viewBackgroundColor});h.elements&&d.scene.replaceAllElements(h.elements);h.collaborators&&d.setState({collaborators:h.collaborators})});this.onSceneUpdated=function(){d.setState({})};this.updateCurrentCursorPosition=se(function(h){tp=h.x;up=h.y});this.onKeyDown=se(function(h){var m;if(!(("Proxy"in window&&(!h.shiftKey&&/^[A-Z]$/.test(h.key)||h.shiftKey&&/^[a-z]$/.test(h.key))&&
(h=new Proxy(h,{get:function(va,qa){var Aa=va[qa];return"function"==typeof Aa?Aa.bind(va):"key"===qa?h.shiftKey?va.key.toUpperCase():va.key.toLowerCase():Aa}})),ah(h.target)&&"Escape"!==h.key||Mj(h.key)&&(m=h.target,m instanceof HTMLElement&&"wysiwyg"===m.dataset.type||m instanceof HTMLBRElement||m instanceof HTMLInputElement||m instanceof HTMLTextAreaElement||m instanceof HTMLSelectElement))||("?"===h.key&&d.setState({showHelpDialog:!0}),d.actionManager.handleKeyDown(h)||d.state.viewModeEnabled))){if(h[xe]&&
d.setState({isBindingEnabled:!1}),"Digit9"===h.code&&d.setState({isLibraryOpen:!d.state.isLibraryOpen}),Mj(h.key)){m=d.state.gridSize&&(h.shiftKey?Na.$e:d.state.gridSize)||(h.shiftKey?Na.Iw:Na.$e);var A=d.scene.getElements().filter(function(va){return d.state.selectedElementIds[va.id]}),P=0,W=0;"ArrowLeft"===h.key?P=-m:"ArrowRight"===h.key?P=m:"ArrowUp"===h.key?W=-m:"ArrowDown"===h.key&&(W=m);A.forEach(function(va){pe(va,{x:va.x+P,y:va.y+W});Vh(va,{simultaneouslyUpdated:A})});d.maybeSuggestBindingForAll(A);
h.preventDefault()}else if("Enter"===h.key)if(m=We(d.scene.getElements(),d.state),1===m.length&&cg(m[0]))d.state.editingLinearElement&&d.state.editingLinearElement.elementId===m[0].id||(ak.resumeRecording(),d.setState({editingLinearElement:new Nf(m[0],d.scene)}));else{if(1===m.length&&!cg(m[0]))return m=m[0],d.startTextEditing({sceneX:m.x+m.width/2,sceneY:m.y+m.height/2}),void h.preventDefault()}else h.ctrlKey||h.altKey||h.metaKey||null!==d.state.draggingElement||((m=function(va){var qa=lm.find(function(Aa,
La){return va===(La+1).toString()||("string"==typeof Aa.key?Aa.key===va:Aa.key.includes(va))});return(null==qa?void 0:qa.value)||null}(h.key))?d.selectShapeTool(m):"q"===h.key&&d.toggleLock());" "===h.key&&0===jl.size&&(Eo=!0,Ef(d.canvas,Na.oc.GRABBING))}});this.onKeyUp=se(function(h){if(" "===h.key&&("selection"===d.state.elementType?bi(d.canvas):(ug(d.canvas,d.state.elementType),d.setState({selectedElementIds:{},selectedGroupIds:{},editingGroupId:null})),Eo=!1),h[xe]||d.state.isBindingEnabled||
d.setState({isBindingEnabled:!0}),Mj(h.key))h=We(d.scene.getElements(),d.state),d.state.isBindingEnabled?Dg(h):Tg(h),d.setState({suggestedBindings:[]})});this.onGestureStart=se(function(h){h.preventDefault();d.setState({selectedElementIds:{}});sp=d.state.zoom.value});this.onGestureChange=se(function(h){if(h.preventDefault(),2!==jl.size){var m=sp;m&&d.setState(function(A){var P=A.zoom,W=A.offsetLeft;A=A.offsetTop;return{zoom:Yh(fk(m*h.scale),P,{left:W,top:A},{x:tp,y:up})}})}});this.onGestureEnd=se(function(h){h.preventDefault();
d.setState({previousSelectedElementIds:{},selectedElementIds:d.state.previousSelectedElementIds});sp=null});this.startTextEditing=function(h){var m=h.sceneX,A=h.sceneY;h=h.insertAtParentCenter;var P=void 0===h||h;h=d.getTextElementAtPosition(m,A);P=P&&d.getTextWysiwygSnappedToCenterPosition(m,A,d.state,d.canvas,window.devicePixelRatio);m=h||hj({x:P?P.elementCenterX:m,y:P?P.elementCenterY:A,strokeColor:d.state.currentItemStrokeColor,backgroundColor:d.state.currentItemBackgroundColor,fillStyle:d.state.currentItemFillStyle,
strokeWidth:d.state.currentItemStrokeWidth,strokeStyle:d.state.currentItemStrokeStyle,roughness:d.state.currentItemRoughness,opacity:d.state.currentItemOpacity,strokeSharpness:d.state.currentItemStrokeSharpness,text:"",fontSize:d.state.currentItemFontSize,fontFamily:d.state.currentItemFontFamily,textAlign:P?"center":d.state.currentItemTextAlign,verticalAlign:P?"middle":Na.hs});d.setState({editingElement:m});h?P&&"center"===m.textAlign||pe(m,{verticalAlign:Na.hs}):(d.scene.replaceAllElements(Wg(Wg([],
d.scene.getElementsIncludingDeleted()),[m])),P||pe(m,{y:m.y-m.baseline/2}));d.setState({editingElement:m});d.handleTextWysiwyg(m,{isExistingElement:!!h})};this.handleCanvasDoubleClick=function(h){if(!d.state.multiElement&&"selection"===d.state.elementType){var m=We(d.scene.getElements(),d.state);if(1===m.length&&cg(m[0]))d.state.editingLinearElement&&d.state.editingLinearElement.elementId===m[0].id||(ak.resumeRecording(),d.setState({editingLinearElement:new Nf(m[0],d.scene)}));else{bi(d.canvas);var A=
Kf(h,d.state);m=A.x;A=A.y;if(0<sk(d.state).length){var P=d.getElementAtPosition(m,A),W=P&&function(va,qa){return va.groupIds.find(function(Aa){return qa[Aa]})}(P,d.state.selectedGroupIds);if(W)return void d.setState(function(va){var qa;return Je(Sa(Sa({},va),{},{editingGroupId:W,selectedElementIds:(qa={},qa[P.id]=!0,qa),selectedGroupIds:{}}),d.scene.getElements())})}bi(d.canvas);h[xe]||d.startTextEditing({sceneX:m,sceneY:A,insertAtParentCenter:!h.altKey})}}};this.handleCanvasPointerMove=function(h){d.savePointer(h.clientX,
h.clientY,d.state.cursorButton);jl.has(h.pointerId)&&jl.set(h.pointerId,{x:h.clientX,y:h.clientY});var m=sp;if(2===jl.size&&vp&&m&&br){var A=Jm(jl),P=A.x-vp.x,W=A.y-vp.y;vp=A;var va=Xn(Array.from(jl.values()))/br;d.setState(function(Kb){var Ib=Kb.zoom,mc=Kb.offsetLeft,Sc=Kb.offsetTop;return{scrollX:Kb.scrollX+P/Ib.value,scrollY:Kb.scrollY+W/Ib.value,zoom:Yh(fk(m*va),Ib,{left:mc,top:Sc},A),shouldCacheIgnoreZoom:!0}});d.resetShouldCacheIgnoreZoomDebounced()}else vp=br=sp=null;if(!(Eo||aq||Ur)){var qa=
ql(Wr,h.clientX-d.state.offsetLeft,h.clientY-d.state.offsetTop).isOverEither;d.state.draggingElement||d.state.multiElement||(qa?bi(d.canvas):ug(d.canvas,d.state.elementType));var Aa=Kf(h,d.state),La=Aa.x,Ga=Aa.y;if(d.state.editingLinearElement&&!d.state.editingLinearElement.isDragging){var gb=Nf.handlePointerMove(h,La,Ga,d.state.editingLinearElement,d.state.gridSize);gb!==d.state.editingLinearElement&&d.setState({editingLinearElement:gb});null!=gb.lastUncommittedPoint?d.maybeSuggestBindingAtCursor(Aa):
d.setState({suggestedBindings:[]})}"arrow"===d.state.elementType&&(gb=d.state.draggingElement,Qh(gb)?d.maybeSuggestBindingForLinearElementAtCursor(gb,"end",Aa,d.state.startBoundElement):d.maybeSuggestBindingAtCursor(Aa));if(d.state.multiElement){qa=d.state.multiElement;Aa=qa.x;gb=qa.y;h=qa.points;var ib=qa.lastCommittedPoint,kb=h[h.length-1];return ug(d.canvas,d.state.elementType),void(kb===ib?Math.hypot(kb[0]-(La-Aa),kb[1]-(Ga-gb))>=Na.qx?pe(qa,{points:Wg(Wg([],h),[[La-Aa,Ga-gb]])}):Ef(d.canvas,
Na.oc.POINTER):2<h.length&&ib&&Math.hypot(ib[0]-(La-Aa),ib[1]-(Ga-gb))<Na.qx?(Ef(d.canvas,Na.oc.POINTER),pe(qa,{points:h.slice(0,-1)})):(mi(h,d.state.zoom.value)&&Ef(d.canvas,Na.oc.POINTER),pe(qa,{points:Wg(Wg([],h.slice(0,-1)),[[La-Aa,Ga-gb]])})))}if(!(h.buttons||"selection"!==d.state.elementType&&"text"!==d.state.elementType)){ib=d.scene.getElements();gb=We(ib,d.state);if(1!==gb.length||qa||d.state.editingLinearElement){if(1<gb.length&&!qa&&(La=yi(pg(gb),La,Ga,d.state.zoom,h.pointerType)))return void Ef(d.canvas,
mg({transformHandleType:La}))}else if((La=Ol(ib,d.state,La,Ga,d.state.zoom,h.pointerType))&&La.transformHandleType)return void Ef(d.canvas,mg(La));La=d.getElementAtPosition(Aa.x,Aa.y);"text"===d.state.elementType?Ef(d.canvas,og(La)?Na.oc.TEXT:Na.oc.CROSSHAIR):qa?Ef(d.canvas,Na.oc.AUTO):La||d.isHittingCommonBoundingBoxOfSelectedElements(Aa,gb)?Ef(d.canvas,Na.oc.MOVE):Ef(d.canvas,Na.oc.AUTO)}}};this.handleTouchMove=function(h){$p=!0};this.handleCanvasPointerDown=function(h){if(h.persist(),d.maybeOpenContextMenuAfterPointerDownOnTouchDevices(h),
d.maybeCleanupAfterMissingPointerUp(h),!(aq||(d.setState({lastPointerDownWith:h.pointerType,cursorButton:"down"}),d.savePointer(h.clientX,h.clientY,"down"),d.handleCanvasPanUsingWheelOrSpaceDrag(h)||h.button!==Na.Oh.MAIN&&h.button!==Na.Oh.TOUCH||(d.updateGestureOnPointerDown(h),h.preventDefault(),document.activeElement instanceof HTMLElement&&document.activeElement.blur(),1<jl.size)))){var m=d.initialPointerDownState(h);if(!d.handleDraggingScrollBar(h,m)&&(d.clearSelectionIfNotUsingSelection(),d.updateBindingEnabledOnPointerMove(h),
!d.handleSelectionOnPointerDown(h,m)))if("text"!==d.state.elementType){"arrow"===d.state.elementType||"draw"===d.state.elementType||"line"===d.state.elementType?d.handleLinearElementOnPointerDown(h,d.state.elementType,m):d.createGenericElementOnPointerDown(d.state.elementType,m);h=d.onPointerMoveFromPointerDownHandler(m);var A=d.onPointerUpFromPointerDownHandler(m),P=d.onKeyDownFromPointerDownHandler(m),W=d.onKeyUpFromPointerDownHandler(m);$n=A;d.state.viewModeEnabled||(window.addEventListener(Na.Ks.POINTER_MOVE,
h),window.addEventListener(Na.Ks.POINTER_UP,A),window.addEventListener(Na.Ks.KEYDOWN,P),window.addEventListener(Na.Ks.KEYUP,W),m.eventListeners.onMove=h,m.eventListeners.onUp=A,m.eventListeners.onKeyUp=W,m.eventListeners.onKeyDown=P)}else d.handleTextOnPointerDown(h,m)}};this.maybeOpenContextMenuAfterPointerDownOnTouchDevices=function(h){"touch"===h.pointerType&&($p=!1,ho?$p=!0:ho=window.setTimeout(function(){ho=0;$p||d.openContextMenu({clientX:h.clientX,clientY:h.clientY})},Na.nM))};this.handleCanvasPanUsingWheelOrSpaceDrag=
function(h){if(0!==jl.size||!(h.button===Na.Oh.WHEEL||h.button===Na.Oh.MAIN&&Eo||d.state.viewModeEnabled))return!1;aq=!0;var m=!1,A=/Linux/.test(window.navigator.platform);Ef(d.canvas,Na.oc.GRABBING);var P=h.clientX,W=h.clientY,va=se(function(Aa){var La=P-Aa.clientX,Ga=W-Aa.clientY;if(P=Aa.clientX,W=Aa.clientY,A&&!m&&(1<Math.abs(La)||1<Math.abs(Ga))){m=!0;var gb=function(kb){document.body.removeEventListener(Na.Ks.PASTE,gb);kb.stopPropagation()},ib=function(){setTimeout(function(){document.body.removeEventListener(Na.Ks.PASTE,
gb);window.removeEventListener(Na.Ks.POINTER_UP,ib)},100)};document.body.addEventListener(Na.Ks.PASTE,gb);window.addEventListener(Na.Ks.POINTER_UP,ib)}d.setState({scrollX:d.state.scrollX-La/d.state.zoom.value,scrollY:d.state.scrollY-Ga/d.state.zoom.value})}),qa=se($n=function(){$n=null;aq=!1;Eo||ug(d.canvas,d.state.elementType);d.setState({cursorButton:"up"});d.savePointer(h.clientX,h.clientY,"up");window.removeEventListener(Na.Ks.POINTER_MOVE,va);window.removeEventListener(Na.Ks.POINTER_UP,qa);window.removeEventListener(Na.Ks.BLUR,
qa)});return window.addEventListener(Na.Ks.BLUR,qa),window.addEventListener(Na.Ks.POINTER_MOVE,va,{passive:!0}),window.addEventListener(Na.Ks.POINTER_UP,qa),!0};this.clearSelectionIfNotUsingSelection=function(){"selection"!==d.state.elementType&&d.setState({selectedElementIds:{},selectedGroupIds:{},editingGroupId:null})};this.handleSelectionOnPointerDown=function(h,m){if("selection"===d.state.elementType){var A=d.scene.getElements(),P=We(A,d.state);1!==P.length||d.state.editingLinearElement?1<P.length&&
(m.resize.handleType=yi(pg(P),m.origin.x,m.origin.y,d.state.zoom,h.pointerType)):(A=Ol(A,d.state,m.origin.x,m.origin.y,d.state.zoom,h.pointerType),null!=A&&(d.setState({resizingElement:A.element}),m.resize.handleType=A.transformHandleType));if(m.resize.handleType)Ef(d.canvas,mg({transformHandleType:m.resize.handleType})),m.resize.isResizing=!0,m.resize.offset=Oi(function(ib,kb,Kb,Ib){var mc,Sc=1===kb.length?zf(kb[0]):pg(kb),Yc=Sc[0],kd=Sc[1],ke=Sc[2];Sc=Sc[3];kb=1===kb.length?kb[0].angle:0;switch(Kb=
(mc=xf(Kb,Ib,(Yc+ke)/2,(kd+Sc)/2,-kb))[0],Ib=mc[1],ib){case "n":return xf(Kb-(Yc+ke)/2,Ib-kd,0,0,kb);case "s":return xf(Kb-(Yc+ke)/2,Ib-Sc,0,0,kb);case "w":return xf(Kb-Yc,Ib-(kd+Sc)/2,0,0,kb);case "e":return xf(Kb-ke,Ib-(kd+Sc)/2,0,0,kb);case "nw":return xf(Kb-Yc,Ib-kd,0,0,kb);case "ne":return xf(Kb-ke,Ib-kd,0,0,kb);case "sw":return xf(Kb-Yc,Ib-Sc,0,0,kb);case "se":return xf(Kb-ke,Ib-Sc,0,0,kb);default:return[0,0]}}(m.resize.handleType,P,m.origin.x,m.origin.y)),1===P.length&&cg(P[0])&&2===P[0].points.length&&
(m.resize.arrowDirection=(qa=m.resize.handleType,Aa=P[0],La=Aa.points[1],Ga=La[0],gb=La[1],"nw"===qa&&(0>Ga||0>gb)||"ne"===qa&&0<=Ga||"sw"===qa&&0>=Ga||"se"===qa&&(0<Ga||0<gb)?"end":"origin"));else{var W;if(d.state.editingLinearElement&&(P=Nf.handlePointerDown(h,d.state,function(ib){return d.setState(ib)},ak,m.origin),P.hitElement&&(m.hit.element=P.hitElement),P.didAddPoint))return!0;m.hit.element=null!==(W=m.hit.element)&&void 0!==W?W:d.getElementAtPosition(m.origin.x,m.origin.y);m.hit.allHitElements=
d.getElementsAtPosition(m.origin.x,m.origin.y);var va=m.hit.element;W=m.hit.allHitElements.some(function(ib){return d.isASelectedElement(ib)});if(null!==va&&W||h.shiftKey||m.hit.hasHitCommonBoundingBoxOfSelectedElements||d.clearSelection(va),null!=va){if(h[xe])return d.setState(function(ib){var kb;ib=Ka(Ka({},ib),{},{editingGroupId:va.groupIds.length?va.groupIds[0]:null,selectedGroupIds:{},selectedElementIds:(kb={},kb[va.id]=!0,kb)});return Sa(Sa({},ib),{},{previousSelectedElementIds:d.state.selectedElementIds})}),
!1;d.state.selectedElementIds[va.id]||(d.state.editingGroupId&&!va.groupIds.includes(d.state.editingGroupId)&&d.setState({selectedElementIds:{},selectedGroupIds:{},editingGroupId:null}),W||m.hit.hasHitCommonBoundingBoxOfSelectedElements||(d.setState(function(ib){var kb;return Je(Sa(Sa({},ib),{},{selectedElementIds:Sa(Sa({},ib.selectedElementIds),{},(kb={},kb[va.id]=!0,kb))}),d.scene.getElements())}),m.hit.wasAddedToSelection=!0))}d.setState({previousSelectedElementIds:d.state.selectedElementIds})}}var qa,
Aa,La,Ga,gb;return!1};this.handleTextOnPointerDown=function(h,m){var A;"text"!==(null===(A=d.state.editingElement)||void 0===A?void 0:A.type)&&(d.startTextEditing({sceneX:m.origin.x,sceneY:m.origin.y,insertAtParentCenter:!h.altKey}),bi(d.canvas),d.state.elementLocked||d.setState({elementType:"selection"}))};this.handleLinearElementOnPointerDown=function(h,m,A){if(d.state.multiElement){var P=d.state.multiElement;if("line"===P.type&&mi(P.points,d.state.zoom.value))return pe(P,{lastCommittedPoint:P.points[P.points.length-
1]}),void d.actionManager.executeAction(Of);m=P.x;h=P.y;var W=P.lastCommittedPoint;if(1<P.points.length&&W&&Math.hypot(W[0]-(A.origin.x-m),W[1]-(A.origin.y-h))<Na.qx)return void d.actionManager.executeAction(Of);d.setState(function(Aa){var La;return{selectedElementIds:Sa(Sa({},Aa.selectedElementIds),{},(La={},La[P.id]=!0,La))}});pe(P,{lastCommittedPoint:P.points[P.points.length-1]});Ef(d.canvas,Na.oc.POINTER)}else{h=nh(A.origin.x,A.origin.y,"draw"===m?null:d.state.gridSize);var va=d.state;W=va.currentItemStartArrowhead;
va=va.currentItemEndArrowhead;W="arrow"===m?[W,va]:[null,null];var qa=Th({type:m,x:h[0],y:h[1],strokeColor:d.state.currentItemStrokeColor,backgroundColor:d.state.currentItemBackgroundColor,fillStyle:d.state.currentItemFillStyle,strokeWidth:d.state.currentItemStrokeWidth,strokeStyle:d.state.currentItemStrokeStyle,roughness:d.state.currentItemRoughness,opacity:d.state.currentItemOpacity,strokeSharpness:d.state.currentItemLinearStrokeSharpness,startArrowhead:W[0],endArrowhead:W[1]});d.setState(function(Aa){var La;
return{selectedElementIds:Sa(Sa({},Aa.selectedElementIds),{},(La={},La[qa.id]=!1,La))}});pe(qa,{points:Wg(Wg([],qa.points),[[0,0]])});A=yh(A.origin,d.scene);d.scene.replaceAllElements(Wg(Wg([],d.scene.getElementsIncludingDeleted()),[qa]));d.setState({draggingElement:qa,editingElement:qa,startBoundElement:A,suggestedBindings:[]})}};this.createGenericElementOnPointerDown=function(h,m){m=nh(m.origin.x,m.origin.y,d.state.gridSize);h=Ll({type:h,x:m[0],y:m[1],strokeColor:d.state.currentItemStrokeColor,
backgroundColor:d.state.currentItemBackgroundColor,fillStyle:d.state.currentItemFillStyle,strokeWidth:d.state.currentItemStrokeWidth,strokeStyle:d.state.currentItemStrokeStyle,roughness:d.state.currentItemRoughness,opacity:d.state.currentItemOpacity,strokeSharpness:d.state.currentItemStrokeSharpness});"selection"===h.type?d.setState({selectionElement:h,draggingElement:h}):(d.scene.replaceAllElements(Wg(Wg([],d.scene.getElementsIncludingDeleted()),[h])),d.setState({multiElement:null,draggingElement:h,
editingElement:h}))};this.updateBindingEnabledOnPointerMove=function(h){h=!h[xe];d.state.isBindingEnabled!==h&&d.setState({isBindingEnabled:h})};this.maybeSuggestBindingAtCursor=function(h){h=yh(h,d.scene);d.setState({suggestedBindings:null!=h?[h]:[]})};this.maybeSuggestBindingForLinearElementAtCursor=function(h,m,A,P){m=yh(A,d.scene);d.setState({suggestedBindings:null==m||(null==P?void 0:P.id)===m.id&&3>h.points.length?[]:[m]})};this.handleCanvasRef=function(h){var m,A,P;null!==h?(d.canvas=h,d.rc=
Di.canvas(d.canvas),d.canvas.addEventListener(Na.Ks.WHEEL,d.handleWheel,{passive:!1}),d.canvas.addEventListener(Na.Ks.TOUCH_START,d.onTapStart),d.canvas.addEventListener(Na.Ks.TOUCH_END,d.onTapEnd)):(null===(m=d.canvas)||void 0===m||m.removeEventListener(Na.Ks.WHEEL,d.handleWheel),null===(A=d.canvas)||void 0===A||A.removeEventListener(Na.Ks.TOUCH_START,d.onTapStart),null===(P=d.canvas)||void 0===P||P.removeEventListener(Na.Ks.TOUCH_END,d.onTapEnd))};this.handleCanvasOnDrop=function(){var h=tb()(function(m){var A,
P,W,va,qa,Aa,La,Ga,gb,ib,kb;return Do(this,function(Kb){switch(Kb.label){case 0:return Kb.trys.push([0,3,,4]),"image/png"!==(null==(P=m.dataTransfer.files[0])?void 0:P.type)&&"image/svg+xml"!==(null==P?void 0:P.type)?[3,2]:[4,Dm(P,d.state)];case 1:return W=Kb.sent(),va=W.elements,qa=W.appState,d.syncActionResult({elements:va,appState:Sa(Sa({},qa||d.state),{},{isLoading:!1}),commitToHistory:!0}),[2];case 2:return[3,4];case 3:return Aa=Kb.sent(),[2,d.setState({isLoading:!1,errorMessage:Aa.message})];
case 4:if(""!==(La=m.dataTransfer.getData(Na.LO.excalidrawlib)))return d.addElementsFromPasteOrLibrary(JSON.parse(La),m.clientX,m.clientY),[2];if(!("application/json"===(null==(Ga=null===(A=m.dataTransfer)||void 0===A?void 0:A.files[0])?void 0:Ga.type)||null!=Ga&&Ga.name.endsWith(".excalidraw")))return[3,9];if(d.setState({isLoading:!0}),!("chooseFileSystemEntries"in window||"showOpenFilePicker"in window))return[3,8];Kb.label=5;case 5:return Kb.trys.push([5,7,,8]),gb=m.dataTransfer.items[0],ib=Ga,
[4,gb.getAsFileSystemHandle()];case 6:return ib.handle=Kb.sent(),[3,8];case 7:return kb=Kb.sent(),console.warn(kb.name,kb.message),[3,8];case 8:return Dm(Ga,d.state).then(function(Ib){return d.syncActionResult({elements:Ib.elements,appState:Sa(Sa({},Ib.appState||d.state),{},{isLoading:!1}),commitToHistory:!0})}).catch(function(Ib){d.setState({isLoading:!1,errorMessage:Ib.message})}),[3,10];case 9:(null==Ga?void 0:Ga.type)===Na.LO.excalidrawlib||null!=Ga&&Ga.name.endsWith(".excalidrawlib")?ih.importLibrary(Ga).then(function(){d.setState({isLibraryOpen:!1})}).catch(function(Ib){return d.setState({isLoading:!1,
errorMessage:Ib.message})}):d.setState({isLoading:!1,errorMessage:Jb("alerts.couldNotLoadInvalidFile")}),Kb.label=10;case 10:return[2]}})});return function(m){return h.apply(this,arguments)}}();this.handleCanvasContextMenu=function(h){h.preventDefault();d.openContextMenu(h)};this.maybeDragNewGenericElement=function(h,m){var A=d.state.draggingElement,P=h.lastCoords;if(A)if("selection"===A.type)ii(A,d.state.elementType,h.origin.x,h.origin.y,P.x,P.y,Math.abs(h.origin.x-P.x),Math.abs(h.origin.y-P.y),
m.shiftKey,m.altKey);else{var W=nh(P.x,P.y,d.state.gridSize);P=W[0];W=W[1];ii(A,d.state.elementType,h.originInGrid.x,h.originInGrid.y,P,W,Math.abs(h.originInGrid.x-P),Math.abs(h.originInGrid.y-W),m.shiftKey,m.altKey);d.maybeSuggestBindingForAll([A])}};this.maybeHandleResize=function(h,m){var A=We(d.scene.getElements(),d.state),P=h.resize.handleType;d.setState({isResizing:P&&"rotation"!==P,isRotating:"rotation"===P});var W=h.lastCoords;W=nh(W.x-h.resize.offset.x,W.y-h.resize.offset.y,d.state.gridSize);
a:{var va=h.resize.arrowDirection,qa=m.shiftKey,Aa=m.altKey;m=m.shiftKey;var La=W[0],Ga=W[1];W=h.resize.center.x;var gb=h.resize.center.y;if(1===A.length){W=A[0];if("rotation"===P)P=zf(W),P=5*Math.PI/2+Math.atan2(Ga-(P[1]+P[3])/2,La-(P[0]+P[2])/2),qa&&(P+=Na.ay/2,P-=P%Na.ay),P=tf(P),pe(W,{angle:P}),Vh(W);else if(!cg(W)||2!==W.points.length||"nw"!==P&&"ne"!==P&&"sw"!==P&&"se"!==P)if(!og(W)||"nw"!==P&&"ne"!==P&&"sw"!==P&&"se"!==P){if(P){va=h.originalElements.get(W.id);var ib=Rf(va,va.width,va.height);
qa=[ib[0],ib[1]];h=[ib[2],ib[3]];ib=[(qa[0]+h[0])/2,(qa[1]+h[1])/2];gb=Jj([La,Ga],ib,-va.angle);La=Rf(W,W.width,W.height);var kb=La[2]-La[0],Kb=La[3]-La[1];La=(h[0]-qa[0])/kb;Ga=(h[1]-qa[1])/Kb;P.includes("e")&&(La=(gb[0]-qa[0])/kb);P.includes("s")&&(Ga=(gb[1]-qa[1])/Kb);P.includes("w")&&(La=(h[0]-gb[0])/kb);P.includes("n")&&(Ga=(h[1]-gb[1])/Kb);gb=va.width;kb=va.height;La*=W.width;Ga*=W.height;if(Aa&&(La=2*La-gb,Ga=2*Ga-kb),m){Kb=Math.abs(La)/gb;var Ib=Math.abs(Ga)/kb;if(1===P.length&&(Ga*=Kb,La*=
Ib),2===P.length)Kb=Math.max(Kb,Ib),La=gb*Kb*Math.sign(La),Ga=kb*Kb*Math.sign(Ga)}Ib=Rf(va,La,Ga);gb=Ib[0];kb=Ib[1];Kb=Ib[2]-gb;Ib=Ib[3]-kb;var mc=Ji([],qa);if(["n","w","nw"].includes(P)&&(mc=[h[0]-Math.abs(Kb),h[1]-Math.abs(Ib)]),"ne"===P)mc=[qa[0],h[1]],mc=[mc[0],mc[1]-Math.abs(Ib)];"sw"===P&&(qa=[h[0],qa[1]],mc=[qa[0]-Math.abs(Kb),qa[1]]);m&&(["s","n"].includes(P)&&(mc[0]=ib[0]-Kb/2),["e","w"].includes(P)&&(mc[1]=ib[1]-Ib/2));0>La&&(P.includes("e")&&(mc[0]-=Math.abs(Kb)),P.includes("w")&&(mc[0]+=
Math.abs(Kb)));0>Ga&&(P.includes("s")&&(mc[1]-=Math.abs(Ib)),P.includes("n")&&(mc[1]+=Math.abs(Ib)));Aa&&(mc[0]=ib[0]-Math.abs(Kb)/2,mc[1]=ib[1]-Math.abs(Ib)/2);P=va.angle;Aa=Jj(mc,ib,P);m=Jj([mc[0]+Math.abs(Kb)/2,mc[1]+Math.abs(Ib)/2],ib,P);mc=Jj(Aa,m,-P);P=Ye(va,La,Ga);Aa=Ji([],mc);Aa[0]+=va.x-gb;Aa[1]+=va.y-kb;P=Xb({width:Math.abs(La),height:Math.abs(Ga),x:Aa[0],y:Aa[1]},P);0!==P.width&&0!==P.height&&Number.isFinite(P.x)&&Number.isFinite(P.y)&&(Vh(W,{newSize:{width:P.width,height:P.height}}),pe(W,
P))}}else{va=zf(W);h=va[0];qa=va[1];m=va[2];va=va[3];Ga=xf(La,Ga,(h+m)/2,(qa+va)/2,-W.angle);La=Ga[0];Ga=Ga[1];switch(P){case "se":ib=Math.max((La-h)/(m-h),(Ga-qa)/(va-qa));break;case "nw":ib=Math.max((m-La)/(m-h),(va-Ga)/(va-qa));break;case "ne":ib=Math.max((La-h)/(m-h),(va-Ga)/(va-qa));break;case "sw":ib=Math.max((m-La)/(m-h),(Ga-qa)/(va-qa))}0<ib&&(La=W.width*ib,ib*=W.height,Ga=lh(W,La,ib),null!==Ga&&(gb=Rf(W,La,ib),h=(h-gb[0])/2,qa=(qa-gb[1])/2,m=(m-gb[2])/2,va=(va-gb[3])/2,P={n:/^(n|ne|nw)$/.test(P)||
Aa&&/^(s|se|sw)$/.test(P),s:/^(s|se|sw)$/.test(P)||Aa&&/^(n|ne|nw)$/.test(P),w:/^(w|nw|sw)$/.test(P)||Aa&&/^(e|ne|se)$/.test(P),e:/^(e|ne|se)$/.test(P)||Aa&&/^(w|nw|sw)$/.test(P)},P=lk(P,W.x,W.y,W.angle,h,qa,m,va),pe(W,{fontSize:Ga.size,width:La,height:ib,baseline:Ga.baseline,x:P[0],y:P[1]})));Vh(W)}else P=zf(W),Aa=xf(La,Ga,(P[0]+P[2])/2,(P[1]+P[3])/2,-W.angle),P=Aa[0],Aa=Aa[1],Aa="end"===va?[P-W.x,Aa-W.y]:[W.x+W.points[1][0]-P,W.y+W.points[1][1]-Aa],P=Aa[0],Aa=Aa[1],qa&&(m=W.angle,P=lg.apply(void 0,
Ji([W.type],xf(P,Aa,0,0,m))),Aa=xf(P.width,P.height,0,0,-m),P=Aa[0],Aa=Aa[1]),m=lk("end"===va?{s:!0,e:!0}:{n:!0,w:!0},W.x,W.y,W.angle,0,0,(W.points[1][0]-P)/2,(W.points[1][1]-Aa)/2),pe(W,{x:m[0],y:m[1],points:[[0,0],[P,Aa]]});W=!0}else{if(1<A.length){if("rotation"===P){W=(oj(h,A,La,Ga,qa,W,gb),!0);break a}if("nw"===P||"ne"===P||"sw"===P||"se"===P){W=(Zk(A,P,La,Ga),!0);break a}}W=!1}}return!!W&&(d.maybeSuggestBindingForAll(A),!0)};this.openContextMenu=function(h){var m,A=h.clientX;h=h.clientY;var P=
Kf({clientX:A,clientY:h},d.state),W=P.x,va=P.y,qa=Sf.contextItemPredicate(d.actionManager.getElementsIncludingDeleted(),d.actionManager.getAppState()),Aa=oi.contextItemPredicate(d.actionManager.getElementsIncludingDeleted(),d.actionManager.getAppState());P=ig().matches;var La=d.scene.getElements();W=d.getElementAtPosition(W,va);va=[];(ok&&0<La.length&&va.push(pp),Lj&&0<La.length&&va.push(qp),W)?(d.state.selectedElementIds[W.id]||d.setState({selectedElementIds:(m={},m[W.id]=!0,m)}),d.state.viewModeEnabled?
An({options:Wg([navigator.clipboard&&dn],va),top:h,left:A,actionManager:d.actionManager,appState:d.state}):An({options:Wg(Wg([P&&Xp,P&&navigator.clipboard&&dn,P&&navigator.clipboard&&{name:"paste",perform:function(Ga,gb){return d.pasteFromClipboard(null),{commitToHistory:!1}},contextItemLabel:"labels.paste"},P&&"separator"],va),["separator",ff,Ue,"separator",qa&&Sf,Aa&&oi,(qa||Aa)&&"separator",Ao,"separator",kj,Fl,f,y,"separator",fa,Ff]),top:h,left:A,actionManager:d.actionManager,appState:d.state})):
(m=Wg(Wg([],va),[void 0===d.props.gridModeEnabled&&np,void 0===d.props.zenModeEnabled&&Xd,void 0===d.props.viewModeEnabled&&Is,Vn]),(An({options:m,top:h,left:A,actionManager:d.actionManager,appState:d.state}),d.state.viewModeEnabled)||An({options:[P&&navigator.clipboard&&{name:"paste",perform:function(Ga,gb){return d.pasteFromClipboard(null),{commitToHistory:!1}},contextItemLabel:"labels.paste"},P&&navigator.clipboard&&"separator",ok&&0<La.length&&pp,Lj&&0<La.length&&qp,(ok&&0<La.length||Lj&&0<La.length)&&
"separator",V,"separator",void 0===d.props.gridModeEnabled&&np,void 0===d.props.zenModeEnabled&&Xd,void 0===d.props.viewModeEnabled&&Is,Vn],top:h,left:A,actionManager:d.actionManager,appState:d.state}))};this.handleWheel=se(function(h){if(h.preventDefault(),!aq){var m=h.deltaX,A=h.deltaY,P=d.state,W=P.selectedElementIds,va=P.previousSelectedElementIds;if(h.metaKey||h.ctrlKey){h=Math.sign(A);P=Math.abs(A);10<P&&(P=10);P*=h;0!==Object.keys(va).length&&setTimeout(function(){d.setState({selectedElementIds:va,
previousSelectedElementIds:{}})},1E3);var qa=d.state.zoom.value-P/100;return qa+=Math.log10(Math.max(1,d.state.zoom.value))*-h,qa=Math.round(qa*Na.V4*100)/(100*Na.V4),d.setState(function(Aa){var La=Aa.zoom,Ga=Aa.offsetLeft;Aa=Aa.offsetTop;return{zoom:Yh(fk(qa),La,{left:Ga,top:Aa},{x:tp,y:up}),selectedElementIds:{},previousSelectedElementIds:0!==Object.keys(W).length?W:va,shouldCacheIgnoreZoom:!0}}),void d.resetShouldCacheIgnoreZoomDebounced()}h.shiftKey?d.setState(function(Aa){return{scrollX:Aa.scrollX-
(A||m)/Aa.zoom.value}}):d.setState(function(Aa){var La=Aa.zoom;return{scrollX:Aa.scrollX-m/La.value,scrollY:Aa.scrollY-A/La.value}})}});this.savePointer=function(h,m,A){var P,W;h&&m&&(h=Kf({clientX:h,clientY:m},d.state),isNaN(h.x)||isNaN(h.y),null===(P=(W=d.props).onPointerUpdate)||void 0===P||P.call(W,{pointer:h,button:A,pointersMap:jl}))};this.resetShouldCacheIgnoreZoomDebounced=bj(function(){d.unmounted||d.setState({shouldCacheIgnoreZoom:!1})},300)};"production"!==Na.Vi.TEST&&"production"!==Na.Vi.DEVELOPMENT||
(window.h=window.h||{},Object.defineProperties(window.h,{elements:{configurable:!0,get:function(){return this.app.scene.getElementsIncludingDeleted()},set:function(d){return this.app.scene.replaceAllElements(d)}},history:{configurable:!0,get:function(){return ak}},library:{configurable:!0,value:ih}}));g(8234);g(4651);var Hs=function(d){var h=d.width,m=d.height,A=d.offsetLeft,P=d.offsetTop,W=d.onChange,va=d.initialData,qa=d.excalidrawRef,Aa=d.onCollabButtonClick,La=d.isCollaborating,Ga=d.onPointerUpdate,
gb=d.onExportToBackend,ib=d.renderFooter,kb=d.langCode;kb=void 0===kb?Id.code:kb;var Kb=d.viewModeEnabled,Ib=d.zenModeEnabled;d=d.gridModeEnabled;return(0,Z.useEffect)(function(){var mc=function(Sc){"number"==typeof Sc.scale&&1!==Sc.scale&&Sc.preventDefault()};return document.addEventListener("touchmove",mc,{passive:!1}),function(){document.removeEventListener("touchmove",mc)}},[]),R().createElement(vh,{langCode:kb},R().createElement(Hf,null,R().createElement(Tr,{width:h,height:m,offsetLeft:A,offsetTop:P,
onChange:W,initialData:va,excalidrawRef:qa,onCollabButtonClick:Aa,isCollaborating:La,onPointerUpdate:Ga,onExportToBackend:gb,renderFooter:ib,langCode:kb,viewModeEnabled:Kb,zenModeEnabled:Ib,gridModeEnabled:d})))};Hs.defaultProps={lanCode:Id.code};var Qt=(0,Z.forwardRef)(function(d,h){return R().createElement(Hs,xa()({},d,{excalidrawRef:h}))});const Nt=R().memo(Qt,function(d,h){d.initialData;var m=N()(d,["initialData"]),A=(h.initialData,N()(h,["initialData"]));d=Object.keys(d);h=Object.keys(h);return d.length===
h.length&&d.every(function(P){return m[P]===A[P]})});g(6009);const Ot=Nt},4698:B=>{B.exports=u},6207:B=>{B.exports=t}},a={};return q.m=w,q.n=B=>{var n=B&&B.__esModule?()=>B.default:()=>B;return q.d(n,{a:n}),n},l=Object.getPrototypeOf?B=>Object.getPrototypeOf(B):B=>B.__proto__,q.t=function(B,n){if((1&n&&(B=this(B)),8&n)||"object"==typeof B&&B&&(4&n&&B.__esModule||16&n&&"function"==typeof B.then))return B;var g=Object.create(null);q.r(g);var z={};k=k||[null,l({}),l([]),l(l)];for(n=2&n&&B;"object"==
typeof n&&!~k.indexOf(n);n=l(n))Object.getOwnPropertyNames(n).forEach(D=>z[D]=()=>B[D]);return z.default=()=>B,q.d(g,z),g},q.d=(B,n)=>{for(var g in n)q.o(n,g)&&!q.o(B,g)&&Object.defineProperty(B,g,{enumerable:!0,get:n[g]})},q.f={},q.e=B=>Promise.all(Object.keys(q.f).reduce((n,g)=>(q.f[g](B,n),n),[])),q.u=B=>"excalidraw-assets/"+{9:"image",43:"i18n-de-DE-json",60:"i18n-ko-KR-json",62:"i18n-zh-TW-json",137:"i18n-ja-JP-json",149:"i18n-pt-PT-json",164:"i18n-kab-KAB-json",196:"i18n-nl-NL-json",213:"i18n-tr-TR-json",
242:"i18n-my-MM-json",246:"i18n-nb-NO-json",262:"i18n-he-IL-json",280:"i18n-pa-IN-json",304:"i18n-zh-CN-json",317:"i18n-es-ES-json",351:"i18n-ca-ES-json",364:"i18n-fr-FR-json",381:"i18n-pt-BR-json",384:"i18n-bg-BG-json",401:"i18n-sk-SK-json",465:"i18n-it-IT-json",472:"i18n-fi-FI-json",491:"i18n-id-ID-json",526:"i18n-el-GR-json",558:"i18n-ar-SA-json",565:"i18n-oc-FR-json",583:"i18n-uk-UA-json",661:"i18n-hu-HU-json",698:"i18n-sv-SE-json",710:"i18n-fa-IR-json",736:"vendor",752:"i18n-ro-RO-json",852:"i18n-pl-PL-json",
869:"i18n-ru-RU-json",920:"i18n-nn-NO-json",933:"i18n-hi-IN-json"}[B]+"-"+{9:"4c2d5c85067885b645af",43:"4823c48393124a3bc5fc",60:"75e2d73e015b1ef6a00d",62:"a0c2b649e55b974d40c5",137:"f474ca90ec8965ba76bc",149:"c9da04f1ebc22a355f86",164:"2fe8f05383d9a2909403",196:"2f881bef64ae25c364ac",213:"c242fdecb3c6041308d2",242:"ce2b98acffdb55807b6f",246:"c2cc1faff5c7d28c9137",262:"31401716f9d4fa7a8bbe",280:"e7099ca1ca91c8c95b90",304:"79915d2ad7106b7382fd",317:"7cd687c81182a9b5ed38",351:"6ac46acbf7738365c825",
364:"61ce1bd7bc0a3d36b14d",381:"364638bb52b1d6ba5d98",384:"a01c652fed411bb7e219",401:"0e83170f656b45bc1b89",465:"29c2adfbbe19b39bc050",472:"0890c5432a9aab3f4334",491:"43dd7122a92d9af1cc73",526:"71e0e6e546481de5271a",558:"3be99fb5f680b3d25ba6",565:"deee05849e45de2af8e7",583:"0605fca3af66a20c3875",661:"b10cefa097a941371ce6",698:"2e1cd9ef4c7da46616c6",710:"cb2081671627c079b0fe",736:"3525c448906ddcdcb701",752:"22baa4391c498a5fffc5",852:"488381cf4df470095153",869:"f6493c191c20d85e2b08",920:"ee5d2b7fda6783d75f36",
933:"f3ae9dac7b038b673e45"}[B]+".js",q.o=(B,n)=>Object.prototype.hasOwnProperty.call(B,n),p={},q.l=(B,n,g,z)=>{if(p[B])p[B].push(n);else{var D;if(void 0!==g){z=document.getElementsByTagName("script");for(var J=0;J<z.length;J++){var O=z[J];if(O.getAttribute("src")==B||O.getAttribute("data-webpack")=="Excalidraw:"+g){var S=O;break}}}S||(D=!0,(S=document.createElement("script")).charset="utf-8",S.timeout=120,q.nc&&S.setAttribute("nonce",q.nc),S.setAttribute("data-webpack","Excalidraw:"+g),S.src=B);p[B]=
[n];n=(G,E)=>{S.onerror=S.onload=null;clearTimeout(H);var F=p[B];if(delete p[B],S.parentNode&&S.parentNode.removeChild(S),F&&F.forEach(ia=>ia(E)),G)return G(E)};var H=setTimeout(n.bind(null,void 0,{type:"timeout",target:S}),12E4);S.onerror=n.bind(null,S.onerror);S.onload=n.bind(null,S.onload);D&&document.head.appendChild(S)}},q.r=B=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(B,Symbol.toStringTag,{value:"Module"});Object.defineProperty(B,"__esModule",{value:!0})},q.p="",
(()=>{var B={163:0};q.f.j=(z,D)=>{var J=q.o(B,z)?B[z]:void 0;if(0!==J)if(J)D.push(J[2]);else{var O=new Promise((H,G)=>{J=B[z]=[H,G]});D.push(J[2]=O);D=q.p+q.u(z);var S=Error();q.l(D,H=>{if(q.o(B,z)&&(0!==(J=B[z])&&(B[z]=void 0),J)){var G=H&&("load"===H.type?"missing":H.type);H=H&&H.target&&H.target.src;S.message="Loading chunk "+z+" failed.\n("+G+": "+H+")";S.name="ChunkLoadError";S.type=G;S.request=H;J[1](S)}},"chunk-"+z,z)}};var n=(z,D)=>{for(var J,O,[S,H,G]=D,E=0,F=[];E<S.length;E++)O=S[E],q.o(B,
O)&&B[O]&&F.push(B[O][0]),B[O]=0;for(J in H)q.o(H,J)&&(q.m[J]=H[J]);G&&G(q);for(z&&z(D);F.length;)F.shift()()},g=self.webpackChunkExcalidraw=self.webpackChunkExcalidraw||[];g.forEach(n.bind(null,0));g.push=n.bind(null,g.push.bind(g))})(),q(3956)})()})};
var xKb=function(a,b){var c=$APP.LC();$APP.l(c)&&$APP.tB($APP.QT(c,a),function(d){return b.F?b.F(d):b.call(null,d)},function(d){return $APP.$k($APP.E(["Error loading ",a,": ",d]))})},zKb=function(a){var b=$APP.Pn(a);b=$APP.l(b)?b.querySelector(".draw-wrap"):b;b=$APP.l(b)?b.clientWidth:b;$APP.Ii(yKb.F(a),b);return a},AKb=new $APP.H(null,"view-mode-enabled","view-mode-enabled",-588220561),BKb=new $APP.H($APP.ua,"view-mode?","frontend.extensions.excalidraw/view-mode?",525380621),CKb=new $APP.H(null,
"viewBackgroundColor","viewBackgroundColor",1889137994),DKb=new $APP.H(null,"grid-mode-enabled","grid-mode-enabled",584978327),EKb=new $APP.H(null,"gridSize","gridSize",843108791),FKb=new $APP.H($APP.ua,"elements","frontend.extensions.excalidraw/elements",1745667967),GKb=new $APP.H($APP.ua,"loading?","frontend.extensions.excalidraw/loading?",-1335058663),HKb=new $APP.H($APP.ua,"data","frontend.extensions.excalidraw/data",-1371036113),IKb=new $APP.H(null,"zen-mode-enabled","zen-mode-enabled",-955634269),
JKb=new $APP.H($APP.ua,"zen-mode?","frontend.extensions.excalidraw/zen-mode?",1559773511),KKb=new $APP.H(null,"appState","appState",-1920687968),LKb=new $APP.H(null,"initial-data","initial-data",-1315709804),yKb=new $APP.H($APP.ua,"draw-width","frontend.extensions.excalidraw/draw-width",-681100043);$APP.Tca("excalidraw");var MKb=$APP.um(436);var NKb,OKb,PKb,QKb;$APP.oIb={};NKb=$APP.GZ($APP.jb(MKb,"default"));OKb=$APP.ol.F(null);
PKb=$APP.Jn($APP.Nn,function(a,b,c){$APP.GC($APP.KC);$APP.Sn(OKb);var d=$APP.F.B(a,yKb),e=$APP.F.B(a,JKb),f=$APP.F.B(a,BKb),g=$APP.GC($APP.NR),m=$APP.F.B(a,FKb),p=$APP.so.F(c);return $APP.l(b)?$APP.Q("div",{onMouseDown:function(q){return $APP.EB(q)},className:"overflow-hidden"},[$APP.Q("div",{style:{fontSize:10},className:"my-1"},[$APP.Q("a",{onClick:$APP.gPa,className:"mr-2"},[$APP.qn($APP.rB("Wide Mode (%s)",$APP.E([$APP.l(g)?"ON":"OFF"])))]),$APP.Q("a",{onClick:function(){return $APP.pl.B(e,$APP.Bd)},
className:"mr-2"},[$APP.qn($APP.rB("Zen Mode (%s)",$APP.E([$APP.l($APP.r(e))?"ON":"OFF"])))]),$APP.Q("a",{onClick:function(){return $APP.pl.B(f,$APP.Bd)},className:"mr-2"},[$APP.qn($APP.rB("View Mode (%s)",$APP.E([$APP.l($APP.r(f))?"ON":"OFF"])))])]),$APP.Q("div",{onMouseDown:function(q){$APP.EB(q);return $APP.IC($APP.W0,!0)},onBlur:function(){return $APP.IC($APP.W0,!1)},className:"draw-wrap"},[$APP.qn(function(){var q=$APP.Hn.K($APP.E([new $APP.k(null,6,[$APP.VX,function(u,x){var y=$APP.hw(u);return $APP.v(y)&&
$APP.mk.B(u,$APP.r(m))?(x=$APP.hw(x),$APP.fUa(p,JSON.stringify($APP.iw(new $APP.k(null,5,[$APP.qo,"excalidraw",$APP.D8a,2,$APP.Bs,$APP.wU,$APP.v5,u,KKb,$APP.nk(x,new $APP.K(null,2,5,$APP.N,[EKb,CKb],null))],null)))),$APP.Ii(m,u)):null},IKb,$APP.r(e),AKb,$APP.r(f),DKb,!1,LKb,b,$APP.DX,$APP.r(d)],null),$APP.l(g)?new $APP.k(null,1,[$APP.CX,650],null):new $APP.k(null,1,[$APP.CX,500],null)]));return NKb.F?NKb.F(q):NKb.call(null,q)}())])]):null},new $APP.K(null,7,5,$APP.N,[$APP.E8,$APP.Qn(800,yKb),$APP.Qn(!0,
JKb),$APP.Qn(!1,BKb),$APP.Qn(null,FKb),new $APP.k(null,1,[$APP.Dn,zKb],null),new $APP.k(null,1,[$APP.Fn,zKb],null)],null),"frontend.extensions.excalidraw/draw-inner");
QKb=$APP.Jn($APP.Nn,function(a,b){var c=$APP.F.B(a,HKb);a=$APP.F.B(a,GKb);a=$APP.Sn(a);c=$APP.Sn(c);var d=$APP.GC($APP.eY);return $APP.l($APP.so.F(b))?$APP.l(d)?(b=$APP.ZX("Loading"),$APP.Q("div",$APP.Of(b)?$APP.pn($APP.kn($APP.E([new $APP.k(null,1,[$APP.hn,new $APP.K(null,1,5,$APP.N,["ls-center"],null)],null),b]))):{className:"ls-center"},$APP.Of(b)?null:[$APP.qn(b)])):!1===a?PKb(c,b):null:null},new $APP.K(null,2,5,$APP.N,[$APP.E8,new $APP.k(null,1,[$APP.An,function(a){var b=$APP.Kn.F(a);b=$APP.D.G(b,
0,null);b=$APP.so.F(b);var c=$APP.ol.F(null),d=$APP.ol.F(!0);$APP.l(b)&&xKb(b,function(e){if($APP.Xm(e))var f=null;else try{f=JSON.parse(e)}catch(g){if(g instanceof Error)e=g,$APP.$k($APP.E(["from json error:"])),console.dir(e),f=$APP.NL($APP.dta("Could not load this invalid excalidraw file"),$APP.xq);else throw g;}$APP.Ii(c,f);return $APP.Ii(d,!1)});return $APP.P.K(a,HKb,c,$APP.E([GKb,d]))}],null)],null),"frontend.extensions.excalidraw/draw-container");
$APP.pIb=$APP.Jn($APP.Mn,function(a){var b=$APP.LC(),c=$APP.GC(new $APP.K(null,2,5,$APP.N,[$APP.eR,b],null));return $APP.qE(b)&&$APP.Bd(c)&&$APP.Bd($APP.qB())?null:QKb(a)},new $APP.K(null,1,5,$APP.N,[$APP.E8],null),"frontend.extensions.excalidraw/draw");$APP.mc.pi();
}).call(this);
//# sourceMappingURL=excalidraw.js.map
